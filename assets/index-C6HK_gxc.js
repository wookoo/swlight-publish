var Ub=Object.defineProperty;var Dw=f=>{throw TypeError(f)};var Vb=(f,e,t)=>e in f?Ub(f,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):f[e]=t;var be=(f,e,t)=>Vb(f,typeof e!="symbol"?e+"":e,t),Zg=(f,e,t)=>e.has(f)||Dw("Cannot "+t);var l=(f,e,t)=>(Zg(f,e,"read from private field"),t?t.call(f):e.get(f)),x=(f,e,t)=>e.has(f)?Dw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(f):e.set(f,t),A=(f,e,t,i)=>(Zg(f,e,"write to private field"),i?i.call(f,t):e.set(f,t),t),E=(f,e,t)=>(Zg(f,e,"access private method"),t);var cn=(f,e,t,i)=>({set _(r){A(f,e,r,t)},get _(){return l(f,e,i)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();function $b(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var em={exports:{}},Xu={},tm={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nw;function Wb(){if(Nw)return Fe;Nw=1;var f=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.iterator;function w(M){return M===null||typeof M!="object"?null:(M=v&&M[v]||M["@@iterator"],typeof M=="function"?M:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,C={};function P(M,U,ae){this.props=M,this.context=U,this.refs=C,this.updater=ae||_}P.prototype.isReactComponent={},P.prototype.setState=function(M,U){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,U,"setState")},P.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function k(){}k.prototype=P.prototype;function I(M,U,ae){this.props=M,this.context=U,this.refs=C,this.updater=ae||_}var D=I.prototype=new k;D.constructor=I,b(D,P.prototype),D.isPureReactComponent=!0;var F=Array.isArray,j=Object.prototype.hasOwnProperty,H={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function $(M,U,ae){var we,Ce={},me=null,ge=null;if(U!=null)for(we in U.ref!==void 0&&(ge=U.ref),U.key!==void 0&&(me=""+U.key),U)j.call(U,we)&&!V.hasOwnProperty(we)&&(Ce[we]=U[we]);var Re=arguments.length-2;if(Re===1)Ce.children=ae;else if(1<Re){for(var Ne=Array(Re),Ie=0;Ie<Re;Ie++)Ne[Ie]=arguments[Ie+2];Ce.children=Ne}if(M&&M.defaultProps)for(we in Re=M.defaultProps,Re)Ce[we]===void 0&&(Ce[we]=Re[we]);return{$$typeof:f,type:M,key:me,ref:ge,props:Ce,_owner:H.current}}function K(M,U){return{$$typeof:f,type:M.type,key:U,ref:M.ref,props:M.props,_owner:M._owner}}function te(M){return typeof M=="object"&&M!==null&&M.$$typeof===f}function ee(M){var U={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ae){return U[ae]})}var Se=/\/+/g;function de(M,U){return typeof M=="object"&&M!==null&&M.key!=null?ee(""+M.key):U.toString(36)}function ce(M,U,ae,we,Ce){var me=typeof M;(me==="undefined"||me==="boolean")&&(M=null);var ge=!1;if(M===null)ge=!0;else switch(me){case"string":case"number":ge=!0;break;case"object":switch(M.$$typeof){case f:case e:ge=!0}}if(ge)return ge=M,Ce=Ce(ge),M=we===""?"."+de(ge,0):we,F(Ce)?(ae="",M!=null&&(ae=M.replace(Se,"$&/")+"/"),ce(Ce,U,ae,"",function(Ie){return Ie})):Ce!=null&&(te(Ce)&&(Ce=K(Ce,ae+(!Ce.key||ge&&ge.key===Ce.key?"":(""+Ce.key).replace(Se,"$&/")+"/")+M)),U.push(Ce)),1;if(ge=0,we=we===""?".":we+":",F(M))for(var Re=0;Re<M.length;Re++){me=M[Re];var Ne=we+de(me,Re);ge+=ce(me,U,ae,Ne,Ce)}else if(Ne=w(M),typeof Ne=="function")for(M=Ne.call(M),Re=0;!(me=M.next()).done;)me=me.value,Ne=we+de(me,Re++),ge+=ce(me,U,ae,Ne,Ce);else if(me==="object")throw U=String(M),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return ge}function ve(M,U,ae){if(M==null)return M;var we=[],Ce=0;return ce(M,we,"","",function(me){return U.call(ae,me,Ce++)}),we}function pe(M){if(M._status===-1){var U=M._result;U=U(),U.then(function(ae){(M._status===0||M._status===-1)&&(M._status=1,M._result=ae)},function(ae){(M._status===0||M._status===-1)&&(M._status=2,M._result=ae)}),M._status===-1&&(M._status=0,M._result=U)}if(M._status===1)return M._result.default;throw M._result}var Y={current:null},B={transition:null},se={ReactCurrentDispatcher:Y,ReactCurrentBatchConfig:B,ReactCurrentOwner:H};function Q(){throw Error("act(...) is not supported in production builds of React.")}return Fe.Children={map:ve,forEach:function(M,U,ae){ve(M,function(){U.apply(this,arguments)},ae)},count:function(M){var U=0;return ve(M,function(){U++}),U},toArray:function(M){return ve(M,function(U){return U})||[]},only:function(M){if(!te(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Fe.Component=P,Fe.Fragment=t,Fe.Profiler=r,Fe.PureComponent=I,Fe.StrictMode=i,Fe.Suspense=d,Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=se,Fe.act=Q,Fe.cloneElement=function(M,U,ae){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var we=b({},M.props),Ce=M.key,me=M.ref,ge=M._owner;if(U!=null){if(U.ref!==void 0&&(me=U.ref,ge=H.current),U.key!==void 0&&(Ce=""+U.key),M.type&&M.type.defaultProps)var Re=M.type.defaultProps;for(Ne in U)j.call(U,Ne)&&!V.hasOwnProperty(Ne)&&(we[Ne]=U[Ne]===void 0&&Re!==void 0?Re[Ne]:U[Ne])}var Ne=arguments.length-2;if(Ne===1)we.children=ae;else if(1<Ne){Re=Array(Ne);for(var Ie=0;Ie<Ne;Ie++)Re[Ie]=arguments[Ie+2];we.children=Re}return{$$typeof:f,type:M.type,key:Ce,ref:me,props:we,_owner:ge}},Fe.createContext=function(M){return M={$$typeof:u,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:a,_context:M},M.Consumer=M},Fe.createElement=$,Fe.createFactory=function(M){var U=$.bind(null,M);return U.type=M,U},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(M){return{$$typeof:c,render:M}},Fe.isValidElement=te,Fe.lazy=function(M){return{$$typeof:m,_payload:{_status:-1,_result:M},_init:pe}},Fe.memo=function(M,U){return{$$typeof:p,type:M,compare:U===void 0?null:U}},Fe.startTransition=function(M){var U=B.transition;B.transition={};try{M()}finally{B.transition=U}},Fe.unstable_act=Q,Fe.useCallback=function(M,U){return Y.current.useCallback(M,U)},Fe.useContext=function(M){return Y.current.useContext(M)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(M){return Y.current.useDeferredValue(M)},Fe.useEffect=function(M,U){return Y.current.useEffect(M,U)},Fe.useId=function(){return Y.current.useId()},Fe.useImperativeHandle=function(M,U,ae){return Y.current.useImperativeHandle(M,U,ae)},Fe.useInsertionEffect=function(M,U){return Y.current.useInsertionEffect(M,U)},Fe.useLayoutEffect=function(M,U){return Y.current.useLayoutEffect(M,U)},Fe.useMemo=function(M,U){return Y.current.useMemo(M,U)},Fe.useReducer=function(M,U,ae){return Y.current.useReducer(M,U,ae)},Fe.useRef=function(M){return Y.current.useRef(M)},Fe.useState=function(M){return Y.current.useState(M)},Fe.useSyncExternalStore=function(M,U,ae){return Y.current.useSyncExternalStore(M,U,ae)},Fe.useTransition=function(){return Y.current.useTransition()},Fe.version="18.3.1",Fe}var Ow;function My(){return Ow||(Ow=1,tm.exports=Wb()),tm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zw;function Gb(){if(zw)return Xu;zw=1;var f=My(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(c,d,p){var m,v={},w=null,_=null;p!==void 0&&(w=""+p),d.key!==void 0&&(w=""+d.key),d.ref!==void 0&&(_=d.ref);for(m in d)i.call(d,m)&&!a.hasOwnProperty(m)&&(v[m]=d[m]);if(c&&c.defaultProps)for(m in d=c.defaultProps,d)v[m]===void 0&&(v[m]=d[m]);return{$$typeof:e,type:c,key:w,ref:_,props:v,_owner:r.current}}return Xu.Fragment=t,Xu.jsx=u,Xu.jsxs=u,Xu}var Hw;function Xb(){return Hw||(Hw=1,em.exports=Gb()),em.exports}var je=Xb(),oe=My(),Xd={},nm={exports:{}},Sn={},im={exports:{}},sm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jw;function qb(){return jw||(jw=1,function(f){function e(B,se){var Q=B.length;B.push(se);e:for(;0<Q;){var M=Q-1>>>1,U=B[M];if(0<r(U,se))B[M]=se,B[Q]=U,Q=M;else break e}}function t(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var se=B[0],Q=B.pop();if(Q!==se){B[0]=Q;e:for(var M=0,U=B.length,ae=U>>>1;M<ae;){var we=2*(M+1)-1,Ce=B[we],me=we+1,ge=B[me];if(0>r(Ce,Q))me<U&&0>r(ge,Ce)?(B[M]=ge,B[me]=Q,M=me):(B[M]=Ce,B[we]=Q,M=we);else if(me<U&&0>r(ge,Q))B[M]=ge,B[me]=Q,M=me;else break e}}return se}function r(B,se){var Q=B.sortIndex-se.sortIndex;return Q!==0?Q:B.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;f.unstable_now=function(){return a.now()}}else{var u=Date,c=u.now();f.unstable_now=function(){return u.now()-c}}var d=[],p=[],m=1,v=null,w=3,_=!1,b=!1,C=!1,P=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(B){for(var se=t(p);se!==null;){if(se.callback===null)i(p);else if(se.startTime<=B)i(p),se.sortIndex=se.expirationTime,e(d,se);else break;se=t(p)}}function F(B){if(C=!1,D(B),!b)if(t(d)!==null)b=!0,pe(j);else{var se=t(p);se!==null&&Y(F,se.startTime-B)}}function j(B,se){b=!1,C&&(C=!1,k($),$=-1),_=!0;var Q=w;try{for(D(se),v=t(d);v!==null&&(!(v.expirationTime>se)||B&&!ee());){var M=v.callback;if(typeof M=="function"){v.callback=null,w=v.priorityLevel;var U=M(v.expirationTime<=se);se=f.unstable_now(),typeof U=="function"?v.callback=U:v===t(d)&&i(d),D(se)}else i(d);v=t(d)}if(v!==null)var ae=!0;else{var we=t(p);we!==null&&Y(F,we.startTime-se),ae=!1}return ae}finally{v=null,w=Q,_=!1}}var H=!1,V=null,$=-1,K=5,te=-1;function ee(){return!(f.unstable_now()-te<K)}function Se(){if(V!==null){var B=f.unstable_now();te=B;var se=!0;try{se=V(!0,B)}finally{se?de():(H=!1,V=null)}}else H=!1}var de;if(typeof I=="function")de=function(){I(Se)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,ve=ce.port2;ce.port1.onmessage=Se,de=function(){ve.postMessage(null)}}else de=function(){P(Se,0)};function pe(B){V=B,H||(H=!0,de())}function Y(B,se){$=P(function(){B(f.unstable_now())},se)}f.unstable_IdlePriority=5,f.unstable_ImmediatePriority=1,f.unstable_LowPriority=4,f.unstable_NormalPriority=3,f.unstable_Profiling=null,f.unstable_UserBlockingPriority=2,f.unstable_cancelCallback=function(B){B.callback=null},f.unstable_continueExecution=function(){b||_||(b=!0,pe(j))},f.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<B?Math.floor(1e3/B):5},f.unstable_getCurrentPriorityLevel=function(){return w},f.unstable_getFirstCallbackNode=function(){return t(d)},f.unstable_next=function(B){switch(w){case 1:case 2:case 3:var se=3;break;default:se=w}var Q=w;w=se;try{return B()}finally{w=Q}},f.unstable_pauseExecution=function(){},f.unstable_requestPaint=function(){},f.unstable_runWithPriority=function(B,se){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Q=w;w=B;try{return se()}finally{w=Q}},f.unstable_scheduleCallback=function(B,se,Q){var M=f.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?M+Q:M):Q=M,B){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=Q+U,B={id:m++,callback:se,priorityLevel:B,startTime:Q,expirationTime:U,sortIndex:-1},Q>M?(B.sortIndex=Q,e(p,B),t(d)===null&&B===t(p)&&(C?(k($),$=-1):C=!0,Y(F,Q-M))):(B.sortIndex=U,e(d,B),b||_||(b=!0,pe(j))),B},f.unstable_shouldYield=ee,f.unstable_wrapCallback=function(B){var se=w;return function(){var Q=w;w=se;try{return B.apply(this,arguments)}finally{w=Q}}}}(sm)),sm}var Bw;function Yb(){return Bw||(Bw=1,im.exports=qb()),im.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uw;function Kb(){if(Uw)return Sn;Uw=1;var f=My(),e=Yb();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,o=1;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,r={};function a(n,s){u(n,s),u(n+"Capture",s)}function u(n,s){for(r[n]=s,n=0;n<s.length;n++)i.add(s[n])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},v={};function w(n){return d.call(v,n)?!0:d.call(m,n)?!1:p.test(n)?v[n]=!0:(m[n]=!0,!1)}function _(n,s,o,h){if(o!==null&&o.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:o!==null?!o.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function b(n,s,o,h){if(s===null||typeof s>"u"||_(n,s,o,h))return!0;if(h)return!1;if(o!==null)switch(o.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function C(n,s,o,h,g,y,S){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=g,this.mustUseProperty=o,this.propertyName=n,this.type=s,this.sanitizeURL=y,this.removeEmptyString=S}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){P[n]=new C(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];P[s]=new C(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){P[n]=new C(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){P[n]=new C(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){P[n]=new C(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){P[n]=new C(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){P[n]=new C(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){P[n]=new C(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){P[n]=new C(n,5,!1,n.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function I(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(k,I);P[s]=new C(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(k,I);P[s]=new C(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(k,I);P[s]=new C(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){P[n]=new C(n,1,!1,n.toLowerCase(),null,!1,!1)}),P.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){P[n]=new C(n,1,!1,n.toLowerCase(),null,!0,!0)});function D(n,s,o,h){var g=P.hasOwnProperty(s)?P[s]:null;(g!==null?g.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(b(s,o,g,h)&&(o=null),h||g===null?w(s)&&(o===null?n.removeAttribute(s):n.setAttribute(s,""+o)):g.mustUseProperty?n[g.propertyName]=o===null?g.type===3?!1:"":o:(s=g.attributeName,h=g.attributeNamespace,o===null?n.removeAttribute(s):(g=g.type,o=g===3||g===4&&o===!0?"":""+o,h?n.setAttributeNS(h,s,o):n.setAttribute(s,o))))}var F=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),H=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),te=Symbol.for("react.provider"),ee=Symbol.for("react.context"),Se=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),ve=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),Y=Symbol.for("react.offscreen"),B=Symbol.iterator;function se(n){return n===null||typeof n!="object"?null:(n=B&&n[B]||n["@@iterator"],typeof n=="function"?n:null)}var Q=Object.assign,M;function U(n){if(M===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);M=s&&s[1]||""}return`
`+M+n}var ae=!1;function we(n,s){if(!n||ae)return"";ae=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(z){var h=z}Reflect.construct(n,[],s)}else{try{s.call()}catch(z){h=z}n.call(s.prototype)}else{try{throw Error()}catch(z){h=z}n()}}catch(z){if(z&&h&&typeof z.stack=="string"){for(var g=z.stack.split(`
`),y=h.stack.split(`
`),S=g.length-1,T=y.length-1;1<=S&&0<=T&&g[S]!==y[T];)T--;for(;1<=S&&0<=T;S--,T--)if(g[S]!==y[T]){if(S!==1||T!==1)do if(S--,T--,0>T||g[S]!==y[T]){var R=`
`+g[S].replace(" at new "," at ");return n.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",n.displayName)),R}while(1<=S&&0<=T);break}}}finally{ae=!1,Error.prepareStackTrace=o}return(n=n?n.displayName||n.name:"")?U(n):""}function Ce(n){switch(n.tag){case 5:return U(n.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return n=we(n.type,!1),n;case 11:return n=we(n.type.render,!1),n;case 1:return n=we(n.type,!0),n;default:return""}}function me(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case V:return"Fragment";case H:return"Portal";case K:return"Profiler";case $:return"StrictMode";case de:return"Suspense";case ce:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case ee:return(n.displayName||"Context")+".Consumer";case te:return(n._context.displayName||"Context")+".Provider";case Se:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ve:return s=n.displayName||null,s!==null?s:me(n.type)||"Memo";case pe:s=n._payload,n=n._init;try{return me(n(s))}catch{}}return null}function ge(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return me(s);case 8:return s===$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Re(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ne(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ie(n){var s=Ne(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),h=""+n[s];if(!n.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var g=o.get,y=o.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return g.call(this)},set:function(S){h=""+S,y.call(this,S)}}),Object.defineProperty(n,s,{enumerable:o.enumerable}),{getValue:function(){return h},setValue:function(S){h=""+S},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Mi(n){n._valueTracker||(n._valueTracker=Ie(n))}function Ks(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),h="";return n&&(h=Ne(n)?n.checked?"true":"false":n.value),n=h,n!==o?(s.setValue(n),!0):!1}function Ue(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function it(n,s){var o=s.checked;return Q({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??n._wrapperState.initialChecked})}function bt(n,s){var o=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;o=Re(s.value!=null?s.value:o),n._wrapperState={initialChecked:h,initialValue:o,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function gt(n,s){s=s.checked,s!=null&&D(n,"checked",s,!1)}function Ii(n,s){gt(n,s);var o=Re(s.value),h=s.type;if(o!=null)h==="number"?(o===0&&n.value===""||n.value!=o)&&(n.value=""+o):n.value!==""+o&&(n.value=""+o);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?lu(n,s.type,o):s.hasOwnProperty("defaultValue")&&lu(n,s.type,Re(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Qs(n,s,o){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,o||s===n.value||(n.value=s),n.defaultValue=s}o=n.name,o!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,o!==""&&(n.name=o)}function lu(n,s,o){(s!=="number"||Ue(n.ownerDocument)!==n)&&(o==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+o&&(n.defaultValue=""+o))}var Jr=Array.isArray;function li(n,s,o,h){if(n=n.options,s){s={};for(var g=0;g<o.length;g++)s["$"+o[g]]=!0;for(o=0;o<n.length;o++)g=s.hasOwnProperty("$"+n[o].value),n[o].selected!==g&&(n[o].selected=g),g&&h&&(n[o].defaultSelected=!0)}else{for(o=""+Re(o),s=null,g=0;g<n.length;g++){if(n[g].value===o){n[g].selected=!0,h&&(n[g].defaultSelected=!0);return}s!==null||n[g].disabled||(s=n[g])}s!==null&&(s.selected=!0)}}function uu(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return Q({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Nh(n,s){var o=s.value;if(o==null){if(o=s.children,s=s.defaultValue,o!=null){if(s!=null)throw Error(t(92));if(Jr(o)){if(1<o.length)throw Error(t(93));o=o[0]}s=o}s==null&&(s=""),o=s}n._wrapperState={initialValue:Re(o)}}function Oh(n,s){var o=Re(s.value),h=Re(s.defaultValue);o!=null&&(o=""+o,o!==n.value&&(n.value=o),s.defaultValue==null&&n.defaultValue!==o&&(n.defaultValue=o)),h!=null&&(n.defaultValue=""+h)}function zh(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function Hh(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fi(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?Hh(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var rs,Zr=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,o,h,g){MSApp.execUnsafeLocalFunction(function(){return n(s,o,h,g)})}:n}(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(rs=rs||document.createElement("div"),rs.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=rs.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function os(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var cu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GS=["Webkit","ms","Moz","O"];Object.keys(cu).forEach(function(n){GS.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),cu[s]=cu[n]})});function Ky(n,s,o){return s==null||typeof s=="boolean"||s===""?"":o||typeof s!="number"||s===0||cu.hasOwnProperty(n)&&cu[n]?(""+s).trim():s+"px"}function Qy(n,s){n=n.style;for(var o in s)if(s.hasOwnProperty(o)){var h=o.indexOf("--")===0,g=Ky(o,s[o],h);o==="float"&&(o="cssFloat"),h?n.setProperty(o,g):n[o]=g}}var XS=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hp(n,s){if(s){if(XS[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function dp(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fp=null;function pp(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var gp=null,Ca=null,ka=null;function Jy(n){if(n=Mu(n)){if(typeof gp!="function")throw Error(t(280));var s=n.stateNode;s&&(s=ld(s),gp(n.stateNode,n.type,s))}}function Zy(n){Ca?ka?ka.push(n):ka=[n]:Ca=n}function ev(){if(Ca){var n=Ca,s=ka;if(ka=Ca=null,Jy(n),s)for(n=0;n<s.length;n++)Jy(s[n])}}function tv(n,s){return n(s)}function nv(){}var mp=!1;function iv(n,s,o){if(mp)return n(s,o);mp=!0;try{return tv(n,s,o)}finally{mp=!1,(Ca!==null||ka!==null)&&(nv(),ev())}}function hu(n,s){var o=n.stateNode;if(o===null)return null;var h=ld(o);if(h===null)return null;o=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(t(231,s,typeof o));return o}var yp=!1;if(c)try{var du={};Object.defineProperty(du,"passive",{get:function(){yp=!0}}),window.addEventListener("test",du,du),window.removeEventListener("test",du,du)}catch{yp=!1}function qS(n,s,o,h,g,y,S,T,R){var z=Array.prototype.slice.call(arguments,3);try{s.apply(o,z)}catch(G){this.onError(G)}}var fu=!1,jh=null,Bh=!1,vp=null,YS={onError:function(n){fu=!0,jh=n}};function KS(n,s,o,h,g,y,S,T,R){fu=!1,jh=null,qS.apply(YS,arguments)}function QS(n,s,o,h,g,y,S,T,R){if(KS.apply(this,arguments),fu){if(fu){var z=jh;fu=!1,jh=null}else throw Error(t(198));Bh||(Bh=!0,vp=z)}}function eo(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,s.flags&4098&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function sv(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function rv(n){if(eo(n)!==n)throw Error(t(188))}function JS(n){var s=n.alternate;if(!s){if(s=eo(n),s===null)throw Error(t(188));return s!==n?null:n}for(var o=n,h=s;;){var g=o.return;if(g===null)break;var y=g.alternate;if(y===null){if(h=g.return,h!==null){o=h;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===o)return rv(g),n;if(y===h)return rv(g),s;y=y.sibling}throw Error(t(188))}if(o.return!==h.return)o=g,h=y;else{for(var S=!1,T=g.child;T;){if(T===o){S=!0,o=g,h=y;break}if(T===h){S=!0,h=g,o=y;break}T=T.sibling}if(!S){for(T=y.child;T;){if(T===o){S=!0,o=y,h=g;break}if(T===h){S=!0,h=y,o=g;break}T=T.sibling}if(!S)throw Error(t(189))}}if(o.alternate!==h)throw Error(t(190))}if(o.tag!==3)throw Error(t(188));return o.stateNode.current===o?n:s}function ov(n){return n=JS(n),n!==null?av(n):null}function av(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=av(n);if(s!==null)return s;n=n.sibling}return null}var lv=e.unstable_scheduleCallback,uv=e.unstable_cancelCallback,ZS=e.unstable_shouldYield,eE=e.unstable_requestPaint,mt=e.unstable_now,tE=e.unstable_getCurrentPriorityLevel,wp=e.unstable_ImmediatePriority,cv=e.unstable_UserBlockingPriority,Uh=e.unstable_NormalPriority,nE=e.unstable_LowPriority,hv=e.unstable_IdlePriority,Vh=null,Di=null;function iE(n){if(Di&&typeof Di.onCommitFiberRoot=="function")try{Di.onCommitFiberRoot(Vh,n,void 0,(n.current.flags&128)===128)}catch{}}var ui=Math.clz32?Math.clz32:oE,sE=Math.log,rE=Math.LN2;function oE(n){return n>>>=0,n===0?32:31-(sE(n)/rE|0)|0}var $h=64,Wh=4194304;function pu(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Gh(n,s){var o=n.pendingLanes;if(o===0)return 0;var h=0,g=n.suspendedLanes,y=n.pingedLanes,S=o&268435455;if(S!==0){var T=S&~g;T!==0?h=pu(T):(y&=S,y!==0&&(h=pu(y)))}else S=o&~g,S!==0?h=pu(S):y!==0&&(h=pu(y));if(h===0)return 0;if(s!==0&&s!==h&&!(s&g)&&(g=h&-h,y=s&-s,g>=y||g===16&&(y&4194240)!==0))return s;if(h&4&&(h|=o&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=h;0<s;)o=31-ui(s),g=1<<o,h|=n[o],s&=~g;return h}function aE(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lE(n,s){for(var o=n.suspendedLanes,h=n.pingedLanes,g=n.expirationTimes,y=n.pendingLanes;0<y;){var S=31-ui(y),T=1<<S,R=g[S];R===-1?(!(T&o)||T&h)&&(g[S]=aE(T,s)):R<=s&&(n.expiredLanes|=T),y&=~T}}function Ap(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function dv(){var n=$h;return $h<<=1,!($h&4194240)&&($h=64),n}function _p(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function gu(n,s,o){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-ui(s),n[s]=o}function uE(n,s){var o=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<o;){var g=31-ui(o),y=1<<g;s[g]=0,h[g]=-1,n[g]=-1,o&=~y}}function Sp(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var h=31-ui(o),g=1<<h;g&s|n[h]&s&&(n[h]|=s),o&=~g}}var We=0;function fv(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var pv,Ep,gv,mv,yv,bp=!1,Xh=[],Js=null,Zs=null,er=null,mu=new Map,yu=new Map,tr=[],cE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vv(n,s){switch(n){case"focusin":case"focusout":Js=null;break;case"dragenter":case"dragleave":Zs=null;break;case"mouseover":case"mouseout":er=null;break;case"pointerover":case"pointerout":mu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":yu.delete(s.pointerId)}}function vu(n,s,o,h,g,y){return n===null||n.nativeEvent!==y?(n={blockedOn:s,domEventName:o,eventSystemFlags:h,nativeEvent:y,targetContainers:[g]},s!==null&&(s=Mu(s),s!==null&&Ep(s)),n):(n.eventSystemFlags|=h,s=n.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),n)}function hE(n,s,o,h,g){switch(s){case"focusin":return Js=vu(Js,n,s,o,h,g),!0;case"dragenter":return Zs=vu(Zs,n,s,o,h,g),!0;case"mouseover":return er=vu(er,n,s,o,h,g),!0;case"pointerover":var y=g.pointerId;return mu.set(y,vu(mu.get(y)||null,n,s,o,h,g)),!0;case"gotpointercapture":return y=g.pointerId,yu.set(y,vu(yu.get(y)||null,n,s,o,h,g)),!0}return!1}function wv(n){var s=to(n.target);if(s!==null){var o=eo(s);if(o!==null){if(s=o.tag,s===13){if(s=sv(o),s!==null){n.blockedOn=s,yv(n.priority,function(){gv(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function qh(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=Cp(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(o===null){o=n.nativeEvent;var h=new o.constructor(o.type,o);fp=h,o.target.dispatchEvent(h),fp=null}else return s=Mu(o),s!==null&&Ep(s),n.blockedOn=o,!1;s.shift()}return!0}function Av(n,s,o){qh(n)&&o.delete(s)}function dE(){bp=!1,Js!==null&&qh(Js)&&(Js=null),Zs!==null&&qh(Zs)&&(Zs=null),er!==null&&qh(er)&&(er=null),mu.forEach(Av),yu.forEach(Av)}function wu(n,s){n.blockedOn===s&&(n.blockedOn=null,bp||(bp=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,dE)))}function Au(n){function s(g){return wu(g,n)}if(0<Xh.length){wu(Xh[0],n);for(var o=1;o<Xh.length;o++){var h=Xh[o];h.blockedOn===n&&(h.blockedOn=null)}}for(Js!==null&&wu(Js,n),Zs!==null&&wu(Zs,n),er!==null&&wu(er,n),mu.forEach(s),yu.forEach(s),o=0;o<tr.length;o++)h=tr[o],h.blockedOn===n&&(h.blockedOn=null);for(;0<tr.length&&(o=tr[0],o.blockedOn===null);)wv(o),o.blockedOn===null&&tr.shift()}var Ta=F.ReactCurrentBatchConfig,Yh=!0;function fE(n,s,o,h){var g=We,y=Ta.transition;Ta.transition=null;try{We=1,xp(n,s,o,h)}finally{We=g,Ta.transition=y}}function pE(n,s,o,h){var g=We,y=Ta.transition;Ta.transition=null;try{We=4,xp(n,s,o,h)}finally{We=g,Ta.transition=y}}function xp(n,s,o,h){if(Yh){var g=Cp(n,s,o,h);if(g===null)Vp(n,s,h,Kh,o),vv(n,h);else if(hE(g,n,s,o,h))h.stopPropagation();else if(vv(n,h),s&4&&-1<cE.indexOf(n)){for(;g!==null;){var y=Mu(g);if(y!==null&&pv(y),y=Cp(n,s,o,h),y===null&&Vp(n,s,h,Kh,o),y===g)break;g=y}g!==null&&h.stopPropagation()}else Vp(n,s,h,null,o)}}var Kh=null;function Cp(n,s,o,h){if(Kh=null,n=pp(h),n=to(n),n!==null)if(s=eo(n),s===null)n=null;else if(o=s.tag,o===13){if(n=sv(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Kh=n,null}function _v(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tE()){case wp:return 1;case cv:return 4;case Uh:case nE:return 16;case hv:return 536870912;default:return 16}default:return 16}}var nr=null,kp=null,Qh=null;function Sv(){if(Qh)return Qh;var n,s=kp,o=s.length,h,g="value"in nr?nr.value:nr.textContent,y=g.length;for(n=0;n<o&&s[n]===g[n];n++);var S=o-n;for(h=1;h<=S&&s[o-h]===g[y-h];h++);return Qh=g.slice(n,1<h?1-h:void 0)}function Jh(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Zh(){return!0}function Ev(){return!1}function Rn(n){function s(o,h,g,y,S){this._reactName=o,this._targetInst=g,this.type=h,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(o=n[T],this[T]=o?o(y):y[T]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Zh:Ev,this.isPropagationStopped=Ev,this}return Q(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Zh)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Zh)},persist:function(){},isPersistent:Zh}),s}var Pa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tp=Rn(Pa),_u=Q({},Pa,{view:0,detail:0}),gE=Rn(_u),Pp,Rp,Su,ed=Q({},_u,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mp,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Su&&(Su&&n.type==="mousemove"?(Pp=n.screenX-Su.screenX,Rp=n.screenY-Su.screenY):Rp=Pp=0,Su=n),Pp)},movementY:function(n){return"movementY"in n?n.movementY:Rp}}),bv=Rn(ed),mE=Q({},ed,{dataTransfer:0}),yE=Rn(mE),vE=Q({},_u,{relatedTarget:0}),Lp=Rn(vE),wE=Q({},Pa,{animationName:0,elapsedTime:0,pseudoElement:0}),AE=Rn(wE),_E=Q({},Pa,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),SE=Rn(_E),EE=Q({},Pa,{data:0}),xv=Rn(EE),bE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kE(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=CE[n])?!!s[n]:!1}function Mp(){return kE}var TE=Q({},_u,{key:function(n){if(n.key){var s=bE[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Jh(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?xE[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mp,charCode:function(n){return n.type==="keypress"?Jh(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Jh(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),PE=Rn(TE),RE=Q({},ed,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cv=Rn(RE),LE=Q({},_u,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mp}),ME=Rn(LE),IE=Q({},Pa,{propertyName:0,elapsedTime:0,pseudoElement:0}),FE=Rn(IE),DE=Q({},ed,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),NE=Rn(DE),OE=[9,13,27,32],Ip=c&&"CompositionEvent"in window,Eu=null;c&&"documentMode"in document&&(Eu=document.documentMode);var zE=c&&"TextEvent"in window&&!Eu,kv=c&&(!Ip||Eu&&8<Eu&&11>=Eu),Tv=" ",Pv=!1;function Rv(n,s){switch(n){case"keyup":return OE.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lv(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ra=!1;function HE(n,s){switch(n){case"compositionend":return Lv(s);case"keypress":return s.which!==32?null:(Pv=!0,Tv);case"textInput":return n=s.data,n===Tv&&Pv?null:n;default:return null}}function jE(n,s){if(Ra)return n==="compositionend"||!Ip&&Rv(n,s)?(n=Sv(),Qh=kp=nr=null,Ra=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return kv&&s.locale!=="ko"?null:s.data;default:return null}}var BE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mv(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!BE[n.type]:s==="textarea"}function Iv(n,s,o,h){Zy(h),s=rd(s,"onChange"),0<s.length&&(o=new Tp("onChange","change",null,o,h),n.push({event:o,listeners:s}))}var bu=null,xu=null;function UE(n){Qv(n,0)}function td(n){var s=Da(n);if(Ks(s))return n}function VE(n,s){if(n==="change")return s}var Fv=!1;if(c){var Fp;if(c){var Dp="oninput"in document;if(!Dp){var Dv=document.createElement("div");Dv.setAttribute("oninput","return;"),Dp=typeof Dv.oninput=="function"}Fp=Dp}else Fp=!1;Fv=Fp&&(!document.documentMode||9<document.documentMode)}function Nv(){bu&&(bu.detachEvent("onpropertychange",Ov),xu=bu=null)}function Ov(n){if(n.propertyName==="value"&&td(xu)){var s=[];Iv(s,xu,n,pp(n)),iv(UE,s)}}function $E(n,s,o){n==="focusin"?(Nv(),bu=s,xu=o,bu.attachEvent("onpropertychange",Ov)):n==="focusout"&&Nv()}function WE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return td(xu)}function GE(n,s){if(n==="click")return td(s)}function XE(n,s){if(n==="input"||n==="change")return td(s)}function qE(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var ci=typeof Object.is=="function"?Object.is:qE;function Cu(n,s){if(ci(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),h=Object.keys(s);if(o.length!==h.length)return!1;for(h=0;h<o.length;h++){var g=o[h];if(!d.call(s,g)||!ci(n[g],s[g]))return!1}return!0}function zv(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Hv(n,s){var o=zv(n);n=0;for(var h;o;){if(o.nodeType===3){if(h=n+o.textContent.length,n<=s&&h>=s)return{node:o,offset:s-n};n=h}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=zv(o)}}function jv(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?jv(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Bv(){for(var n=window,s=Ue();s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=Ue(n.document)}return s}function Np(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function YE(n){var s=Bv(),o=n.focusedElem,h=n.selectionRange;if(s!==o&&o&&o.ownerDocument&&jv(o.ownerDocument.documentElement,o)){if(h!==null&&Np(o)){if(s=h.start,n=h.end,n===void 0&&(n=s),"selectionStart"in o)o.selectionStart=s,o.selectionEnd=Math.min(n,o.value.length);else if(n=(s=o.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var g=o.textContent.length,y=Math.min(h.start,g);h=h.end===void 0?y:Math.min(h.end,g),!n.extend&&y>h&&(g=h,h=y,y=g),g=Hv(o,y);var S=Hv(o,h);g&&S&&(n.rangeCount!==1||n.anchorNode!==g.node||n.anchorOffset!==g.offset||n.focusNode!==S.node||n.focusOffset!==S.offset)&&(s=s.createRange(),s.setStart(g.node,g.offset),n.removeAllRanges(),y>h?(n.addRange(s),n.extend(S.node,S.offset)):(s.setEnd(S.node,S.offset),n.addRange(s)))}}for(s=[],n=o;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<s.length;o++)n=s[o],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var KE=c&&"documentMode"in document&&11>=document.documentMode,La=null,Op=null,ku=null,zp=!1;function Uv(n,s,o){var h=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;zp||La==null||La!==Ue(h)||(h=La,"selectionStart"in h&&Np(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),ku&&Cu(ku,h)||(ku=h,h=rd(Op,"onSelect"),0<h.length&&(s=new Tp("onSelect","select",null,s,o),n.push({event:s,listeners:h}),s.target=La)))}function nd(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var Ma={animationend:nd("Animation","AnimationEnd"),animationiteration:nd("Animation","AnimationIteration"),animationstart:nd("Animation","AnimationStart"),transitionend:nd("Transition","TransitionEnd")},Hp={},Vv={};c&&(Vv=document.createElement("div").style,"AnimationEvent"in window||(delete Ma.animationend.animation,delete Ma.animationiteration.animation,delete Ma.animationstart.animation),"TransitionEvent"in window||delete Ma.transitionend.transition);function id(n){if(Hp[n])return Hp[n];if(!Ma[n])return n;var s=Ma[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in Vv)return Hp[n]=s[o];return n}var $v=id("animationend"),Wv=id("animationiteration"),Gv=id("animationstart"),Xv=id("transitionend"),qv=new Map,Yv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ir(n,s){qv.set(n,s),a(s,[n])}for(var jp=0;jp<Yv.length;jp++){var Bp=Yv[jp],QE=Bp.toLowerCase(),JE=Bp[0].toUpperCase()+Bp.slice(1);ir(QE,"on"+JE)}ir($v,"onAnimationEnd"),ir(Wv,"onAnimationIteration"),ir(Gv,"onAnimationStart"),ir("dblclick","onDoubleClick"),ir("focusin","onFocus"),ir("focusout","onBlur"),ir(Xv,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tu));function Kv(n,s,o){var h=n.type||"unknown-event";n.currentTarget=o,QS(h,s,void 0,n),n.currentTarget=null}function Qv(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var h=n[o],g=h.event;h=h.listeners;e:{var y=void 0;if(s)for(var S=h.length-1;0<=S;S--){var T=h[S],R=T.instance,z=T.currentTarget;if(T=T.listener,R!==y&&g.isPropagationStopped())break e;Kv(g,T,z),y=R}else for(S=0;S<h.length;S++){if(T=h[S],R=T.instance,z=T.currentTarget,T=T.listener,R!==y&&g.isPropagationStopped())break e;Kv(g,T,z),y=R}}}if(Bh)throw n=vp,Bh=!1,vp=null,n}function et(n,s){var o=s[Yp];o===void 0&&(o=s[Yp]=new Set);var h=n+"__bubble";o.has(h)||(Jv(s,n,2,!1),o.add(h))}function Up(n,s,o){var h=0;s&&(h|=4),Jv(o,n,h,s)}var sd="_reactListening"+Math.random().toString(36).slice(2);function Pu(n){if(!n[sd]){n[sd]=!0,i.forEach(function(o){o!=="selectionchange"&&(ZE.has(o)||Up(o,!1,n),Up(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[sd]||(s[sd]=!0,Up("selectionchange",!1,s))}}function Jv(n,s,o,h){switch(_v(s)){case 1:var g=fE;break;case 4:g=pE;break;default:g=xp}o=g.bind(null,s,o,n),g=void 0,!yp||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),h?g!==void 0?n.addEventListener(s,o,{capture:!0,passive:g}):n.addEventListener(s,o,!0):g!==void 0?n.addEventListener(s,o,{passive:g}):n.addEventListener(s,o,!1)}function Vp(n,s,o,h,g){var y=h;if(!(s&1)&&!(s&2)&&h!==null)e:for(;;){if(h===null)return;var S=h.tag;if(S===3||S===4){var T=h.stateNode.containerInfo;if(T===g||T.nodeType===8&&T.parentNode===g)break;if(S===4)for(S=h.return;S!==null;){var R=S.tag;if((R===3||R===4)&&(R=S.stateNode.containerInfo,R===g||R.nodeType===8&&R.parentNode===g))return;S=S.return}for(;T!==null;){if(S=to(T),S===null)return;if(R=S.tag,R===5||R===6){h=y=S;continue e}T=T.parentNode}}h=h.return}iv(function(){var z=y,G=pp(o),X=[];e:{var W=qv.get(n);if(W!==void 0){var ne=Tp,le=n;switch(n){case"keypress":if(Jh(o)===0)break e;case"keydown":case"keyup":ne=PE;break;case"focusin":le="focus",ne=Lp;break;case"focusout":le="blur",ne=Lp;break;case"beforeblur":case"afterblur":ne=Lp;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=bv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=yE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=ME;break;case $v:case Wv:case Gv:ne=AE;break;case Xv:ne=FE;break;case"scroll":ne=gE;break;case"wheel":ne=NE;break;case"copy":case"cut":case"paste":ne=SE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=Cv}var ue=(s&4)!==0,yt=!ue&&n==="scroll",N=ue?W!==null?W+"Capture":null:W;ue=[];for(var L=z,O;L!==null;){O=L;var q=O.stateNode;if(O.tag===5&&q!==null&&(O=q,N!==null&&(q=hu(L,N),q!=null&&ue.push(Ru(L,q,O)))),yt)break;L=L.return}0<ue.length&&(W=new ne(W,le,null,o,G),X.push({event:W,listeners:ue}))}}if(!(s&7)){e:{if(W=n==="mouseover"||n==="pointerover",ne=n==="mouseout"||n==="pointerout",W&&o!==fp&&(le=o.relatedTarget||o.fromElement)&&(to(le)||le[as]))break e;if((ne||W)&&(W=G.window===G?G:(W=G.ownerDocument)?W.defaultView||W.parentWindow:window,ne?(le=o.relatedTarget||o.toElement,ne=z,le=le?to(le):null,le!==null&&(yt=eo(le),le!==yt||le.tag!==5&&le.tag!==6)&&(le=null)):(ne=null,le=z),ne!==le)){if(ue=bv,q="onMouseLeave",N="onMouseEnter",L="mouse",(n==="pointerout"||n==="pointerover")&&(ue=Cv,q="onPointerLeave",N="onPointerEnter",L="pointer"),yt=ne==null?W:Da(ne),O=le==null?W:Da(le),W=new ue(q,L+"leave",ne,o,G),W.target=yt,W.relatedTarget=O,q=null,to(G)===z&&(ue=new ue(N,L+"enter",le,o,G),ue.target=O,ue.relatedTarget=yt,q=ue),yt=q,ne&&le)t:{for(ue=ne,N=le,L=0,O=ue;O;O=Ia(O))L++;for(O=0,q=N;q;q=Ia(q))O++;for(;0<L-O;)ue=Ia(ue),L--;for(;0<O-L;)N=Ia(N),O--;for(;L--;){if(ue===N||N!==null&&ue===N.alternate)break t;ue=Ia(ue),N=Ia(N)}ue=null}else ue=null;ne!==null&&Zv(X,W,ne,ue,!1),le!==null&&yt!==null&&Zv(X,yt,le,ue,!0)}}e:{if(W=z?Da(z):window,ne=W.nodeName&&W.nodeName.toLowerCase(),ne==="select"||ne==="input"&&W.type==="file")var he=VE;else if(Mv(W))if(Fv)he=XE;else{he=WE;var Ae=$E}else(ne=W.nodeName)&&ne.toLowerCase()==="input"&&(W.type==="checkbox"||W.type==="radio")&&(he=GE);if(he&&(he=he(n,z))){Iv(X,he,o,G);break e}Ae&&Ae(n,W,z),n==="focusout"&&(Ae=W._wrapperState)&&Ae.controlled&&W.type==="number"&&lu(W,"number",W.value)}switch(Ae=z?Da(z):window,n){case"focusin":(Mv(Ae)||Ae.contentEditable==="true")&&(La=Ae,Op=z,ku=null);break;case"focusout":ku=Op=La=null;break;case"mousedown":zp=!0;break;case"contextmenu":case"mouseup":case"dragend":zp=!1,Uv(X,o,G);break;case"selectionchange":if(KE)break;case"keydown":case"keyup":Uv(X,o,G)}var _e;if(Ip)e:{switch(n){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else Ra?Rv(n,o)&&(Ee="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Ee="onCompositionStart");Ee&&(kv&&o.locale!=="ko"&&(Ra||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&Ra&&(_e=Sv()):(nr=G,kp="value"in nr?nr.value:nr.textContent,Ra=!0)),Ae=rd(z,Ee),0<Ae.length&&(Ee=new xv(Ee,n,null,o,G),X.push({event:Ee,listeners:Ae}),_e?Ee.data=_e:(_e=Lv(o),_e!==null&&(Ee.data=_e)))),(_e=zE?HE(n,o):jE(n,o))&&(z=rd(z,"onBeforeInput"),0<z.length&&(G=new xv("onBeforeInput","beforeinput",null,o,G),X.push({event:G,listeners:z}),G.data=_e))}Qv(X,s)})}function Ru(n,s,o){return{instance:n,listener:s,currentTarget:o}}function rd(n,s){for(var o=s+"Capture",h=[];n!==null;){var g=n,y=g.stateNode;g.tag===5&&y!==null&&(g=y,y=hu(n,o),y!=null&&h.unshift(Ru(n,y,g)),y=hu(n,s),y!=null&&h.push(Ru(n,y,g))),n=n.return}return h}function Ia(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Zv(n,s,o,h,g){for(var y=s._reactName,S=[];o!==null&&o!==h;){var T=o,R=T.alternate,z=T.stateNode;if(R!==null&&R===h)break;T.tag===5&&z!==null&&(T=z,g?(R=hu(o,y),R!=null&&S.unshift(Ru(o,R,T))):g||(R=hu(o,y),R!=null&&S.push(Ru(o,R,T)))),o=o.return}S.length!==0&&n.push({event:s,listeners:S})}var eb=/\r\n?/g,tb=/\u0000|\uFFFD/g;function e0(n){return(typeof n=="string"?n:""+n).replace(eb,`
`).replace(tb,"")}function od(n,s,o){if(s=e0(s),e0(n)!==s&&o)throw Error(t(425))}function ad(){}var $p=null,Wp=null;function Gp(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Xp=typeof setTimeout=="function"?setTimeout:void 0,nb=typeof clearTimeout=="function"?clearTimeout:void 0,t0=typeof Promise=="function"?Promise:void 0,ib=typeof queueMicrotask=="function"?queueMicrotask:typeof t0<"u"?function(n){return t0.resolve(null).then(n).catch(sb)}:Xp;function sb(n){setTimeout(function(){throw n})}function qp(n,s){var o=s,h=0;do{var g=o.nextSibling;if(n.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(h===0){n.removeChild(g),Au(s);return}h--}else o!=="$"&&o!=="$?"&&o!=="$!"||h++;o=g}while(o);Au(s)}function sr(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function n0(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return n;s--}else o==="/$"&&s++}n=n.previousSibling}return null}var Fa=Math.random().toString(36).slice(2),Ni="__reactFiber$"+Fa,Lu="__reactProps$"+Fa,as="__reactContainer$"+Fa,Yp="__reactEvents$"+Fa,rb="__reactListeners$"+Fa,ob="__reactHandles$"+Fa;function to(n){var s=n[Ni];if(s)return s;for(var o=n.parentNode;o;){if(s=o[as]||o[Ni]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=n0(n);n!==null;){if(o=n[Ni])return o;n=n0(n)}return s}n=o,o=n.parentNode}return null}function Mu(n){return n=n[Ni]||n[as],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Da(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function ld(n){return n[Lu]||null}var Kp=[],Na=-1;function rr(n){return{current:n}}function tt(n){0>Na||(n.current=Kp[Na],Kp[Na]=null,Na--)}function Je(n,s){Na++,Kp[Na]=n.current,n.current=s}var or={},Yt=rr(or),yn=rr(!1),no=or;function Oa(n,s){var o=n.type.contextTypes;if(!o)return or;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var g={},y;for(y in o)g[y]=s[y];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=g),g}function vn(n){return n=n.childContextTypes,n!=null}function ud(){tt(yn),tt(Yt)}function i0(n,s,o){if(Yt.current!==or)throw Error(t(168));Je(Yt,s),Je(yn,o)}function s0(n,s,o){var h=n.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return o;h=h.getChildContext();for(var g in h)if(!(g in s))throw Error(t(108,ge(n)||"Unknown",g));return Q({},o,h)}function cd(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||or,no=Yt.current,Je(Yt,n),Je(yn,yn.current),!0}function r0(n,s,o){var h=n.stateNode;if(!h)throw Error(t(169));o?(n=s0(n,s,no),h.__reactInternalMemoizedMergedChildContext=n,tt(yn),tt(Yt),Je(Yt,n)):tt(yn),Je(yn,o)}var ls=null,hd=!1,Qp=!1;function o0(n){ls===null?ls=[n]:ls.push(n)}function ab(n){hd=!0,o0(n)}function ar(){if(!Qp&&ls!==null){Qp=!0;var n=0,s=We;try{var o=ls;for(We=1;n<o.length;n++){var h=o[n];do h=h(!0);while(h!==null)}ls=null,hd=!1}catch(g){throw ls!==null&&(ls=ls.slice(n+1)),lv(wp,ar),g}finally{We=s,Qp=!1}}return null}var za=[],Ha=0,dd=null,fd=0,Gn=[],Xn=0,io=null,us=1,cs="";function so(n,s){za[Ha++]=fd,za[Ha++]=dd,dd=n,fd=s}function a0(n,s,o){Gn[Xn++]=us,Gn[Xn++]=cs,Gn[Xn++]=io,io=n;var h=us;n=cs;var g=32-ui(h)-1;h&=~(1<<g),o+=1;var y=32-ui(s)+g;if(30<y){var S=g-g%5;y=(h&(1<<S)-1).toString(32),h>>=S,g-=S,us=1<<32-ui(s)+g|o<<g|h,cs=y+n}else us=1<<y|o<<g|h,cs=n}function Jp(n){n.return!==null&&(so(n,1),a0(n,1,0))}function Zp(n){for(;n===dd;)dd=za[--Ha],za[Ha]=null,fd=za[--Ha],za[Ha]=null;for(;n===io;)io=Gn[--Xn],Gn[Xn]=null,cs=Gn[--Xn],Gn[Xn]=null,us=Gn[--Xn],Gn[Xn]=null}var Ln=null,Mn=null,st=!1,hi=null;function l0(n,s){var o=Qn(5,null,null,0);o.elementType="DELETED",o.stateNode=s,o.return=n,s=n.deletions,s===null?(n.deletions=[o],n.flags|=16):s.push(o)}function u0(n,s){switch(n.tag){case 5:var o=n.type;return s=s.nodeType!==1||o.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,Ln=n,Mn=sr(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,Ln=n,Mn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(o=io!==null?{id:us,overflow:cs}:null,n.memoizedState={dehydrated:s,treeContext:o,retryLane:1073741824},o=Qn(18,null,null,0),o.stateNode=s,o.return=n,n.child=o,Ln=n,Mn=null,!0):!1;default:return!1}}function eg(n){return(n.mode&1)!==0&&(n.flags&128)===0}function tg(n){if(st){var s=Mn;if(s){var o=s;if(!u0(n,s)){if(eg(n))throw Error(t(418));s=sr(o.nextSibling);var h=Ln;s&&u0(n,s)?l0(h,o):(n.flags=n.flags&-4097|2,st=!1,Ln=n)}}else{if(eg(n))throw Error(t(418));n.flags=n.flags&-4097|2,st=!1,Ln=n}}}function c0(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ln=n}function pd(n){if(n!==Ln)return!1;if(!st)return c0(n),st=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!Gp(n.type,n.memoizedProps)),s&&(s=Mn)){if(eg(n))throw h0(),Error(t(418));for(;s;)l0(n,s),s=sr(s.nextSibling)}if(c0(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"){if(s===0){Mn=sr(n.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++}n=n.nextSibling}Mn=null}}else Mn=Ln?sr(n.stateNode.nextSibling):null;return!0}function h0(){for(var n=Mn;n;)n=sr(n.nextSibling)}function ja(){Mn=Ln=null,st=!1}function ng(n){hi===null?hi=[n]:hi.push(n)}var lb=F.ReactCurrentBatchConfig;function Iu(n,s,o){if(n=o.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(t(309));var h=o.stateNode}if(!h)throw Error(t(147,n));var g=h,y=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===y?s.ref:(s=function(S){var T=g.refs;S===null?delete T[y]:T[y]=S},s._stringRef=y,s)}if(typeof n!="string")throw Error(t(284));if(!o._owner)throw Error(t(290,n))}return n}function gd(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function d0(n){var s=n._init;return s(n._payload)}function f0(n){function s(N,L){if(n){var O=N.deletions;O===null?(N.deletions=[L],N.flags|=16):O.push(L)}}function o(N,L){if(!n)return null;for(;L!==null;)s(N,L),L=L.sibling;return null}function h(N,L){for(N=new Map;L!==null;)L.key!==null?N.set(L.key,L):N.set(L.index,L),L=L.sibling;return N}function g(N,L){return N=gr(N,L),N.index=0,N.sibling=null,N}function y(N,L,O){return N.index=O,n?(O=N.alternate,O!==null?(O=O.index,O<L?(N.flags|=2,L):O):(N.flags|=2,L)):(N.flags|=1048576,L)}function S(N){return n&&N.alternate===null&&(N.flags|=2),N}function T(N,L,O,q){return L===null||L.tag!==6?(L=Xg(O,N.mode,q),L.return=N,L):(L=g(L,O),L.return=N,L)}function R(N,L,O,q){var he=O.type;return he===V?G(N,L,O.props.children,q,O.key):L!==null&&(L.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===pe&&d0(he)===L.type)?(q=g(L,O.props),q.ref=Iu(N,L,O),q.return=N,q):(q=Hd(O.type,O.key,O.props,null,N.mode,q),q.ref=Iu(N,L,O),q.return=N,q)}function z(N,L,O,q){return L===null||L.tag!==4||L.stateNode.containerInfo!==O.containerInfo||L.stateNode.implementation!==O.implementation?(L=qg(O,N.mode,q),L.return=N,L):(L=g(L,O.children||[]),L.return=N,L)}function G(N,L,O,q,he){return L===null||L.tag!==7?(L=fo(O,N.mode,q,he),L.return=N,L):(L=g(L,O),L.return=N,L)}function X(N,L,O){if(typeof L=="string"&&L!==""||typeof L=="number")return L=Xg(""+L,N.mode,O),L.return=N,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case j:return O=Hd(L.type,L.key,L.props,null,N.mode,O),O.ref=Iu(N,null,L),O.return=N,O;case H:return L=qg(L,N.mode,O),L.return=N,L;case pe:var q=L._init;return X(N,q(L._payload),O)}if(Jr(L)||se(L))return L=fo(L,N.mode,O,null),L.return=N,L;gd(N,L)}return null}function W(N,L,O,q){var he=L!==null?L.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return he!==null?null:T(N,L,""+O,q);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case j:return O.key===he?R(N,L,O,q):null;case H:return O.key===he?z(N,L,O,q):null;case pe:return he=O._init,W(N,L,he(O._payload),q)}if(Jr(O)||se(O))return he!==null?null:G(N,L,O,q,null);gd(N,O)}return null}function ne(N,L,O,q,he){if(typeof q=="string"&&q!==""||typeof q=="number")return N=N.get(O)||null,T(L,N,""+q,he);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case j:return N=N.get(q.key===null?O:q.key)||null,R(L,N,q,he);case H:return N=N.get(q.key===null?O:q.key)||null,z(L,N,q,he);case pe:var Ae=q._init;return ne(N,L,O,Ae(q._payload),he)}if(Jr(q)||se(q))return N=N.get(O)||null,G(L,N,q,he,null);gd(L,q)}return null}function le(N,L,O,q){for(var he=null,Ae=null,_e=L,Ee=L=0,Dt=null;_e!==null&&Ee<O.length;Ee++){_e.index>Ee?(Dt=_e,_e=null):Dt=_e.sibling;var Be=W(N,_e,O[Ee],q);if(Be===null){_e===null&&(_e=Dt);break}n&&_e&&Be.alternate===null&&s(N,_e),L=y(Be,L,Ee),Ae===null?he=Be:Ae.sibling=Be,Ae=Be,_e=Dt}if(Ee===O.length)return o(N,_e),st&&so(N,Ee),he;if(_e===null){for(;Ee<O.length;Ee++)_e=X(N,O[Ee],q),_e!==null&&(L=y(_e,L,Ee),Ae===null?he=_e:Ae.sibling=_e,Ae=_e);return st&&so(N,Ee),he}for(_e=h(N,_e);Ee<O.length;Ee++)Dt=ne(_e,N,Ee,O[Ee],q),Dt!==null&&(n&&Dt.alternate!==null&&_e.delete(Dt.key===null?Ee:Dt.key),L=y(Dt,L,Ee),Ae===null?he=Dt:Ae.sibling=Dt,Ae=Dt);return n&&_e.forEach(function(mr){return s(N,mr)}),st&&so(N,Ee),he}function ue(N,L,O,q){var he=se(O);if(typeof he!="function")throw Error(t(150));if(O=he.call(O),O==null)throw Error(t(151));for(var Ae=he=null,_e=L,Ee=L=0,Dt=null,Be=O.next();_e!==null&&!Be.done;Ee++,Be=O.next()){_e.index>Ee?(Dt=_e,_e=null):Dt=_e.sibling;var mr=W(N,_e,Be.value,q);if(mr===null){_e===null&&(_e=Dt);break}n&&_e&&mr.alternate===null&&s(N,_e),L=y(mr,L,Ee),Ae===null?he=mr:Ae.sibling=mr,Ae=mr,_e=Dt}if(Be.done)return o(N,_e),st&&so(N,Ee),he;if(_e===null){for(;!Be.done;Ee++,Be=O.next())Be=X(N,Be.value,q),Be!==null&&(L=y(Be,L,Ee),Ae===null?he=Be:Ae.sibling=Be,Ae=Be);return st&&so(N,Ee),he}for(_e=h(N,_e);!Be.done;Ee++,Be=O.next())Be=ne(_e,N,Ee,Be.value,q),Be!==null&&(n&&Be.alternate!==null&&_e.delete(Be.key===null?Ee:Be.key),L=y(Be,L,Ee),Ae===null?he=Be:Ae.sibling=Be,Ae=Be);return n&&_e.forEach(function(Bb){return s(N,Bb)}),st&&so(N,Ee),he}function yt(N,L,O,q){if(typeof O=="object"&&O!==null&&O.type===V&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case j:e:{for(var he=O.key,Ae=L;Ae!==null;){if(Ae.key===he){if(he=O.type,he===V){if(Ae.tag===7){o(N,Ae.sibling),L=g(Ae,O.props.children),L.return=N,N=L;break e}}else if(Ae.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===pe&&d0(he)===Ae.type){o(N,Ae.sibling),L=g(Ae,O.props),L.ref=Iu(N,Ae,O),L.return=N,N=L;break e}o(N,Ae);break}else s(N,Ae);Ae=Ae.sibling}O.type===V?(L=fo(O.props.children,N.mode,q,O.key),L.return=N,N=L):(q=Hd(O.type,O.key,O.props,null,N.mode,q),q.ref=Iu(N,L,O),q.return=N,N=q)}return S(N);case H:e:{for(Ae=O.key;L!==null;){if(L.key===Ae)if(L.tag===4&&L.stateNode.containerInfo===O.containerInfo&&L.stateNode.implementation===O.implementation){o(N,L.sibling),L=g(L,O.children||[]),L.return=N,N=L;break e}else{o(N,L);break}else s(N,L);L=L.sibling}L=qg(O,N.mode,q),L.return=N,N=L}return S(N);case pe:return Ae=O._init,yt(N,L,Ae(O._payload),q)}if(Jr(O))return le(N,L,O,q);if(se(O))return ue(N,L,O,q);gd(N,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,L!==null&&L.tag===6?(o(N,L.sibling),L=g(L,O),L.return=N,N=L):(o(N,L),L=Xg(O,N.mode,q),L.return=N,N=L),S(N)):o(N,L)}return yt}var Ba=f0(!0),p0=f0(!1),md=rr(null),yd=null,Ua=null,ig=null;function sg(){ig=Ua=yd=null}function rg(n){var s=md.current;tt(md),n._currentValue=s}function og(n,s,o){for(;n!==null;){var h=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),n===o)break;n=n.return}}function Va(n,s){yd=n,ig=Ua=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&s&&(wn=!0),n.firstContext=null)}function qn(n){var s=n._currentValue;if(ig!==n)if(n={context:n,memoizedValue:s,next:null},Ua===null){if(yd===null)throw Error(t(308));Ua=n,yd.dependencies={lanes:0,firstContext:n}}else Ua=Ua.next=n;return s}var ro=null;function ag(n){ro===null?ro=[n]:ro.push(n)}function g0(n,s,o,h){var g=s.interleaved;return g===null?(o.next=o,ag(s)):(o.next=g.next,g.next=o),s.interleaved=o,hs(n,h)}function hs(n,s){n.lanes|=s;var o=n.alternate;for(o!==null&&(o.lanes|=s),o=n,n=n.return;n!==null;)n.childLanes|=s,o=n.alternate,o!==null&&(o.childLanes|=s),o=n,n=n.return;return o.tag===3?o.stateNode:null}var lr=!1;function lg(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function m0(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ds(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function ur(n,s,o){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,He&2){var g=h.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),h.pending=s,hs(n,o)}return g=h.interleaved,g===null?(s.next=s,ag(h)):(s.next=g.next,g.next=s),h.interleaved=s,hs(n,o)}function vd(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194240)!==0)){var h=s.lanes;h&=n.pendingLanes,o|=h,s.lanes=o,Sp(n,o)}}function y0(n,s){var o=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,o===h)){var g=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var S={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};y===null?g=y=S:y=y.next=S,o=o.next}while(o!==null);y===null?g=y=s:y=y.next=s}else g=y=s;o={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:h.shared,effects:h.effects},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}function wd(n,s,o,h){var g=n.updateQueue;lr=!1;var y=g.firstBaseUpdate,S=g.lastBaseUpdate,T=g.shared.pending;if(T!==null){g.shared.pending=null;var R=T,z=R.next;R.next=null,S===null?y=z:S.next=z,S=R;var G=n.alternate;G!==null&&(G=G.updateQueue,T=G.lastBaseUpdate,T!==S&&(T===null?G.firstBaseUpdate=z:T.next=z,G.lastBaseUpdate=R))}if(y!==null){var X=g.baseState;S=0,G=z=R=null,T=y;do{var W=T.lane,ne=T.eventTime;if((h&W)===W){G!==null&&(G=G.next={eventTime:ne,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var le=n,ue=T;switch(W=s,ne=o,ue.tag){case 1:if(le=ue.payload,typeof le=="function"){X=le.call(ne,X,W);break e}X=le;break e;case 3:le.flags=le.flags&-65537|128;case 0:if(le=ue.payload,W=typeof le=="function"?le.call(ne,X,W):le,W==null)break e;X=Q({},X,W);break e;case 2:lr=!0}}T.callback!==null&&T.lane!==0&&(n.flags|=64,W=g.effects,W===null?g.effects=[T]:W.push(T))}else ne={eventTime:ne,lane:W,tag:T.tag,payload:T.payload,callback:T.callback,next:null},G===null?(z=G=ne,R=X):G=G.next=ne,S|=W;if(T=T.next,T===null){if(T=g.shared.pending,T===null)break;W=T,T=W.next,W.next=null,g.lastBaseUpdate=W,g.shared.pending=null}}while(!0);if(G===null&&(R=X),g.baseState=R,g.firstBaseUpdate=z,g.lastBaseUpdate=G,s=g.shared.interleaved,s!==null){g=s;do S|=g.lane,g=g.next;while(g!==s)}else y===null&&(g.shared.lanes=0);lo|=S,n.lanes=S,n.memoizedState=X}}function v0(n,s,o){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var h=n[s],g=h.callback;if(g!==null){if(h.callback=null,h=o,typeof g!="function")throw Error(t(191,g));g.call(h)}}}var Fu={},Oi=rr(Fu),Du=rr(Fu),Nu=rr(Fu);function oo(n){if(n===Fu)throw Error(t(174));return n}function ug(n,s){switch(Je(Nu,s),Je(Du,n),Je(Oi,Fu),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Fi(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Fi(s,n)}tt(Oi),Je(Oi,s)}function $a(){tt(Oi),tt(Du),tt(Nu)}function w0(n){oo(Nu.current);var s=oo(Oi.current),o=Fi(s,n.type);s!==o&&(Je(Du,n),Je(Oi,o))}function cg(n){Du.current===n&&(tt(Oi),tt(Du))}var ot=rr(0);function Ad(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var hg=[];function dg(){for(var n=0;n<hg.length;n++)hg[n]._workInProgressVersionPrimary=null;hg.length=0}var _d=F.ReactCurrentDispatcher,fg=F.ReactCurrentBatchConfig,ao=0,at=null,xt=null,It=null,Sd=!1,Ou=!1,zu=0,ub=0;function Kt(){throw Error(t(321))}function pg(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!ci(n[o],s[o]))return!1;return!0}function gg(n,s,o,h,g,y){if(ao=y,at=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,_d.current=n===null||n.memoizedState===null?fb:pb,n=o(h,g),Ou){y=0;do{if(Ou=!1,zu=0,25<=y)throw Error(t(301));y+=1,It=xt=null,s.updateQueue=null,_d.current=gb,n=o(h,g)}while(Ou)}if(_d.current=xd,s=xt!==null&&xt.next!==null,ao=0,It=xt=at=null,Sd=!1,s)throw Error(t(300));return n}function mg(){var n=zu!==0;return zu=0,n}function zi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?at.memoizedState=It=n:It=It.next=n,It}function Yn(){if(xt===null){var n=at.alternate;n=n!==null?n.memoizedState:null}else n=xt.next;var s=It===null?at.memoizedState:It.next;if(s!==null)It=s,xt=n;else{if(n===null)throw Error(t(310));xt=n,n={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},It===null?at.memoizedState=It=n:It=It.next=n}return It}function Hu(n,s){return typeof s=="function"?s(n):s}function yg(n){var s=Yn(),o=s.queue;if(o===null)throw Error(t(311));o.lastRenderedReducer=n;var h=xt,g=h.baseQueue,y=o.pending;if(y!==null){if(g!==null){var S=g.next;g.next=y.next,y.next=S}h.baseQueue=g=y,o.pending=null}if(g!==null){y=g.next,h=h.baseState;var T=S=null,R=null,z=y;do{var G=z.lane;if((ao&G)===G)R!==null&&(R=R.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),h=z.hasEagerState?z.eagerState:n(h,z.action);else{var X={lane:G,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};R===null?(T=R=X,S=h):R=R.next=X,at.lanes|=G,lo|=G}z=z.next}while(z!==null&&z!==y);R===null?S=h:R.next=T,ci(h,s.memoizedState)||(wn=!0),s.memoizedState=h,s.baseState=S,s.baseQueue=R,o.lastRenderedState=h}if(n=o.interleaved,n!==null){g=n;do y=g.lane,at.lanes|=y,lo|=y,g=g.next;while(g!==n)}else g===null&&(o.lanes=0);return[s.memoizedState,o.dispatch]}function vg(n){var s=Yn(),o=s.queue;if(o===null)throw Error(t(311));o.lastRenderedReducer=n;var h=o.dispatch,g=o.pending,y=s.memoizedState;if(g!==null){o.pending=null;var S=g=g.next;do y=n(y,S.action),S=S.next;while(S!==g);ci(y,s.memoizedState)||(wn=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),o.lastRenderedState=y}return[y,h]}function A0(){}function _0(n,s){var o=at,h=Yn(),g=s(),y=!ci(h.memoizedState,g);if(y&&(h.memoizedState=g,wn=!0),h=h.queue,wg(b0.bind(null,o,h,n),[n]),h.getSnapshot!==s||y||It!==null&&It.memoizedState.tag&1){if(o.flags|=2048,ju(9,E0.bind(null,o,h,g,s),void 0,null),Ft===null)throw Error(t(349));ao&30||S0(o,s,g)}return g}function S0(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=at.updateQueue,s===null?(s={lastEffect:null,stores:null},at.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function E0(n,s,o,h){s.value=o,s.getSnapshot=h,x0(s)&&C0(n)}function b0(n,s,o){return o(function(){x0(s)&&C0(n)})}function x0(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!ci(n,o)}catch{return!0}}function C0(n){var s=hs(n,1);s!==null&&gi(s,n,1,-1)}function k0(n){var s=zi();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hu,lastRenderedState:n},s.queue=n,n=n.dispatch=db.bind(null,at,n),[s.memoizedState,n]}function ju(n,s,o,h){return n={tag:n,create:s,destroy:o,deps:h,next:null},s=at.updateQueue,s===null?(s={lastEffect:null,stores:null},at.updateQueue=s,s.lastEffect=n.next=n):(o=s.lastEffect,o===null?s.lastEffect=n.next=n:(h=o.next,o.next=n,n.next=h,s.lastEffect=n)),n}function T0(){return Yn().memoizedState}function Ed(n,s,o,h){var g=zi();at.flags|=n,g.memoizedState=ju(1|s,o,void 0,h===void 0?null:h)}function bd(n,s,o,h){var g=Yn();h=h===void 0?null:h;var y=void 0;if(xt!==null){var S=xt.memoizedState;if(y=S.destroy,h!==null&&pg(h,S.deps)){g.memoizedState=ju(s,o,y,h);return}}at.flags|=n,g.memoizedState=ju(1|s,o,y,h)}function P0(n,s){return Ed(8390656,8,n,s)}function wg(n,s){return bd(2048,8,n,s)}function R0(n,s){return bd(4,2,n,s)}function L0(n,s){return bd(4,4,n,s)}function M0(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function I0(n,s,o){return o=o!=null?o.concat([n]):null,bd(4,4,M0.bind(null,s,n),o)}function Ag(){}function F0(n,s){var o=Yn();s=s===void 0?null:s;var h=o.memoizedState;return h!==null&&s!==null&&pg(s,h[1])?h[0]:(o.memoizedState=[n,s],n)}function D0(n,s){var o=Yn();s=s===void 0?null:s;var h=o.memoizedState;return h!==null&&s!==null&&pg(s,h[1])?h[0]:(n=n(),o.memoizedState=[n,s],n)}function N0(n,s,o){return ao&21?(ci(o,s)||(o=dv(),at.lanes|=o,lo|=o,n.baseState=!0),s):(n.baseState&&(n.baseState=!1,wn=!0),n.memoizedState=o)}function cb(n,s){var o=We;We=o!==0&&4>o?o:4,n(!0);var h=fg.transition;fg.transition={};try{n(!1),s()}finally{We=o,fg.transition=h}}function O0(){return Yn().memoizedState}function hb(n,s,o){var h=fr(n);if(o={lane:h,action:o,hasEagerState:!1,eagerState:null,next:null},z0(n))H0(s,o);else if(o=g0(n,s,o,h),o!==null){var g=un();gi(o,n,h,g),j0(o,s,h)}}function db(n,s,o){var h=fr(n),g={lane:h,action:o,hasEagerState:!1,eagerState:null,next:null};if(z0(n))H0(s,g);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var S=s.lastRenderedState,T=y(S,o);if(g.hasEagerState=!0,g.eagerState=T,ci(T,S)){var R=s.interleaved;R===null?(g.next=g,ag(s)):(g.next=R.next,R.next=g),s.interleaved=g;return}}catch{}finally{}o=g0(n,s,g,h),o!==null&&(g=un(),gi(o,n,h,g),j0(o,s,h))}}function z0(n){var s=n.alternate;return n===at||s!==null&&s===at}function H0(n,s){Ou=Sd=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function j0(n,s,o){if(o&4194240){var h=s.lanes;h&=n.pendingLanes,o|=h,s.lanes=o,Sp(n,o)}}var xd={readContext:qn,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},fb={readContext:qn,useCallback:function(n,s){return zi().memoizedState=[n,s===void 0?null:s],n},useContext:qn,useEffect:P0,useImperativeHandle:function(n,s,o){return o=o!=null?o.concat([n]):null,Ed(4194308,4,M0.bind(null,s,n),o)},useLayoutEffect:function(n,s){return Ed(4194308,4,n,s)},useInsertionEffect:function(n,s){return Ed(4,2,n,s)},useMemo:function(n,s){var o=zi();return s=s===void 0?null:s,n=n(),o.memoizedState=[n,s],n},useReducer:function(n,s,o){var h=zi();return s=o!==void 0?o(s):s,h.memoizedState=h.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},h.queue=n,n=n.dispatch=hb.bind(null,at,n),[h.memoizedState,n]},useRef:function(n){var s=zi();return n={current:n},s.memoizedState=n},useState:k0,useDebugValue:Ag,useDeferredValue:function(n){return zi().memoizedState=n},useTransition:function(){var n=k0(!1),s=n[0];return n=cb.bind(null,n[1]),zi().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,o){var h=at,g=zi();if(st){if(o===void 0)throw Error(t(407));o=o()}else{if(o=s(),Ft===null)throw Error(t(349));ao&30||S0(h,s,o)}g.memoizedState=o;var y={value:o,getSnapshot:s};return g.queue=y,P0(b0.bind(null,h,y,n),[n]),h.flags|=2048,ju(9,E0.bind(null,h,y,o,s),void 0,null),o},useId:function(){var n=zi(),s=Ft.identifierPrefix;if(st){var o=cs,h=us;o=(h&~(1<<32-ui(h)-1)).toString(32)+o,s=":"+s+"R"+o,o=zu++,0<o&&(s+="H"+o.toString(32)),s+=":"}else o=ub++,s=":"+s+"r"+o.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},pb={readContext:qn,useCallback:F0,useContext:qn,useEffect:wg,useImperativeHandle:I0,useInsertionEffect:R0,useLayoutEffect:L0,useMemo:D0,useReducer:yg,useRef:T0,useState:function(){return yg(Hu)},useDebugValue:Ag,useDeferredValue:function(n){var s=Yn();return N0(s,xt.memoizedState,n)},useTransition:function(){var n=yg(Hu)[0],s=Yn().memoizedState;return[n,s]},useMutableSource:A0,useSyncExternalStore:_0,useId:O0,unstable_isNewReconciler:!1},gb={readContext:qn,useCallback:F0,useContext:qn,useEffect:wg,useImperativeHandle:I0,useInsertionEffect:R0,useLayoutEffect:L0,useMemo:D0,useReducer:vg,useRef:T0,useState:function(){return vg(Hu)},useDebugValue:Ag,useDeferredValue:function(n){var s=Yn();return xt===null?s.memoizedState=n:N0(s,xt.memoizedState,n)},useTransition:function(){var n=vg(Hu)[0],s=Yn().memoizedState;return[n,s]},useMutableSource:A0,useSyncExternalStore:_0,useId:O0,unstable_isNewReconciler:!1};function di(n,s){if(n&&n.defaultProps){s=Q({},s),n=n.defaultProps;for(var o in n)s[o]===void 0&&(s[o]=n[o]);return s}return s}function _g(n,s,o,h){s=n.memoizedState,o=o(h,s),o=o==null?s:Q({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Cd={isMounted:function(n){return(n=n._reactInternals)?eo(n)===n:!1},enqueueSetState:function(n,s,o){n=n._reactInternals;var h=un(),g=fr(n),y=ds(h,g);y.payload=s,o!=null&&(y.callback=o),s=ur(n,y,g),s!==null&&(gi(s,n,g,h),vd(s,n,g))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var h=un(),g=fr(n),y=ds(h,g);y.tag=1,y.payload=s,o!=null&&(y.callback=o),s=ur(n,y,g),s!==null&&(gi(s,n,g,h),vd(s,n,g))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=un(),h=fr(n),g=ds(o,h);g.tag=2,s!=null&&(g.callback=s),s=ur(n,g,h),s!==null&&(gi(s,n,h,o),vd(s,n,h))}};function B0(n,s,o,h,g,y,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,y,S):s.prototype&&s.prototype.isPureReactComponent?!Cu(o,h)||!Cu(g,y):!0}function U0(n,s,o){var h=!1,g=or,y=s.contextType;return typeof y=="object"&&y!==null?y=qn(y):(g=vn(s)?no:Yt.current,h=s.contextTypes,y=(h=h!=null)?Oa(n,g):or),s=new s(o,y),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Cd,n.stateNode=s,s._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=g,n.__reactInternalMemoizedMaskedChildContext=y),s}function V0(n,s,o,h){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,h),s.state!==n&&Cd.enqueueReplaceState(s,s.state,null)}function Sg(n,s,o,h){var g=n.stateNode;g.props=o,g.state=n.memoizedState,g.refs={},lg(n);var y=s.contextType;typeof y=="object"&&y!==null?g.context=qn(y):(y=vn(s)?no:Yt.current,g.context=Oa(n,y)),g.state=n.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(_g(n,s,y,o),g.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(s=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),s!==g.state&&Cd.enqueueReplaceState(g,g.state,null),wd(n,o,g,h),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308)}function Wa(n,s){try{var o="",h=s;do o+=Ce(h),h=h.return;while(h);var g=o}catch(y){g=`
Error generating stack: `+y.message+`
`+y.stack}return{value:n,source:s,stack:g,digest:null}}function Eg(n,s,o){return{value:n,source:null,stack:o??null,digest:s??null}}function bg(n,s){try{console.error(s.value)}catch(o){setTimeout(function(){throw o})}}var mb=typeof WeakMap=="function"?WeakMap:Map;function $0(n,s,o){o=ds(-1,o),o.tag=3,o.payload={element:null};var h=s.value;return o.callback=function(){Id||(Id=!0,Hg=h),bg(n,s)},o}function W0(n,s,o){o=ds(-1,o),o.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var g=s.value;o.payload=function(){return h(g)},o.callback=function(){bg(n,s)}}var y=n.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(o.callback=function(){bg(n,s),typeof h!="function"&&(hr===null?hr=new Set([this]):hr.add(this));var S=s.stack;this.componentDidCatch(s.value,{componentStack:S!==null?S:""})}),o}function G0(n,s,o){var h=n.pingCache;if(h===null){h=n.pingCache=new mb;var g=new Set;h.set(s,g)}else g=h.get(s),g===void 0&&(g=new Set,h.set(s,g));g.has(o)||(g.add(o),n=Rb.bind(null,n,s,o),s.then(n,n))}function X0(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function q0(n,s,o,h,g){return n.mode&1?(n.flags|=65536,n.lanes=g,n):(n===s?n.flags|=65536:(n.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(s=ds(-1,1),s.tag=2,ur(o,s,1))),o.lanes|=1),n)}var yb=F.ReactCurrentOwner,wn=!1;function ln(n,s,o,h){s.child=n===null?p0(s,null,o,h):Ba(s,n.child,o,h)}function Y0(n,s,o,h,g){o=o.render;var y=s.ref;return Va(s,g),h=gg(n,s,o,h,y,g),o=mg(),n!==null&&!wn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~g,fs(n,s,g)):(st&&o&&Jp(s),s.flags|=1,ln(n,s,h,g),s.child)}function K0(n,s,o,h,g){if(n===null){var y=o.type;return typeof y=="function"&&!Gg(y)&&y.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(s.tag=15,s.type=y,Q0(n,s,y,h,g)):(n=Hd(o.type,null,h,s,s.mode,g),n.ref=s.ref,n.return=s,s.child=n)}if(y=n.child,!(n.lanes&g)){var S=y.memoizedProps;if(o=o.compare,o=o!==null?o:Cu,o(S,h)&&n.ref===s.ref)return fs(n,s,g)}return s.flags|=1,n=gr(y,h),n.ref=s.ref,n.return=s,s.child=n}function Q0(n,s,o,h,g){if(n!==null){var y=n.memoizedProps;if(Cu(y,h)&&n.ref===s.ref)if(wn=!1,s.pendingProps=h=y,(n.lanes&g)!==0)n.flags&131072&&(wn=!0);else return s.lanes=n.lanes,fs(n,s,g)}return xg(n,s,o,h,g)}function J0(n,s,o){var h=s.pendingProps,g=h.children,y=n!==null?n.memoizedState:null;if(h.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(Xa,In),In|=o;else{if(!(o&1073741824))return n=y!==null?y.baseLanes|o:o,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Je(Xa,In),In|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:o,Je(Xa,In),In|=h}else y!==null?(h=y.baseLanes|o,s.memoizedState=null):h=o,Je(Xa,In),In|=h;return ln(n,s,g,o),s.child}function Z0(n,s){var o=s.ref;(n===null&&o!==null||n!==null&&n.ref!==o)&&(s.flags|=512,s.flags|=2097152)}function xg(n,s,o,h,g){var y=vn(o)?no:Yt.current;return y=Oa(s,y),Va(s,g),o=gg(n,s,o,h,y,g),h=mg(),n!==null&&!wn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~g,fs(n,s,g)):(st&&h&&Jp(s),s.flags|=1,ln(n,s,o,g),s.child)}function ew(n,s,o,h,g){if(vn(o)){var y=!0;cd(s)}else y=!1;if(Va(s,g),s.stateNode===null)Td(n,s),U0(s,o,h),Sg(s,o,h,g),h=!0;else if(n===null){var S=s.stateNode,T=s.memoizedProps;S.props=T;var R=S.context,z=o.contextType;typeof z=="object"&&z!==null?z=qn(z):(z=vn(o)?no:Yt.current,z=Oa(s,z));var G=o.getDerivedStateFromProps,X=typeof G=="function"||typeof S.getSnapshotBeforeUpdate=="function";X||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(T!==h||R!==z)&&V0(s,S,h,z),lr=!1;var W=s.memoizedState;S.state=W,wd(s,h,S,g),R=s.memoizedState,T!==h||W!==R||yn.current||lr?(typeof G=="function"&&(_g(s,o,G,h),R=s.memoizedState),(T=lr||B0(s,o,T,h,W,R,z))?(X||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(s.flags|=4194308)):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=R),S.props=h,S.state=R,S.context=z,h=T):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{S=s.stateNode,m0(n,s),T=s.memoizedProps,z=s.type===s.elementType?T:di(s.type,T),S.props=z,X=s.pendingProps,W=S.context,R=o.contextType,typeof R=="object"&&R!==null?R=qn(R):(R=vn(o)?no:Yt.current,R=Oa(s,R));var ne=o.getDerivedStateFromProps;(G=typeof ne=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(T!==X||W!==R)&&V0(s,S,h,R),lr=!1,W=s.memoizedState,S.state=W,wd(s,h,S,g);var le=s.memoizedState;T!==X||W!==le||yn.current||lr?(typeof ne=="function"&&(_g(s,o,ne,h),le=s.memoizedState),(z=lr||B0(s,o,z,h,W,le,R)||!1)?(G||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(h,le,R),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(h,le,R)),typeof S.componentDidUpdate=="function"&&(s.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof S.componentDidUpdate!="function"||T===n.memoizedProps&&W===n.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&W===n.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=le),S.props=h,S.state=le,S.context=R,h=z):(typeof S.componentDidUpdate!="function"||T===n.memoizedProps&&W===n.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&W===n.memoizedState||(s.flags|=1024),h=!1)}return Cg(n,s,o,h,y,g)}function Cg(n,s,o,h,g,y){Z0(n,s);var S=(s.flags&128)!==0;if(!h&&!S)return g&&r0(s,o,!1),fs(n,s,y);h=s.stateNode,yb.current=s;var T=S&&typeof o.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,n!==null&&S?(s.child=Ba(s,n.child,null,y),s.child=Ba(s,null,T,y)):ln(n,s,T,y),s.memoizedState=h.state,g&&r0(s,o,!0),s.child}function tw(n){var s=n.stateNode;s.pendingContext?i0(n,s.pendingContext,s.pendingContext!==s.context):s.context&&i0(n,s.context,!1),ug(n,s.containerInfo)}function nw(n,s,o,h,g){return ja(),ng(g),s.flags|=256,ln(n,s,o,h),s.child}var kg={dehydrated:null,treeContext:null,retryLane:0};function Tg(n){return{baseLanes:n,cachePool:null,transitions:null}}function iw(n,s,o){var h=s.pendingProps,g=ot.current,y=!1,S=(s.flags&128)!==0,T;if((T=S)||(T=n!==null&&n.memoizedState===null?!1:(g&2)!==0),T?(y=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(g|=1),Je(ot,g&1),n===null)return tg(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(s.mode&1?n.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(S=h.children,n=h.fallback,y?(h=s.mode,y=s.child,S={mode:"hidden",children:S},!(h&1)&&y!==null?(y.childLanes=0,y.pendingProps=S):y=jd(S,h,0,null),n=fo(n,h,o,null),y.return=s,n.return=s,y.sibling=n,s.child=y,s.child.memoizedState=Tg(o),s.memoizedState=kg,n):Pg(s,S));if(g=n.memoizedState,g!==null&&(T=g.dehydrated,T!==null))return vb(n,s,S,h,T,g,o);if(y){y=h.fallback,S=s.mode,g=n.child,T=g.sibling;var R={mode:"hidden",children:h.children};return!(S&1)&&s.child!==g?(h=s.child,h.childLanes=0,h.pendingProps=R,s.deletions=null):(h=gr(g,R),h.subtreeFlags=g.subtreeFlags&14680064),T!==null?y=gr(T,y):(y=fo(y,S,o,null),y.flags|=2),y.return=s,h.return=s,h.sibling=y,s.child=h,h=y,y=s.child,S=n.child.memoizedState,S=S===null?Tg(o):{baseLanes:S.baseLanes|o,cachePool:null,transitions:S.transitions},y.memoizedState=S,y.childLanes=n.childLanes&~o,s.memoizedState=kg,h}return y=n.child,n=y.sibling,h=gr(y,{mode:"visible",children:h.children}),!(s.mode&1)&&(h.lanes=o),h.return=s,h.sibling=null,n!==null&&(o=s.deletions,o===null?(s.deletions=[n],s.flags|=16):o.push(n)),s.child=h,s.memoizedState=null,h}function Pg(n,s){return s=jd({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function kd(n,s,o,h){return h!==null&&ng(h),Ba(s,n.child,null,o),n=Pg(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function vb(n,s,o,h,g,y,S){if(o)return s.flags&256?(s.flags&=-257,h=Eg(Error(t(422))),kd(n,s,S,h)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(y=h.fallback,g=s.mode,h=jd({mode:"visible",children:h.children},g,0,null),y=fo(y,g,S,null),y.flags|=2,h.return=s,y.return=s,h.sibling=y,s.child=h,s.mode&1&&Ba(s,n.child,null,S),s.child.memoizedState=Tg(S),s.memoizedState=kg,y);if(!(s.mode&1))return kd(n,s,S,null);if(g.data==="$!"){if(h=g.nextSibling&&g.nextSibling.dataset,h)var T=h.dgst;return h=T,y=Error(t(419)),h=Eg(y,h,void 0),kd(n,s,S,h)}if(T=(S&n.childLanes)!==0,wn||T){if(h=Ft,h!==null){switch(S&-S){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=g&(h.suspendedLanes|S)?0:g,g!==0&&g!==y.retryLane&&(y.retryLane=g,hs(n,g),gi(h,n,g,-1))}return Wg(),h=Eg(Error(t(421))),kd(n,s,S,h)}return g.data==="$?"?(s.flags|=128,s.child=n.child,s=Lb.bind(null,n),g._reactRetry=s,null):(n=y.treeContext,Mn=sr(g.nextSibling),Ln=s,st=!0,hi=null,n!==null&&(Gn[Xn++]=us,Gn[Xn++]=cs,Gn[Xn++]=io,us=n.id,cs=n.overflow,io=s),s=Pg(s,h.children),s.flags|=4096,s)}function sw(n,s,o){n.lanes|=s;var h=n.alternate;h!==null&&(h.lanes|=s),og(n.return,s,o)}function Rg(n,s,o,h,g){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:o,tailMode:g}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=o,y.tailMode=g)}function rw(n,s,o){var h=s.pendingProps,g=h.revealOrder,y=h.tail;if(ln(n,s,h.children,o),h=ot.current,h&2)h=h&1|2,s.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&sw(n,o,s);else if(n.tag===19)sw(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(Je(ot,h),!(s.mode&1))s.memoizedState=null;else switch(g){case"forwards":for(o=s.child,g=null;o!==null;)n=o.alternate,n!==null&&Ad(n)===null&&(g=o),o=o.sibling;o=g,o===null?(g=s.child,s.child=null):(g=o.sibling,o.sibling=null),Rg(s,!1,g,o,y);break;case"backwards":for(o=null,g=s.child,s.child=null;g!==null;){if(n=g.alternate,n!==null&&Ad(n)===null){s.child=g;break}n=g.sibling,g.sibling=o,o=g,g=n}Rg(s,!0,o,null,y);break;case"together":Rg(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Td(n,s){!(s.mode&1)&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function fs(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),lo|=s.lanes,!(o&s.childLanes))return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,o=gr(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=gr(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function wb(n,s,o){switch(s.tag){case 3:tw(s),ja();break;case 5:w0(s);break;case 1:vn(s.type)&&cd(s);break;case 4:ug(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,g=s.memoizedProps.value;Je(md,h._currentValue),h._currentValue=g;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Je(ot,ot.current&1),s.flags|=128,null):o&s.child.childLanes?iw(n,s,o):(Je(ot,ot.current&1),n=fs(n,s,o),n!==null?n.sibling:null);Je(ot,ot.current&1);break;case 19:if(h=(o&s.childLanes)!==0,n.flags&128){if(h)return rw(n,s,o);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Je(ot,ot.current),h)break;return null;case 22:case 23:return s.lanes=0,J0(n,s,o)}return fs(n,s,o)}var ow,Lg,aw,lw;ow=function(n,s){for(var o=s.child;o!==null;){if(o.tag===5||o.tag===6)n.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},Lg=function(){},aw=function(n,s,o,h){var g=n.memoizedProps;if(g!==h){n=s.stateNode,oo(Oi.current);var y=null;switch(o){case"input":g=it(n,g),h=it(n,h),y=[];break;case"select":g=Q({},g,{value:void 0}),h=Q({},h,{value:void 0}),y=[];break;case"textarea":g=uu(n,g),h=uu(n,h),y=[];break;default:typeof g.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=ad)}hp(o,h);var S;o=null;for(z in g)if(!h.hasOwnProperty(z)&&g.hasOwnProperty(z)&&g[z]!=null)if(z==="style"){var T=g[z];for(S in T)T.hasOwnProperty(S)&&(o||(o={}),o[S]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(r.hasOwnProperty(z)?y||(y=[]):(y=y||[]).push(z,null));for(z in h){var R=h[z];if(T=g!=null?g[z]:void 0,h.hasOwnProperty(z)&&R!==T&&(R!=null||T!=null))if(z==="style")if(T){for(S in T)!T.hasOwnProperty(S)||R&&R.hasOwnProperty(S)||(o||(o={}),o[S]="");for(S in R)R.hasOwnProperty(S)&&T[S]!==R[S]&&(o||(o={}),o[S]=R[S])}else o||(y||(y=[]),y.push(z,o)),o=R;else z==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,T=T?T.__html:void 0,R!=null&&T!==R&&(y=y||[]).push(z,R)):z==="children"?typeof R!="string"&&typeof R!="number"||(y=y||[]).push(z,""+R):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(r.hasOwnProperty(z)?(R!=null&&z==="onScroll"&&et("scroll",n),y||T===R||(y=[])):(y=y||[]).push(z,R))}o&&(y=y||[]).push("style",o);var z=y;(s.updateQueue=z)&&(s.flags|=4)}},lw=function(n,s,o,h){o!==h&&(s.flags|=4)};function Bu(n,s){if(!st)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function Qt(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,h=0;if(s)for(var g=n.child;g!==null;)o|=g.lanes|g.childLanes,h|=g.subtreeFlags&14680064,h|=g.flags&14680064,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)o|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=h,n.childLanes=o,s}function Ab(n,s,o){var h=s.pendingProps;switch(Zp(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(s),null;case 1:return vn(s.type)&&ud(),Qt(s),null;case 3:return h=s.stateNode,$a(),tt(yn),tt(Yt),dg(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(pd(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,hi!==null&&(Ug(hi),hi=null))),Lg(n,s),Qt(s),null;case 5:cg(s);var g=oo(Nu.current);if(o=s.type,n!==null&&s.stateNode!=null)aw(n,s,o,h,g),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return Qt(s),null}if(n=oo(Oi.current),pd(s)){h=s.stateNode,o=s.type;var y=s.memoizedProps;switch(h[Ni]=s,h[Lu]=y,n=(s.mode&1)!==0,o){case"dialog":et("cancel",h),et("close",h);break;case"iframe":case"object":case"embed":et("load",h);break;case"video":case"audio":for(g=0;g<Tu.length;g++)et(Tu[g],h);break;case"source":et("error",h);break;case"img":case"image":case"link":et("error",h),et("load",h);break;case"details":et("toggle",h);break;case"input":bt(h,y),et("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},et("invalid",h);break;case"textarea":Nh(h,y),et("invalid",h)}hp(o,y),g=null;for(var S in y)if(y.hasOwnProperty(S)){var T=y[S];S==="children"?typeof T=="string"?h.textContent!==T&&(y.suppressHydrationWarning!==!0&&od(h.textContent,T,n),g=["children",T]):typeof T=="number"&&h.textContent!==""+T&&(y.suppressHydrationWarning!==!0&&od(h.textContent,T,n),g=["children",""+T]):r.hasOwnProperty(S)&&T!=null&&S==="onScroll"&&et("scroll",h)}switch(o){case"input":Mi(h),Qs(h,y,!0);break;case"textarea":Mi(h),zh(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=ad)}h=g,s.updateQueue=h,h!==null&&(s.flags|=4)}else{S=g.nodeType===9?g:g.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Hh(o)),n==="http://www.w3.org/1999/xhtml"?o==="script"?(n=S.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=S.createElement(o,{is:h.is}):(n=S.createElement(o),o==="select"&&(S=n,h.multiple?S.multiple=!0:h.size&&(S.size=h.size))):n=S.createElementNS(n,o),n[Ni]=s,n[Lu]=h,ow(n,s,!1,!1),s.stateNode=n;e:{switch(S=dp(o,h),o){case"dialog":et("cancel",n),et("close",n),g=h;break;case"iframe":case"object":case"embed":et("load",n),g=h;break;case"video":case"audio":for(g=0;g<Tu.length;g++)et(Tu[g],n);g=h;break;case"source":et("error",n),g=h;break;case"img":case"image":case"link":et("error",n),et("load",n),g=h;break;case"details":et("toggle",n),g=h;break;case"input":bt(n,h),g=it(n,h),et("invalid",n);break;case"option":g=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},g=Q({},h,{value:void 0}),et("invalid",n);break;case"textarea":Nh(n,h),g=uu(n,h),et("invalid",n);break;default:g=h}hp(o,g),T=g;for(y in T)if(T.hasOwnProperty(y)){var R=T[y];y==="style"?Qy(n,R):y==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&Zr(n,R)):y==="children"?typeof R=="string"?(o!=="textarea"||R!=="")&&os(n,R):typeof R=="number"&&os(n,""+R):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(r.hasOwnProperty(y)?R!=null&&y==="onScroll"&&et("scroll",n):R!=null&&D(n,y,R,S))}switch(o){case"input":Mi(n),Qs(n,h,!1);break;case"textarea":Mi(n),zh(n);break;case"option":h.value!=null&&n.setAttribute("value",""+Re(h.value));break;case"select":n.multiple=!!h.multiple,y=h.value,y!=null?li(n,!!h.multiple,y,!1):h.defaultValue!=null&&li(n,!!h.multiple,h.defaultValue,!0);break;default:typeof g.onClick=="function"&&(n.onclick=ad)}switch(o){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Qt(s),null;case 6:if(n&&s.stateNode!=null)lw(n,s,n.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(o=oo(Nu.current),oo(Oi.current),pd(s)){if(h=s.stateNode,o=s.memoizedProps,h[Ni]=s,(y=h.nodeValue!==o)&&(n=Ln,n!==null))switch(n.tag){case 3:od(h.nodeValue,o,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&od(h.nodeValue,o,(n.mode&1)!==0)}y&&(s.flags|=4)}else h=(o.nodeType===9?o:o.ownerDocument).createTextNode(h),h[Ni]=s,s.stateNode=h}return Qt(s),null;case 13:if(tt(ot),h=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(st&&Mn!==null&&s.mode&1&&!(s.flags&128))h0(),ja(),s.flags|=98560,y=!1;else if(y=pd(s),h!==null&&h.dehydrated!==null){if(n===null){if(!y)throw Error(t(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[Ni]=s}else ja(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Qt(s),y=!1}else hi!==null&&(Ug(hi),hi=null),y=!0;if(!y)return s.flags&65536?s:null}return s.flags&128?(s.lanes=o,s):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(s.child.flags|=8192,s.mode&1&&(n===null||ot.current&1?Ct===0&&(Ct=3):Wg())),s.updateQueue!==null&&(s.flags|=4),Qt(s),null);case 4:return $a(),Lg(n,s),n===null&&Pu(s.stateNode.containerInfo),Qt(s),null;case 10:return rg(s.type._context),Qt(s),null;case 17:return vn(s.type)&&ud(),Qt(s),null;case 19:if(tt(ot),y=s.memoizedState,y===null)return Qt(s),null;if(h=(s.flags&128)!==0,S=y.rendering,S===null)if(h)Bu(y,!1);else{if(Ct!==0||n!==null&&n.flags&128)for(n=s.child;n!==null;){if(S=Ad(n),S!==null){for(s.flags|=128,Bu(y,!1),h=S.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=o,o=s.child;o!==null;)y=o,n=h,y.flags&=14680066,S=y.alternate,S===null?(y.childLanes=0,y.lanes=n,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=S.childLanes,y.lanes=S.lanes,y.child=S.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=S.memoizedProps,y.memoizedState=S.memoizedState,y.updateQueue=S.updateQueue,y.type=S.type,n=S.dependencies,y.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),o=o.sibling;return Je(ot,ot.current&1|2),s.child}n=n.sibling}y.tail!==null&&mt()>qa&&(s.flags|=128,h=!0,Bu(y,!1),s.lanes=4194304)}else{if(!h)if(n=Ad(S),n!==null){if(s.flags|=128,h=!0,o=n.updateQueue,o!==null&&(s.updateQueue=o,s.flags|=4),Bu(y,!0),y.tail===null&&y.tailMode==="hidden"&&!S.alternate&&!st)return Qt(s),null}else 2*mt()-y.renderingStartTime>qa&&o!==1073741824&&(s.flags|=128,h=!0,Bu(y,!1),s.lanes=4194304);y.isBackwards?(S.sibling=s.child,s.child=S):(o=y.last,o!==null?o.sibling=S:s.child=S,y.last=S)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=mt(),s.sibling=null,o=ot.current,Je(ot,h?o&1|2:o&1),s):(Qt(s),null);case 22:case 23:return $g(),h=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(s.flags|=8192),h&&s.mode&1?In&1073741824&&(Qt(s),s.subtreeFlags&6&&(s.flags|=8192)):Qt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function _b(n,s){switch(Zp(s),s.tag){case 1:return vn(s.type)&&ud(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return $a(),tt(yn),tt(Yt),dg(),n=s.flags,n&65536&&!(n&128)?(s.flags=n&-65537|128,s):null;case 5:return cg(s),null;case 13:if(tt(ot),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));ja()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return tt(ot),null;case 4:return $a(),null;case 10:return rg(s.type._context),null;case 22:case 23:return $g(),null;case 24:return null;default:return null}}var Pd=!1,Jt=!1,Sb=typeof WeakSet=="function"?WeakSet:Set,re=null;function Ga(n,s){var o=n.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(h){dt(n,s,h)}else o.current=null}function Mg(n,s,o){try{o()}catch(h){dt(n,s,h)}}var uw=!1;function Eb(n,s){if($p=Yh,n=Bv(),Np(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var h=o.getSelection&&o.getSelection();if(h&&h.rangeCount!==0){o=h.anchorNode;var g=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var S=0,T=-1,R=-1,z=0,G=0,X=n,W=null;t:for(;;){for(var ne;X!==o||g!==0&&X.nodeType!==3||(T=S+g),X!==y||h!==0&&X.nodeType!==3||(R=S+h),X.nodeType===3&&(S+=X.nodeValue.length),(ne=X.firstChild)!==null;)W=X,X=ne;for(;;){if(X===n)break t;if(W===o&&++z===g&&(T=S),W===y&&++G===h&&(R=S),(ne=X.nextSibling)!==null)break;X=W,W=X.parentNode}X=ne}o=T===-1||R===-1?null:{start:T,end:R}}else o=null}o=o||{start:0,end:0}}else o=null;for(Wp={focusedElem:n,selectionRange:o},Yh=!1,re=s;re!==null;)if(s=re,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,re=n;else for(;re!==null;){s=re;try{var le=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(le!==null){var ue=le.memoizedProps,yt=le.memoizedState,N=s.stateNode,L=N.getSnapshotBeforeUpdate(s.elementType===s.type?ue:di(s.type,ue),yt);N.__reactInternalSnapshotBeforeUpdate=L}break;case 3:var O=s.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(q){dt(s,s.return,q)}if(n=s.sibling,n!==null){n.return=s.return,re=n;break}re=s.return}return le=uw,uw=!1,le}function Uu(n,s,o){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var g=h=h.next;do{if((g.tag&n)===n){var y=g.destroy;g.destroy=void 0,y!==void 0&&Mg(s,o,y)}g=g.next}while(g!==h)}}function Rd(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var o=s=s.next;do{if((o.tag&n)===n){var h=o.create;o.destroy=h()}o=o.next}while(o!==s)}}function Ig(n){var s=n.ref;if(s!==null){var o=n.stateNode;switch(n.tag){case 5:n=o;break;default:n=o}typeof s=="function"?s(n):s.current=n}}function cw(n){var s=n.alternate;s!==null&&(n.alternate=null,cw(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Ni],delete s[Lu],delete s[Yp],delete s[rb],delete s[ob])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function hw(n){return n.tag===5||n.tag===3||n.tag===4}function dw(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||hw(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Fg(n,s,o){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?o.nodeType===8?o.parentNode.insertBefore(n,s):o.insertBefore(n,s):(o.nodeType===8?(s=o.parentNode,s.insertBefore(n,o)):(s=o,s.appendChild(n)),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=ad));else if(h!==4&&(n=n.child,n!==null))for(Fg(n,s,o),n=n.sibling;n!==null;)Fg(n,s,o),n=n.sibling}function Dg(n,s,o){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(Dg(n,s,o),n=n.sibling;n!==null;)Dg(n,s,o),n=n.sibling}var Ut=null,fi=!1;function cr(n,s,o){for(o=o.child;o!==null;)fw(n,s,o),o=o.sibling}function fw(n,s,o){if(Di&&typeof Di.onCommitFiberUnmount=="function")try{Di.onCommitFiberUnmount(Vh,o)}catch{}switch(o.tag){case 5:Jt||Ga(o,s);case 6:var h=Ut,g=fi;Ut=null,cr(n,s,o),Ut=h,fi=g,Ut!==null&&(fi?(n=Ut,o=o.stateNode,n.nodeType===8?n.parentNode.removeChild(o):n.removeChild(o)):Ut.removeChild(o.stateNode));break;case 18:Ut!==null&&(fi?(n=Ut,o=o.stateNode,n.nodeType===8?qp(n.parentNode,o):n.nodeType===1&&qp(n,o),Au(n)):qp(Ut,o.stateNode));break;case 4:h=Ut,g=fi,Ut=o.stateNode.containerInfo,fi=!0,cr(n,s,o),Ut=h,fi=g;break;case 0:case 11:case 14:case 15:if(!Jt&&(h=o.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){g=h=h.next;do{var y=g,S=y.destroy;y=y.tag,S!==void 0&&(y&2||y&4)&&Mg(o,s,S),g=g.next}while(g!==h)}cr(n,s,o);break;case 1:if(!Jt&&(Ga(o,s),h=o.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=o.memoizedProps,h.state=o.memoizedState,h.componentWillUnmount()}catch(T){dt(o,s,T)}cr(n,s,o);break;case 21:cr(n,s,o);break;case 22:o.mode&1?(Jt=(h=Jt)||o.memoizedState!==null,cr(n,s,o),Jt=h):cr(n,s,o);break;default:cr(n,s,o)}}function pw(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var o=n.stateNode;o===null&&(o=n.stateNode=new Sb),s.forEach(function(h){var g=Mb.bind(null,n,h);o.has(h)||(o.add(h),h.then(g,g))})}}function pi(n,s){var o=s.deletions;if(o!==null)for(var h=0;h<o.length;h++){var g=o[h];try{var y=n,S=s,T=S;e:for(;T!==null;){switch(T.tag){case 5:Ut=T.stateNode,fi=!1;break e;case 3:Ut=T.stateNode.containerInfo,fi=!0;break e;case 4:Ut=T.stateNode.containerInfo,fi=!0;break e}T=T.return}if(Ut===null)throw Error(t(160));fw(y,S,g),Ut=null,fi=!1;var R=g.alternate;R!==null&&(R.return=null),g.return=null}catch(z){dt(g,s,z)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)gw(s,n),s=s.sibling}function gw(n,s){var o=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(pi(s,n),Hi(n),h&4){try{Uu(3,n,n.return),Rd(3,n)}catch(ue){dt(n,n.return,ue)}try{Uu(5,n,n.return)}catch(ue){dt(n,n.return,ue)}}break;case 1:pi(s,n),Hi(n),h&512&&o!==null&&Ga(o,o.return);break;case 5:if(pi(s,n),Hi(n),h&512&&o!==null&&Ga(o,o.return),n.flags&32){var g=n.stateNode;try{os(g,"")}catch(ue){dt(n,n.return,ue)}}if(h&4&&(g=n.stateNode,g!=null)){var y=n.memoizedProps,S=o!==null?o.memoizedProps:y,T=n.type,R=n.updateQueue;if(n.updateQueue=null,R!==null)try{T==="input"&&y.type==="radio"&&y.name!=null&&gt(g,y),dp(T,S);var z=dp(T,y);for(S=0;S<R.length;S+=2){var G=R[S],X=R[S+1];G==="style"?Qy(g,X):G==="dangerouslySetInnerHTML"?Zr(g,X):G==="children"?os(g,X):D(g,G,X,z)}switch(T){case"input":Ii(g,y);break;case"textarea":Oh(g,y);break;case"select":var W=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!y.multiple;var ne=y.value;ne!=null?li(g,!!y.multiple,ne,!1):W!==!!y.multiple&&(y.defaultValue!=null?li(g,!!y.multiple,y.defaultValue,!0):li(g,!!y.multiple,y.multiple?[]:"",!1))}g[Lu]=y}catch(ue){dt(n,n.return,ue)}}break;case 6:if(pi(s,n),Hi(n),h&4){if(n.stateNode===null)throw Error(t(162));g=n.stateNode,y=n.memoizedProps;try{g.nodeValue=y}catch(ue){dt(n,n.return,ue)}}break;case 3:if(pi(s,n),Hi(n),h&4&&o!==null&&o.memoizedState.isDehydrated)try{Au(s.containerInfo)}catch(ue){dt(n,n.return,ue)}break;case 4:pi(s,n),Hi(n);break;case 13:pi(s,n),Hi(n),g=n.child,g.flags&8192&&(y=g.memoizedState!==null,g.stateNode.isHidden=y,!y||g.alternate!==null&&g.alternate.memoizedState!==null||(zg=mt())),h&4&&pw(n);break;case 22:if(G=o!==null&&o.memoizedState!==null,n.mode&1?(Jt=(z=Jt)||G,pi(s,n),Jt=z):pi(s,n),Hi(n),h&8192){if(z=n.memoizedState!==null,(n.stateNode.isHidden=z)&&!G&&n.mode&1)for(re=n,G=n.child;G!==null;){for(X=re=G;re!==null;){switch(W=re,ne=W.child,W.tag){case 0:case 11:case 14:case 15:Uu(4,W,W.return);break;case 1:Ga(W,W.return);var le=W.stateNode;if(typeof le.componentWillUnmount=="function"){h=W,o=W.return;try{s=h,le.props=s.memoizedProps,le.state=s.memoizedState,le.componentWillUnmount()}catch(ue){dt(h,o,ue)}}break;case 5:Ga(W,W.return);break;case 22:if(W.memoizedState!==null){vw(X);continue}}ne!==null?(ne.return=W,re=ne):vw(X)}G=G.sibling}e:for(G=null,X=n;;){if(X.tag===5){if(G===null){G=X;try{g=X.stateNode,z?(y=g.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(T=X.stateNode,R=X.memoizedProps.style,S=R!=null&&R.hasOwnProperty("display")?R.display:null,T.style.display=Ky("display",S))}catch(ue){dt(n,n.return,ue)}}}else if(X.tag===6){if(G===null)try{X.stateNode.nodeValue=z?"":X.memoizedProps}catch(ue){dt(n,n.return,ue)}}else if((X.tag!==22&&X.tag!==23||X.memoizedState===null||X===n)&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===n)break e;for(;X.sibling===null;){if(X.return===null||X.return===n)break e;G===X&&(G=null),X=X.return}G===X&&(G=null),X.sibling.return=X.return,X=X.sibling}}break;case 19:pi(s,n),Hi(n),h&4&&pw(n);break;case 21:break;default:pi(s,n),Hi(n)}}function Hi(n){var s=n.flags;if(s&2){try{e:{for(var o=n.return;o!==null;){if(hw(o)){var h=o;break e}o=o.return}throw Error(t(160))}switch(h.tag){case 5:var g=h.stateNode;h.flags&32&&(os(g,""),h.flags&=-33);var y=dw(n);Dg(n,y,g);break;case 3:case 4:var S=h.stateNode.containerInfo,T=dw(n);Fg(n,T,S);break;default:throw Error(t(161))}}catch(R){dt(n,n.return,R)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function bb(n,s,o){re=n,mw(n)}function mw(n,s,o){for(var h=(n.mode&1)!==0;re!==null;){var g=re,y=g.child;if(g.tag===22&&h){var S=g.memoizedState!==null||Pd;if(!S){var T=g.alternate,R=T!==null&&T.memoizedState!==null||Jt;T=Pd;var z=Jt;if(Pd=S,(Jt=R)&&!z)for(re=g;re!==null;)S=re,R=S.child,S.tag===22&&S.memoizedState!==null?ww(g):R!==null?(R.return=S,re=R):ww(g);for(;y!==null;)re=y,mw(y),y=y.sibling;re=g,Pd=T,Jt=z}yw(n)}else g.subtreeFlags&8772&&y!==null?(y.return=g,re=y):yw(n)}}function yw(n){for(;re!==null;){var s=re;if(s.flags&8772){var o=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Jt||Rd(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!Jt)if(o===null)h.componentDidMount();else{var g=s.elementType===s.type?o.memoizedProps:di(s.type,o.memoizedProps);h.componentDidUpdate(g,o.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=s.updateQueue;y!==null&&v0(s,y,h);break;case 3:var S=s.updateQueue;if(S!==null){if(o=null,s.child!==null)switch(s.child.tag){case 5:o=s.child.stateNode;break;case 1:o=s.child.stateNode}v0(s,S,o)}break;case 5:var T=s.stateNode;if(o===null&&s.flags&4){o=T;var R=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&o.focus();break;case"img":R.src&&(o.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var z=s.alternate;if(z!==null){var G=z.memoizedState;if(G!==null){var X=G.dehydrated;X!==null&&Au(X)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Jt||s.flags&512&&Ig(s)}catch(W){dt(s,s.return,W)}}if(s===n){re=null;break}if(o=s.sibling,o!==null){o.return=s.return,re=o;break}re=s.return}}function vw(n){for(;re!==null;){var s=re;if(s===n){re=null;break}var o=s.sibling;if(o!==null){o.return=s.return,re=o;break}re=s.return}}function ww(n){for(;re!==null;){var s=re;try{switch(s.tag){case 0:case 11:case 15:var o=s.return;try{Rd(4,s)}catch(R){dt(s,o,R)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var g=s.return;try{h.componentDidMount()}catch(R){dt(s,g,R)}}var y=s.return;try{Ig(s)}catch(R){dt(s,y,R)}break;case 5:var S=s.return;try{Ig(s)}catch(R){dt(s,S,R)}}}catch(R){dt(s,s.return,R)}if(s===n){re=null;break}var T=s.sibling;if(T!==null){T.return=s.return,re=T;break}re=s.return}}var xb=Math.ceil,Ld=F.ReactCurrentDispatcher,Ng=F.ReactCurrentOwner,Kn=F.ReactCurrentBatchConfig,He=0,Ft=null,At=null,Vt=0,In=0,Xa=rr(0),Ct=0,Vu=null,lo=0,Md=0,Og=0,$u=null,An=null,zg=0,qa=1/0,ps=null,Id=!1,Hg=null,hr=null,Fd=!1,dr=null,Dd=0,Wu=0,jg=null,Nd=-1,Od=0;function un(){return He&6?mt():Nd!==-1?Nd:Nd=mt()}function fr(n){return n.mode&1?He&2&&Vt!==0?Vt&-Vt:lb.transition!==null?(Od===0&&(Od=dv()),Od):(n=We,n!==0||(n=window.event,n=n===void 0?16:_v(n.type)),n):1}function gi(n,s,o,h){if(50<Wu)throw Wu=0,jg=null,Error(t(185));gu(n,o,h),(!(He&2)||n!==Ft)&&(n===Ft&&(!(He&2)&&(Md|=o),Ct===4&&pr(n,Vt)),_n(n,h),o===1&&He===0&&!(s.mode&1)&&(qa=mt()+500,hd&&ar()))}function _n(n,s){var o=n.callbackNode;lE(n,s);var h=Gh(n,n===Ft?Vt:0);if(h===0)o!==null&&uv(o),n.callbackNode=null,n.callbackPriority=0;else if(s=h&-h,n.callbackPriority!==s){if(o!=null&&uv(o),s===1)n.tag===0?ab(_w.bind(null,n)):o0(_w.bind(null,n)),ib(function(){!(He&6)&&ar()}),o=null;else{switch(fv(h)){case 1:o=wp;break;case 4:o=cv;break;case 16:o=Uh;break;case 536870912:o=hv;break;default:o=Uh}o=Pw(o,Aw.bind(null,n))}n.callbackPriority=s,n.callbackNode=o}}function Aw(n,s){if(Nd=-1,Od=0,He&6)throw Error(t(327));var o=n.callbackNode;if(Ya()&&n.callbackNode!==o)return null;var h=Gh(n,n===Ft?Vt:0);if(h===0)return null;if(h&30||h&n.expiredLanes||s)s=zd(n,h);else{s=h;var g=He;He|=2;var y=Ew();(Ft!==n||Vt!==s)&&(ps=null,qa=mt()+500,co(n,s));do try{Tb();break}catch(T){Sw(n,T)}while(!0);sg(),Ld.current=y,He=g,At!==null?s=0:(Ft=null,Vt=0,s=Ct)}if(s!==0){if(s===2&&(g=Ap(n),g!==0&&(h=g,s=Bg(n,g))),s===1)throw o=Vu,co(n,0),pr(n,h),_n(n,mt()),o;if(s===6)pr(n,h);else{if(g=n.current.alternate,!(h&30)&&!Cb(g)&&(s=zd(n,h),s===2&&(y=Ap(n),y!==0&&(h=y,s=Bg(n,y))),s===1))throw o=Vu,co(n,0),pr(n,h),_n(n,mt()),o;switch(n.finishedWork=g,n.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:ho(n,An,ps);break;case 3:if(pr(n,h),(h&130023424)===h&&(s=zg+500-mt(),10<s)){if(Gh(n,0)!==0)break;if(g=n.suspendedLanes,(g&h)!==h){un(),n.pingedLanes|=n.suspendedLanes&g;break}n.timeoutHandle=Xp(ho.bind(null,n,An,ps),s);break}ho(n,An,ps);break;case 4:if(pr(n,h),(h&4194240)===h)break;for(s=n.eventTimes,g=-1;0<h;){var S=31-ui(h);y=1<<S,S=s[S],S>g&&(g=S),h&=~y}if(h=g,h=mt()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*xb(h/1960))-h,10<h){n.timeoutHandle=Xp(ho.bind(null,n,An,ps),h);break}ho(n,An,ps);break;case 5:ho(n,An,ps);break;default:throw Error(t(329))}}}return _n(n,mt()),n.callbackNode===o?Aw.bind(null,n):null}function Bg(n,s){var o=$u;return n.current.memoizedState.isDehydrated&&(co(n,s).flags|=256),n=zd(n,s),n!==2&&(s=An,An=o,s!==null&&Ug(s)),n}function Ug(n){An===null?An=n:An.push.apply(An,n)}function Cb(n){for(var s=n;;){if(s.flags&16384){var o=s.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var h=0;h<o.length;h++){var g=o[h],y=g.getSnapshot;g=g.value;try{if(!ci(y(),g))return!1}catch{return!1}}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function pr(n,s){for(s&=~Og,s&=~Md,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var o=31-ui(s),h=1<<o;n[o]=-1,s&=~h}}function _w(n){if(He&6)throw Error(t(327));Ya();var s=Gh(n,0);if(!(s&1))return _n(n,mt()),null;var o=zd(n,s);if(n.tag!==0&&o===2){var h=Ap(n);h!==0&&(s=h,o=Bg(n,h))}if(o===1)throw o=Vu,co(n,0),pr(n,s),_n(n,mt()),o;if(o===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,ho(n,An,ps),_n(n,mt()),null}function Vg(n,s){var o=He;He|=1;try{return n(s)}finally{He=o,He===0&&(qa=mt()+500,hd&&ar())}}function uo(n){dr!==null&&dr.tag===0&&!(He&6)&&Ya();var s=He;He|=1;var o=Kn.transition,h=We;try{if(Kn.transition=null,We=1,n)return n()}finally{We=h,Kn.transition=o,He=s,!(He&6)&&ar()}}function $g(){In=Xa.current,tt(Xa)}function co(n,s){n.finishedWork=null,n.finishedLanes=0;var o=n.timeoutHandle;if(o!==-1&&(n.timeoutHandle=-1,nb(o)),At!==null)for(o=At.return;o!==null;){var h=o;switch(Zp(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&ud();break;case 3:$a(),tt(yn),tt(Yt),dg();break;case 5:cg(h);break;case 4:$a();break;case 13:tt(ot);break;case 19:tt(ot);break;case 10:rg(h.type._context);break;case 22:case 23:$g()}o=o.return}if(Ft=n,At=n=gr(n.current,null),Vt=In=s,Ct=0,Vu=null,Og=Md=lo=0,An=$u=null,ro!==null){for(s=0;s<ro.length;s++)if(o=ro[s],h=o.interleaved,h!==null){o.interleaved=null;var g=h.next,y=o.pending;if(y!==null){var S=y.next;y.next=g,h.next=S}o.pending=h}ro=null}return n}function Sw(n,s){do{var o=At;try{if(sg(),_d.current=xd,Sd){for(var h=at.memoizedState;h!==null;){var g=h.queue;g!==null&&(g.pending=null),h=h.next}Sd=!1}if(ao=0,It=xt=at=null,Ou=!1,zu=0,Ng.current=null,o===null||o.return===null){Ct=1,Vu=s,At=null;break}e:{var y=n,S=o.return,T=o,R=s;if(s=Vt,T.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var z=R,G=T,X=G.tag;if(!(G.mode&1)&&(X===0||X===11||X===15)){var W=G.alternate;W?(G.updateQueue=W.updateQueue,G.memoizedState=W.memoizedState,G.lanes=W.lanes):(G.updateQueue=null,G.memoizedState=null)}var ne=X0(S);if(ne!==null){ne.flags&=-257,q0(ne,S,T,y,s),ne.mode&1&&G0(y,z,s),s=ne,R=z;var le=s.updateQueue;if(le===null){var ue=new Set;ue.add(R),s.updateQueue=ue}else le.add(R);break e}else{if(!(s&1)){G0(y,z,s),Wg();break e}R=Error(t(426))}}else if(st&&T.mode&1){var yt=X0(S);if(yt!==null){!(yt.flags&65536)&&(yt.flags|=256),q0(yt,S,T,y,s),ng(Wa(R,T));break e}}y=R=Wa(R,T),Ct!==4&&(Ct=2),$u===null?$u=[y]:$u.push(y),y=S;do{switch(y.tag){case 3:y.flags|=65536,s&=-s,y.lanes|=s;var N=$0(y,R,s);y0(y,N);break e;case 1:T=R;var L=y.type,O=y.stateNode;if(!(y.flags&128)&&(typeof L.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(hr===null||!hr.has(O)))){y.flags|=65536,s&=-s,y.lanes|=s;var q=W0(y,T,s);y0(y,q);break e}}y=y.return}while(y!==null)}xw(o)}catch(he){s=he,At===o&&o!==null&&(At=o=o.return);continue}break}while(!0)}function Ew(){var n=Ld.current;return Ld.current=xd,n===null?xd:n}function Wg(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),Ft===null||!(lo&268435455)&&!(Md&268435455)||pr(Ft,Vt)}function zd(n,s){var o=He;He|=2;var h=Ew();(Ft!==n||Vt!==s)&&(ps=null,co(n,s));do try{kb();break}catch(g){Sw(n,g)}while(!0);if(sg(),He=o,Ld.current=h,At!==null)throw Error(t(261));return Ft=null,Vt=0,Ct}function kb(){for(;At!==null;)bw(At)}function Tb(){for(;At!==null&&!ZS();)bw(At)}function bw(n){var s=Tw(n.alternate,n,In);n.memoizedProps=n.pendingProps,s===null?xw(n):At=s,Ng.current=null}function xw(n){var s=n;do{var o=s.alternate;if(n=s.return,s.flags&32768){if(o=_b(o,s),o!==null){o.flags&=32767,At=o;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ct=6,At=null;return}}else if(o=Ab(o,s,In),o!==null){At=o;return}if(s=s.sibling,s!==null){At=s;return}At=s=n}while(s!==null);Ct===0&&(Ct=5)}function ho(n,s,o){var h=We,g=Kn.transition;try{Kn.transition=null,We=1,Pb(n,s,o,h)}finally{Kn.transition=g,We=h}return null}function Pb(n,s,o,h){do Ya();while(dr!==null);if(He&6)throw Error(t(327));o=n.finishedWork;var g=n.finishedLanes;if(o===null)return null;if(n.finishedWork=null,n.finishedLanes=0,o===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var y=o.lanes|o.childLanes;if(uE(n,y),n===Ft&&(At=Ft=null,Vt=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||Fd||(Fd=!0,Pw(Uh,function(){return Ya(),null})),y=(o.flags&15990)!==0,o.subtreeFlags&15990||y){y=Kn.transition,Kn.transition=null;var S=We;We=1;var T=He;He|=4,Ng.current=null,Eb(n,o),gw(o,n),YE(Wp),Yh=!!$p,Wp=$p=null,n.current=o,bb(o),eE(),He=T,We=S,Kn.transition=y}else n.current=o;if(Fd&&(Fd=!1,dr=n,Dd=g),y=n.pendingLanes,y===0&&(hr=null),iE(o.stateNode),_n(n,mt()),s!==null)for(h=n.onRecoverableError,o=0;o<s.length;o++)g=s[o],h(g.value,{componentStack:g.stack,digest:g.digest});if(Id)throw Id=!1,n=Hg,Hg=null,n;return Dd&1&&n.tag!==0&&Ya(),y=n.pendingLanes,y&1?n===jg?Wu++:(Wu=0,jg=n):Wu=0,ar(),null}function Ya(){if(dr!==null){var n=fv(Dd),s=Kn.transition,o=We;try{if(Kn.transition=null,We=16>n?16:n,dr===null)var h=!1;else{if(n=dr,dr=null,Dd=0,He&6)throw Error(t(331));var g=He;for(He|=4,re=n.current;re!==null;){var y=re,S=y.child;if(re.flags&16){var T=y.deletions;if(T!==null){for(var R=0;R<T.length;R++){var z=T[R];for(re=z;re!==null;){var G=re;switch(G.tag){case 0:case 11:case 15:Uu(8,G,y)}var X=G.child;if(X!==null)X.return=G,re=X;else for(;re!==null;){G=re;var W=G.sibling,ne=G.return;if(cw(G),G===z){re=null;break}if(W!==null){W.return=ne,re=W;break}re=ne}}}var le=y.alternate;if(le!==null){var ue=le.child;if(ue!==null){le.child=null;do{var yt=ue.sibling;ue.sibling=null,ue=yt}while(ue!==null)}}re=y}}if(y.subtreeFlags&2064&&S!==null)S.return=y,re=S;else e:for(;re!==null;){if(y=re,y.flags&2048)switch(y.tag){case 0:case 11:case 15:Uu(9,y,y.return)}var N=y.sibling;if(N!==null){N.return=y.return,re=N;break e}re=y.return}}var L=n.current;for(re=L;re!==null;){S=re;var O=S.child;if(S.subtreeFlags&2064&&O!==null)O.return=S,re=O;else e:for(S=L;re!==null;){if(T=re,T.flags&2048)try{switch(T.tag){case 0:case 11:case 15:Rd(9,T)}}catch(he){dt(T,T.return,he)}if(T===S){re=null;break e}var q=T.sibling;if(q!==null){q.return=T.return,re=q;break e}re=T.return}}if(He=g,ar(),Di&&typeof Di.onPostCommitFiberRoot=="function")try{Di.onPostCommitFiberRoot(Vh,n)}catch{}h=!0}return h}finally{We=o,Kn.transition=s}}return!1}function Cw(n,s,o){s=Wa(o,s),s=$0(n,s,1),n=ur(n,s,1),s=un(),n!==null&&(gu(n,1,s),_n(n,s))}function dt(n,s,o){if(n.tag===3)Cw(n,n,o);else for(;s!==null;){if(s.tag===3){Cw(s,n,o);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(hr===null||!hr.has(h))){n=Wa(o,n),n=W0(s,n,1),s=ur(s,n,1),n=un(),s!==null&&(gu(s,1,n),_n(s,n));break}}s=s.return}}function Rb(n,s,o){var h=n.pingCache;h!==null&&h.delete(s),s=un(),n.pingedLanes|=n.suspendedLanes&o,Ft===n&&(Vt&o)===o&&(Ct===4||Ct===3&&(Vt&130023424)===Vt&&500>mt()-zg?co(n,0):Og|=o),_n(n,s)}function kw(n,s){s===0&&(n.mode&1?(s=Wh,Wh<<=1,!(Wh&130023424)&&(Wh=4194304)):s=1);var o=un();n=hs(n,s),n!==null&&(gu(n,s,o),_n(n,o))}function Lb(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),kw(n,o)}function Mb(n,s){var o=0;switch(n.tag){case 13:var h=n.stateNode,g=n.memoizedState;g!==null&&(o=g.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),kw(n,o)}var Tw;Tw=function(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps||yn.current)wn=!0;else{if(!(n.lanes&o)&&!(s.flags&128))return wn=!1,wb(n,s,o);wn=!!(n.flags&131072)}else wn=!1,st&&s.flags&1048576&&a0(s,fd,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Td(n,s),n=s.pendingProps;var g=Oa(s,Yt.current);Va(s,o),g=gg(null,s,h,n,g,o);var y=mg();return s.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,vn(h)?(y=!0,cd(s)):y=!1,s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,lg(s),g.updater=Cd,s.stateNode=g,g._reactInternals=s,Sg(s,h,n,o),s=Cg(null,s,h,!0,y,o)):(s.tag=0,st&&y&&Jp(s),ln(null,s,g,o),s=s.child),s;case 16:h=s.elementType;e:{switch(Td(n,s),n=s.pendingProps,g=h._init,h=g(h._payload),s.type=h,g=s.tag=Fb(h),n=di(h,n),g){case 0:s=xg(null,s,h,n,o);break e;case 1:s=ew(null,s,h,n,o);break e;case 11:s=Y0(null,s,h,n,o);break e;case 14:s=K0(null,s,h,di(h.type,n),o);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:di(h,g),xg(n,s,h,g,o);case 1:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:di(h,g),ew(n,s,h,g,o);case 3:e:{if(tw(s),n===null)throw Error(t(387));h=s.pendingProps,y=s.memoizedState,g=y.element,m0(n,s),wd(s,h,null,o);var S=s.memoizedState;if(h=S.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){g=Wa(Error(t(423)),s),s=nw(n,s,h,o,g);break e}else if(h!==g){g=Wa(Error(t(424)),s),s=nw(n,s,h,o,g);break e}else for(Mn=sr(s.stateNode.containerInfo.firstChild),Ln=s,st=!0,hi=null,o=p0(s,null,h,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(ja(),h===g){s=fs(n,s,o);break e}ln(n,s,h,o)}s=s.child}return s;case 5:return w0(s),n===null&&tg(s),h=s.type,g=s.pendingProps,y=n!==null?n.memoizedProps:null,S=g.children,Gp(h,g)?S=null:y!==null&&Gp(h,y)&&(s.flags|=32),Z0(n,s),ln(n,s,S,o),s.child;case 6:return n===null&&tg(s),null;case 13:return iw(n,s,o);case 4:return ug(s,s.stateNode.containerInfo),h=s.pendingProps,n===null?s.child=Ba(s,null,h,o):ln(n,s,h,o),s.child;case 11:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:di(h,g),Y0(n,s,h,g,o);case 7:return ln(n,s,s.pendingProps,o),s.child;case 8:return ln(n,s,s.pendingProps.children,o),s.child;case 12:return ln(n,s,s.pendingProps.children,o),s.child;case 10:e:{if(h=s.type._context,g=s.pendingProps,y=s.memoizedProps,S=g.value,Je(md,h._currentValue),h._currentValue=S,y!==null)if(ci(y.value,S)){if(y.children===g.children&&!yn.current){s=fs(n,s,o);break e}}else for(y=s.child,y!==null&&(y.return=s);y!==null;){var T=y.dependencies;if(T!==null){S=y.child;for(var R=T.firstContext;R!==null;){if(R.context===h){if(y.tag===1){R=ds(-1,o&-o),R.tag=2;var z=y.updateQueue;if(z!==null){z=z.shared;var G=z.pending;G===null?R.next=R:(R.next=G.next,G.next=R),z.pending=R}}y.lanes|=o,R=y.alternate,R!==null&&(R.lanes|=o),og(y.return,o,s),T.lanes|=o;break}R=R.next}}else if(y.tag===10)S=y.type===s.type?null:y.child;else if(y.tag===18){if(S=y.return,S===null)throw Error(t(341));S.lanes|=o,T=S.alternate,T!==null&&(T.lanes|=o),og(S,o,s),S=y.sibling}else S=y.child;if(S!==null)S.return=y;else for(S=y;S!==null;){if(S===s){S=null;break}if(y=S.sibling,y!==null){y.return=S.return,S=y;break}S=S.return}y=S}ln(n,s,g.children,o),s=s.child}return s;case 9:return g=s.type,h=s.pendingProps.children,Va(s,o),g=qn(g),h=h(g),s.flags|=1,ln(n,s,h,o),s.child;case 14:return h=s.type,g=di(h,s.pendingProps),g=di(h.type,g),K0(n,s,h,g,o);case 15:return Q0(n,s,s.type,s.pendingProps,o);case 17:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:di(h,g),Td(n,s),s.tag=1,vn(h)?(n=!0,cd(s)):n=!1,Va(s,o),U0(s,h,g),Sg(s,h,g,o),Cg(null,s,h,!0,n,o);case 19:return rw(n,s,o);case 22:return J0(n,s,o)}throw Error(t(156,s.tag))};function Pw(n,s){return lv(n,s)}function Ib(n,s,o,h){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(n,s,o,h){return new Ib(n,s,o,h)}function Gg(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Fb(n){if(typeof n=="function")return Gg(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Se)return 11;if(n===ve)return 14}return 2}function gr(n,s){var o=n.alternate;return o===null?(o=Qn(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&14680064,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o}function Hd(n,s,o,h,g,y){var S=2;if(h=n,typeof n=="function")Gg(n)&&(S=1);else if(typeof n=="string")S=5;else e:switch(n){case V:return fo(o.children,g,y,s);case $:S=8,g|=8;break;case K:return n=Qn(12,o,s,g|2),n.elementType=K,n.lanes=y,n;case de:return n=Qn(13,o,s,g),n.elementType=de,n.lanes=y,n;case ce:return n=Qn(19,o,s,g),n.elementType=ce,n.lanes=y,n;case Y:return jd(o,g,y,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case te:S=10;break e;case ee:S=9;break e;case Se:S=11;break e;case ve:S=14;break e;case pe:S=16,h=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Qn(S,o,s,g),s.elementType=n,s.type=h,s.lanes=y,s}function fo(n,s,o,h){return n=Qn(7,n,h,s),n.lanes=o,n}function jd(n,s,o,h){return n=Qn(22,n,h,s),n.elementType=Y,n.lanes=o,n.stateNode={isHidden:!1},n}function Xg(n,s,o){return n=Qn(6,n,null,s),n.lanes=o,n}function qg(n,s,o){return s=Qn(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function Db(n,s,o,h,g){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_p(0),this.expirationTimes=_p(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_p(0),this.identifierPrefix=h,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Yg(n,s,o,h,g,y,S,T,R){return n=new Db(n,s,o,T,R),s===1?(s=1,y===!0&&(s|=8)):s=0,y=Qn(3,null,null,s),n.current=y,y.stateNode=n,y.memoizedState={element:h,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},lg(y),n}function Nb(n,s,o){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:H,key:h==null?null:""+h,children:n,containerInfo:s,implementation:o}}function Rw(n){if(!n)return or;n=n._reactInternals;e:{if(eo(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(vn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var o=n.type;if(vn(o))return s0(n,o,s)}return s}function Lw(n,s,o,h,g,y,S,T,R){return n=Yg(o,h,!0,n,g,y,S,T,R),n.context=Rw(null),o=n.current,h=un(),g=fr(o),y=ds(h,g),y.callback=s??null,ur(o,y,g),n.current.lanes=g,gu(n,g,h),_n(n,h),n}function Bd(n,s,o,h){var g=s.current,y=un(),S=fr(g);return o=Rw(o),s.context===null?s.context=o:s.pendingContext=o,s=ds(y,S),s.payload={element:n},h=h===void 0?null:h,h!==null&&(s.callback=h),n=ur(g,s,S),n!==null&&(gi(n,g,S,y),vd(n,g,S)),S}function Ud(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Mw(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function Kg(n,s){Mw(n,s),(n=n.alternate)&&Mw(n,s)}function Ob(){return null}var Iw=typeof reportError=="function"?reportError:function(n){console.error(n)};function Qg(n){this._internalRoot=n}Vd.prototype.render=Qg.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Bd(n,s,null,null)},Vd.prototype.unmount=Qg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;uo(function(){Bd(null,n,null,null)}),s[as]=null}};function Vd(n){this._internalRoot=n}Vd.prototype.unstable_scheduleHydration=function(n){if(n){var s=mv();n={blockedOn:null,target:n,priority:s};for(var o=0;o<tr.length&&s!==0&&s<tr[o].priority;o++);tr.splice(o,0,n),o===0&&wv(n)}};function Jg(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function $d(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Fw(){}function zb(n,s,o,h,g){if(g){if(typeof h=="function"){var y=h;h=function(){var z=Ud(S);y.call(z)}}var S=Lw(s,h,n,0,null,!1,!1,"",Fw);return n._reactRootContainer=S,n[as]=S.current,Pu(n.nodeType===8?n.parentNode:n),uo(),S}for(;g=n.lastChild;)n.removeChild(g);if(typeof h=="function"){var T=h;h=function(){var z=Ud(R);T.call(z)}}var R=Yg(n,0,!1,null,null,!1,!1,"",Fw);return n._reactRootContainer=R,n[as]=R.current,Pu(n.nodeType===8?n.parentNode:n),uo(function(){Bd(s,R,o,h)}),R}function Wd(n,s,o,h,g){var y=o._reactRootContainer;if(y){var S=y;if(typeof g=="function"){var T=g;g=function(){var R=Ud(S);T.call(R)}}Bd(s,S,n,g)}else S=zb(o,s,n,g,h);return Ud(S)}pv=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var o=pu(s.pendingLanes);o!==0&&(Sp(s,o|1),_n(s,mt()),!(He&6)&&(qa=mt()+500,ar()))}break;case 13:uo(function(){var h=hs(n,1);if(h!==null){var g=un();gi(h,n,1,g)}}),Kg(n,1)}},Ep=function(n){if(n.tag===13){var s=hs(n,134217728);if(s!==null){var o=un();gi(s,n,134217728,o)}Kg(n,134217728)}},gv=function(n){if(n.tag===13){var s=fr(n),o=hs(n,s);if(o!==null){var h=un();gi(o,n,s,h)}Kg(n,s)}},mv=function(){return We},yv=function(n,s){var o=We;try{return We=n,s()}finally{We=o}},gp=function(n,s,o){switch(s){case"input":if(Ii(n,o),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<o.length;s++){var h=o[s];if(h!==n&&h.form===n.form){var g=ld(h);if(!g)throw Error(t(90));Ks(h),Ii(h,g)}}}break;case"textarea":Oh(n,o);break;case"select":s=o.value,s!=null&&li(n,!!o.multiple,s,!1)}},tv=Vg,nv=uo;var Hb={usingClientEntryPoint:!1,Events:[Mu,Da,ld,Zy,ev,Vg]},Gu={findFiberByHostInstance:to,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jb={bundleType:Gu.bundleType,version:Gu.version,rendererPackageName:Gu.rendererPackageName,rendererConfig:Gu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ov(n),n===null?null:n.stateNode},findFiberByHostInstance:Gu.findFiberByHostInstance||Ob,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gd.isDisabled&&Gd.supportsFiber)try{Vh=Gd.inject(jb),Di=Gd}catch{}}return Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hb,Sn.createPortal=function(n,s){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jg(s))throw Error(t(200));return Nb(n,s,null,o)},Sn.createRoot=function(n,s){if(!Jg(n))throw Error(t(299));var o=!1,h="",g=Iw;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(g=s.onRecoverableError)),s=Yg(n,1,!1,null,null,o,!1,h,g),n[as]=s.current,Pu(n.nodeType===8?n.parentNode:n),new Qg(s)},Sn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=ov(s),n=n===null?null:n.stateNode,n},Sn.flushSync=function(n){return uo(n)},Sn.hydrate=function(n,s,o){if(!$d(s))throw Error(t(200));return Wd(null,n,s,!0,o)},Sn.hydrateRoot=function(n,s,o){if(!Jg(n))throw Error(t(405));var h=o!=null&&o.hydratedSources||null,g=!1,y="",S=Iw;if(o!=null&&(o.unstable_strictMode===!0&&(g=!0),o.identifierPrefix!==void 0&&(y=o.identifierPrefix),o.onRecoverableError!==void 0&&(S=o.onRecoverableError)),s=Lw(s,null,n,1,o??null,g,!1,y,S),n[as]=s.current,Pu(n),h)for(n=0;n<h.length;n++)o=h[n],g=o._getVersion,g=g(o._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[o,g]:s.mutableSourceEagerHydrationData.push(o,g);return new Vd(s)},Sn.render=function(n,s,o){if(!$d(s))throw Error(t(200));return Wd(null,n,s,!1,o)},Sn.unmountComponentAtNode=function(n){if(!$d(n))throw Error(t(40));return n._reactRootContainer?(uo(function(){Wd(null,null,n,!1,function(){n._reactRootContainer=null,n[as]=null})}),!0):!1},Sn.unstable_batchedUpdates=Vg,Sn.unstable_renderSubtreeIntoContainer=function(n,s,o,h){if(!$d(o))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Wd(n,s,o,!1,h)},Sn.version="18.3.1-next-f1338f8080-20240426",Sn}var Vw;function Qb(){if(Vw)return nm.exports;Vw=1;function f(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f)}catch(e){console.error(e)}}return f(),nm.exports=Kb(),nm.exports}var $w;function Jb(){if($w)return Xd;$w=1;var f=Qb();return Xd.createRoot=f.createRoot,Xd.hydrateRoot=f.hydrateRoot,Xd}var Zb=Jb();const e1="modulepreload",t1=function(f){return"/"+f},Ww={},qd=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));r=Promise.allSettled(t.map(d=>{if(d=t1(d),d in Ww)return;Ww[d]=!0;const p=d.endsWith(".css"),m=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const v=document.createElement("link");if(v.rel=p?"stylesheet":e1,p||(v.as="script"),v.crossOrigin="",v.href=d,c&&v.setAttribute("nonce",c),document.head.appendChild(v),p)return new Promise((w,_)=>{v.addEventListener("load",w),v.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(u){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=u,window.dispatchEvent(c),!c.defaultPrevented)throw u}return r.then(u=>{for(const c of u||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})};var fc={};fc.d=(f,e)=>{for(var t in e)fc.o(e,t)&&!fc.o(f,t)&&Object.defineProperty(f,t,{enumerable:!0,get:e[t]})};fc.o=(f,e)=>Object.prototype.hasOwnProperty.call(f,e);var ke=globalThis.pdfjsLib={};fc.d(ke,{AbortException:()=>ba,AnnotationEditorLayer:()=>Ey,AnnotationEditorParamsType:()=>xe,AnnotationEditorType:()=>Pe,AnnotationEditorUIManager:()=>va,AnnotationLayer:()=>Zx,AnnotationMode:()=>wr,ColorPicker:()=>Ff,DOMSVGFactory:()=>$y,DrawLayer:()=>ky,FeatureTest:()=>pn,GlobalWorkerOptions:()=>$s,ImageKind:()=>ef,InvalidPDFException:()=>CA,MissingPDFException:()=>Ea,OPS:()=>yi,OutputScale:()=>mm,PDFDataRangeTransport:()=>S_,PDFDateString:()=>Oy,PDFWorker:()=>ol,PasswordResponses:()=>r1,PermissionFlag:()=>s1,PixelsPerInch:()=>Xr,RenderingCancelledException:()=>Dy,TextLayer:()=>$m,UnexpectedResponseException:()=>np,Util:()=>fe,VerbosityLevel:()=>Zf,XfaLayer:()=>b_,build:()=>Ix,createValidAbsoluteUrl:()=>u1,fetchData:()=>sp,getDocument:()=>bx,getFilenameFromUrl:()=>v1,getPdfFilenameFromUrl:()=>w1,getXfaPageViewport:()=>A1,isDataScheme:()=>rp,isPdfFile:()=>Ny,noContextMenu:()=>ai,normalizeUnicode:()=>g1,setLayerDimensions:()=>ya,shadow:()=>ze,version:()=>Mx});const an=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),xA=[1,0,0,1,0,0],dm=[.001,0,0,.001,0,0],n1=1e7,rm=1.35,Vn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},wr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},i1="pdfjs_internal_editor_",Pe={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},xe={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},s1={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Zt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},ef={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},kt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},qu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Zf={ERRORS:0,WARNINGS:1,INFOS:5},yi={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},r1={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let ep=Zf.WARNINGS;function o1(f){Number.isInteger(f)&&(ep=f)}function a1(){return ep}function tp(f){ep>=Zf.INFOS&&console.log(`Info: ${f}`)}function Me(f){ep>=Zf.WARNINGS&&console.log(`Warning: ${f}`)}function nt(f){throw new Error(f)}function Lt(f,e){f||nt(e)}function l1(f){switch(f==null?void 0:f.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function u1(f,e=null,t=null){if(!f)return null;try{if(t&&typeof f=="string"){if(t.addDefaultProtocol&&f.startsWith("www.")){const r=f.match(/\./g);(r==null?void 0:r.length)>=2&&(f=`http://${f}`)}if(t.tryConvertEncoding)try{f=p1(f)}catch{}}const i=e?new URL(f,e):new URL(f);if(l1(i))return i}catch{}return null}function ze(f,e,t,i=!1){return Object.defineProperty(f,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const Qr=function(){function e(t,i){this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e}();class fm extends Qr{constructor(e,t){super(e,"PasswordException"),this.code=t}}class pm extends Qr{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class CA extends Qr{constructor(e){super(e,"InvalidPDFException")}}class Ea extends Qr{constructor(e){super(e,"MissingPDFException")}}class np extends Qr{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class c1 extends Qr{constructor(e){super(e,"FormatError")}}class ba extends Qr{constructor(e){super(e,"AbortException")}}function kA(f){(typeof f!="object"||(f==null?void 0:f.length)===void 0)&&nt("Invalid argument for bytesToString");const e=f.length,t=8192;if(e<t)return String.fromCharCode.apply(null,f);const i=[];for(let r=0;r<e;r+=t){const a=Math.min(r+t,e),u=f.subarray(r,a);i.push(String.fromCharCode.apply(null,u))}return i.join("")}function ip(f){typeof f!="string"&&nt("Invalid argument for stringToBytes");const e=f.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=f.charCodeAt(i)&255;return t}function h1(f){return String.fromCharCode(f>>24&255,f>>16&255,f>>8&255,f&255)}function Iy(f){const e=Object.create(null);for(const[t,i]of f)e[t]=i;return e}function d1(){const f=new Uint8Array(4);return f[0]=1,new Uint32Array(f.buffer,0,1)[0]===1}function f1(){try{return new Function(""),!0}catch{return!1}}class pn{static get isLittleEndian(){return ze(this,"isLittleEndian",d1())}static get isEvalSupported(){return ze(this,"isEvalSupported",f1())}static get isOffscreenCanvasSupported(){return ze(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?ze(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):ze(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return ze(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const om=Array.from(Array(256).keys(),f=>f.toString(16).padStart(2,"0"));var Gs,tf,gm;class fe{static makeHexColor(e,t,i){return`#${om[e]}${om[t]}${om[i]}`}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const i=e[0]*t[0]+e[1]*t[2]+t[4],r=e[0]*t[1]+e[1]*t[3]+t[5];return[i,r]}static applyInverseTransform(e,t){const i=t[0]*t[3]-t[1]*t[2],r=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,a=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i;return[r,a]}static getAxialAlignedBoundingBox(e,t){const i=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),a=this.applyTransform([e[0],e[3]],t),u=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],r[0],a[0],u[0]),Math.min(i[1],r[1],a[1],u[1]),Math.max(i[0],r[0],a[0],u[0]),Math.max(i[1],r[1],a[1],u[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],a=e[2]*t[0]+e[3]*t[2],u=e[2]*t[1]+e[3]*t[3],c=(i+u)/2,d=Math.sqrt((i+u)**2-4*(i*u-a*r))/2,p=c+d||1,m=c-d||1;return[Math.sqrt(p),Math.sqrt(m)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>r)return null;const a=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),u=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return a>u?null:[i,a,r,u]}static bezierBoundingBox(e,t,i,r,a,u,c,d,p){return p?(p[0]=Math.min(p[0],e,c),p[1]=Math.min(p[1],t,d),p[2]=Math.max(p[2],e,c),p[3]=Math.max(p[3],t,d)):p=[Math.min(e,c),Math.min(t,d),Math.max(e,c),Math.max(t,d)],E(this,Gs,gm).call(this,e,i,a,c,t,r,u,d,3*(-e+3*(i-a)+c),6*(e-2*i+a),3*(i-e),p),E(this,Gs,gm).call(this,e,i,a,c,t,r,u,d,3*(-t+3*(r-u)+d),6*(t-2*r+u),3*(r-t),p),p}}Gs=new WeakSet,tf=function(e,t,i,r,a,u,c,d,p,m){if(p<=0||p>=1)return;const v=1-p,w=p*p,_=w*p,b=v*(v*(v*e+3*p*t)+3*w*i)+_*r,C=v*(v*(v*a+3*p*u)+3*w*c)+_*d;m[0]=Math.min(m[0],b),m[1]=Math.min(m[1],C),m[2]=Math.max(m[2],b),m[3]=Math.max(m[3],C)},gm=function(e,t,i,r,a,u,c,d,p,m,v,w){if(Math.abs(p)<1e-12){Math.abs(m)>=1e-12&&E(this,Gs,tf).call(this,e,t,i,r,a,u,c,d,-v/m,w);return}const _=m**2-4*v*p;if(_<0)return;const b=Math.sqrt(_),C=2*p;E(this,Gs,tf).call(this,e,t,i,r,a,u,c,d,(-m+b)/C,w),E(this,Gs,tf).call(this,e,t,i,r,a,u,c,d,(-m-b)/C,w)},x(fe,Gs);function p1(f){return decodeURIComponent(escape(f))}let am=null,Gw=null;function g1(f){return am||(am=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Gw=new Map([["ﬅ","ſt"]])),f.replaceAll(am,(e,t,i)=>t?t.normalize("NFKC"):Gw.get(i))}function m1(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const f=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(f);else for(let e=0;e<32;e++)f[e]=Math.floor(Math.random()*255);return kA(f)}const Fy="pdfjs_internal_id_",gs={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function y1(f){return Uint8Array.prototype.toBase64?f.toBase64():btoa(kA(f))}const ys="http://www.w3.org/2000/svg",wo=class wo{};be(wo,"CSS",96),be(wo,"PDF",72),be(wo,"PDF_TO_CSS_UNITS",wo.CSS/wo.PDF);let Xr=wo;async function sp(f,e="text"){if(Qu(f,document.baseURI)){const t=await fetch(f);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const r=new XMLHttpRequest;r.open("GET",f,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}i(new Error(r.statusText))}},r.send(null)})}class Mh{constructor({viewBox:e,scale:t,rotation:i,offsetX:r=0,offsetY:a=0,dontFlip:u=!1}){this.viewBox=e,this.scale=t,this.rotation=i,this.offsetX=r,this.offsetY=a;const c=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let p,m,v,w;switch(i%=360,i<0&&(i+=360),i){case 180:p=-1,m=0,v=0,w=1;break;case 90:p=0,m=1,v=1,w=0;break;case 270:p=0,m=-1,v=-1,w=0;break;case 0:p=1,m=0,v=0,w=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(v=-v,w=-w);let _,b,C,P;p===0?(_=Math.abs(d-e[1])*t+r,b=Math.abs(c-e[0])*t+a,C=(e[3]-e[1])*t,P=(e[2]-e[0])*t):(_=Math.abs(c-e[0])*t+r,b=Math.abs(d-e[1])*t+a,C=(e[2]-e[0])*t,P=(e[3]-e[1])*t),this.transform=[p*t,m*t,v*t,w*t,_-p*t*c-v*t*d,b-m*t*c-w*t*d],this.width=C,this.height=P}get rawDims(){const{viewBox:e}=this;return ze(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:a=!1}={}){return new Mh({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:a})}convertToViewportPoint(e,t){return fe.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=fe.applyTransform([e[0],e[1]],this.transform),i=fe.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return fe.applyInverseTransform([e,t],this.transform)}}class Dy extends Qr{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function rp(f){const e=f.length;let t=0;for(;t<e&&f[t].trim()==="";)t++;return f.substring(t,t+5).toLowerCase()==="data:"}function Ny(f){return typeof f=="string"&&/\.pdf$/i.test(f)}function v1(f){return[f]=f.split(/[#?]/,1),f.substring(f.lastIndexOf("/")+1)}function w1(f,e="document.pdf"){if(typeof f!="string")return e;if(rp(f))return Me('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=t.exec(f);let a=i.exec(r[1])||i.exec(r[2])||i.exec(r[3]);if(a&&(a=a[0],a.includes("%")))try{a=i.exec(decodeURIComponent(a))[0]}catch{}return a||e}class Xw{constructor(){be(this,"started",Object.create(null));be(this,"times",[])}time(e){e in this.started&&Me(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Me(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:r,end:a}of this.times)e.push(`${i.padEnd(t)} ${a-r}ms
`);return e.join("")}}function Qu(f,e){try{const{protocol:t}=e?new URL(f,e):new URL(f);return t==="http:"||t==="https:"}catch{return!1}}function ai(f){f.preventDefault()}function qw(f){console.log("Deprecated API usage: "+f)}var yc;class Oy{static toDateObject(e){if(!e||typeof e!="string")return null;l(this,yc)||A(this,yc,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=l(this,yc).exec(e);if(!t)return null;const i=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let a=parseInt(t[3],10);a=a>=1&&a<=31?a:1;let u=parseInt(t[4],10);u=u>=0&&u<=23?u:0;let c=parseInt(t[5],10);c=c>=0&&c<=59?c:0;let d=parseInt(t[6],10);d=d>=0&&d<=59?d:0;const p=t[7]||"Z";let m=parseInt(t[8],10);m=m>=0&&m<=23?m:0;let v=parseInt(t[9],10)||0;return v=v>=0&&v<=59?v:0,p==="-"?(u+=m,c+=v):p==="+"&&(u-=m,c-=v),new Date(Date.UTC(i,r,a,u,c,d))}}yc=new WeakMap,x(Oy,yc);function A1(f,{scale:e=1,rotation:t=0}){const{width:i,height:r}=f.attributes.style,a=[0,0,parseInt(i),parseInt(r)];return new Mh({viewBox:a,scale:e,rotation:t})}function zy(f){if(f.startsWith("#")){const e=parseInt(f.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return f.startsWith("rgb(")?f.slice(4,-1).split(",").map(e=>parseInt(e)):f.startsWith("rgba(")?f.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Me(`Not a valid color format: "${f}"`),[0,0,0])}function _1(f){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of f.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;f.set(t,zy(i))}e.remove()}function ht(f){const{a:e,b:t,c:i,d:r,e:a,f:u}=f.getTransform();return[e,t,i,r,a,u]}function ms(f){const{a:e,b:t,c:i,d:r,e:a,f:u}=f.getTransform().invertSelf();return[e,t,i,r,a,u]}function ya(f,e,t=!1,i=!0){if(e instanceof Mh){const{pageWidth:r,pageHeight:a}=e.rawDims,{style:u}=f,c=pn.isCSSRoundSupported,d=`var(--scale-factor) * ${r}px`,p=`var(--scale-factor) * ${a}px`,m=c?`round(down, ${d}, var(--scale-round-x, 1px))`:`calc(${d})`,v=c?`round(down, ${p}, var(--scale-round-y, 1px))`:`calc(${p})`;!t||e.rotation%180===0?(u.width=m,u.height=v):(u.width=v,u.height=m)}i&&f.setAttribute("data-main-rotation",e.rotation)}class mm{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Ar,_o,vi,So,vc,wc,Nf,TA,gn,PA,RA,nf,LA,vm;const vs=class vs{constructor(e){x(this,gn);x(this,Ar,null);x(this,_o,null);x(this,vi);x(this,So,null);x(this,vc,null);A(this,vi,e),l(vs,wc)||A(vs,wc,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=A(this,Ar,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=l(this,vi)._uiManager._signal;e.addEventListener("contextmenu",ai,{signal:t}),e.addEventListener("pointerdown",E(vs,Nf,TA),{signal:t});const i=A(this,So,document.createElement("div"));i.className="buttons",e.append(i);const r=l(this,vi).toolbarPosition;if(r){const{style:a}=e,u=l(this,vi)._uiManager.direction==="ltr"?1-r[0]:r[0];a.insetInlineEnd=`${100*u}%`,a.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return E(this,gn,LA).call(this),e}get div(){return l(this,Ar)}hide(){var e;l(this,Ar).classList.add("hidden"),(e=l(this,_o))==null||e.hideDropdown()}show(){var e;l(this,Ar).classList.remove("hidden"),(e=l(this,vc))==null||e.shown()}async addAltText(e){const t=await e.render();E(this,gn,nf).call(this,t),l(this,So).prepend(t,l(this,gn,vm)),A(this,vc,e)}addColorPicker(e){A(this,_o,e);const t=e.renderButton();E(this,gn,nf).call(this,t),l(this,So).prepend(t,l(this,gn,vm))}remove(){var e;l(this,Ar).remove(),(e=l(this,_o))==null||e.destroy(),A(this,_o,null)}};Ar=new WeakMap,_o=new WeakMap,vi=new WeakMap,So=new WeakMap,vc=new WeakMap,wc=new WeakMap,Nf=new WeakSet,TA=function(e){e.stopPropagation()},gn=new WeakSet,PA=function(e){l(this,vi)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},RA=function(e){l(this,vi)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},nf=function(e){const t=l(this,vi)._uiManager._signal;e.addEventListener("focusin",E(this,gn,PA).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",E(this,gn,RA).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",ai,{signal:t})},LA=function(){const{editorType:e,_uiManager:t}=l(this,vi),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",l(vs,wc)[e]),E(this,gn,nf).call(this,i),i.addEventListener("click",r=>{t.delete()},{signal:t._signal}),l(this,So).append(i)},vm=function(){const e=document.createElement("div");return e.className="divider",e},x(vs,Nf),x(vs,wc,null);let ym=vs;var Ac,Eo,bo,Yr,MA,IA,FA;class S1{constructor(e){x(this,Yr);x(this,Ac,null);x(this,Eo,null);x(this,bo);A(this,bo,e)}show(e,t,i){const[r,a]=E(this,Yr,IA).call(this,t,i),{style:u}=l(this,Eo)||A(this,Eo,E(this,Yr,MA).call(this));e.append(l(this,Eo)),u.insetInlineEnd=`${100*r}%`,u.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,Eo).remove()}}Ac=new WeakMap,Eo=new WeakMap,bo=new WeakMap,Yr=new WeakSet,MA=function(){const e=A(this,Eo,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",ai,{signal:l(this,bo)._signal});const t=A(this,Ac,document.createElement("div"));return t.className="buttons",e.append(t),E(this,Yr,FA).call(this),e},IA=function(e,t){let i=0,r=0;for(const a of e){const u=a.y+a.height;if(u<i)continue;const c=a.x+(t?a.width:0);if(u>i){r=c,i=u;continue}t?c>r&&(r=c):c<r&&(r=c)}return[t?1-r:r,i]},FA=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=l(this,bo)._signal;e.addEventListener("contextmenu",ai,{signal:i}),e.addEventListener("click",()=>{l(this,bo).highlightSelection("floating_button")},{signal:i}),l(this,Ac).append(e)};function Lf(f,e,t){for(const i of t)e.addEventListener(i,f[i].bind(f))}function E1(f){return Math.round(Math.min(255,Math.max(1,255*f))).toString(16).padStart(2,"0")}var Of;class b1{constructor(){x(this,Of,0)}get id(){return`${i1}${cn(this,Of)._++}`}}Of=new WeakMap;var ul,_c,tn,cl,sf;const Xy=class Xy{constructor(){x(this,cl);x(this,ul,m1());x(this,_c,0);x(this,tn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const a=r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return ze(this,"_isSVGFittingCanvas",a)}async getFromFile(e){const{lastModified:t,name:i,size:r,type:a}=e;return E(this,cl,sf).call(this,`${t}_${i}_${r}_${a}`,e)}async getFromUrl(e){return E(this,cl,sf).call(this,e,e)}async getFromBlob(e,t){const i=await t;return E(this,cl,sf).call(this,e,i)}async getFromId(e){l(this,tn)||A(this,tn,new Map);const t=l(this,tn).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:i}=t;return delete t.blobPromise,this.getFromBlob(t.id,i)}return this.getFromUrl(t.url)}getFromCanvas(e,t){l(this,tn)||A(this,tn,new Map);let i=l(this,tn).get(e);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),i={bitmap:r.transferToImageBitmap(),id:`image_${l(this,ul)}_${cn(this,_c)._++}`,refCounter:1,isSvg:!1},l(this,tn).set(e,i),l(this,tn).set(i.id,i),i}getSvgUrl(e){const t=l(this,tn).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;l(this,tn)||A(this,tn,new Map);const t=l(this,tn).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:i}=t;if(!t.url&&!t.file){const a=new OffscreenCanvas(i.width,i.height);a.getContext("bitmaprenderer").transferFromImageBitmap(i),t.blobPromise=a.convertToBlob()}(r=i.close)==null||r.call(i),t.bitmap=null}isValidId(e){return e.startsWith(`image_${l(this,ul)}_`)}};ul=new WeakMap,_c=new WeakMap,tn=new WeakMap,cl=new WeakSet,sf=async function(e,t){l(this,tn)||A(this,tn,new Map);let i=l(this,tn).get(e);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${l(this,ul)}_${cn(this,_c)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(i.url=t,r=await sp(t,"blob")):t instanceof File?r=i.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const a=Xy._isSVGFittingCanvas,u=new FileReader,c=new Image,d=new Promise((p,m)=>{c.onload=()=>{i.bitmap=c,i.isSvg=!0,p()},u.onload=async()=>{const v=i.svgUrl=u.result;c.src=await a?`${v}#svgView(preserveAspectRatio(none))`:v},c.onerror=u.onerror=m});u.readAsDataURL(r),await d}else i.bitmap=await createImageBitmap(r);i.refCounter=1}catch(r){console.error(r),i=null}return l(this,tn).set(e,i),i&&l(this,tn).set(i.id,i),i};let wm=Xy;var Ot,_r,Sc,zt;class x1{constructor(e=128){x(this,Ot,[]);x(this,_r,!1);x(this,Sc);x(this,zt,-1);A(this,Sc,e)}add({cmd:e,undo:t,post:i,mustExec:r,type:a=NaN,overwriteIfSameType:u=!1,keepUndo:c=!1}){if(r&&e(),l(this,_r))return;const d={cmd:e,undo:t,post:i,type:a};if(l(this,zt)===-1){l(this,Ot).length>0&&(l(this,Ot).length=0),A(this,zt,0),l(this,Ot).push(d);return}if(u&&l(this,Ot)[l(this,zt)].type===a){c&&(d.undo=l(this,Ot)[l(this,zt)].undo),l(this,Ot)[l(this,zt)]=d;return}const p=l(this,zt)+1;p===l(this,Sc)?l(this,Ot).splice(0,1):(A(this,zt,p),p<l(this,Ot).length&&l(this,Ot).splice(p)),l(this,Ot).push(d)}undo(){if(l(this,zt)===-1)return;A(this,_r,!0);const{undo:e,post:t}=l(this,Ot)[l(this,zt)];e(),t==null||t(),A(this,_r,!1),A(this,zt,l(this,zt)-1)}redo(){if(l(this,zt)<l(this,Ot).length-1){A(this,zt,l(this,zt)+1),A(this,_r,!0);const{cmd:e,post:t}=l(this,Ot)[l(this,zt)];e(),t==null||t(),A(this,_r,!1)}}hasSomethingToUndo(){return l(this,zt)!==-1}hasSomethingToRedo(){return l(this,zt)<l(this,Ot).length-1}destroy(){A(this,Ot,null)}}Ot=new WeakMap,_r=new WeakMap,Sc=new WeakMap,zt=new WeakMap;var zf,DA;class Ih{constructor(e){x(this,zf);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=pn.platform;for(const[i,r,a={}]of e)for(const u of i){const c=u.startsWith("mac+");t&&c?(this.callbacks.set(u.slice(4),{callback:r,options:a}),this.allKeys.add(u.split("+").at(-1))):!t&&!c&&(this.callbacks.set(u,{callback:r,options:a}),this.allKeys.add(u.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(E(this,zf,DA).call(this,t));if(!i)return;const{callback:r,options:{bubbles:a=!1,args:u=[],checker:c=null}}=i;c&&!c(e,t)||(r.bind(e,...u,t)(),a||(t.stopPropagation(),t.preventDefault()))}}zf=new WeakSet,DA=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Hf=class Hf{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return _1(e),ze(this,"_colors",e)}convert(e){const t=zy(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,r]of this._colors)if(r.every((a,u)=>a===t[u]))return Hf._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?fe.makeHexColor(...t):e}};be(Hf,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Am=Hf;var hl,Dn,Tt,Wt,dl,As,fl,wi,Sr,pl,xo,Bi,Ai,Co,Ec,bc,gl,xc,Ui,Er,ml,br,Vi,jf,xr,Cc,Cr,ko,kc,Tc,Ht,Ge,_s,To,Pc,Rc,kr,$i,Ss,Lc,Zn,Z,rf,_m,NA,OA,of,zA,HA,jA,Sm,BA,Em,bm,UA,hn,yr,VA,$A,xm,WA,Ju,Cm;const sl=class sl{constructor(e,t,i,r,a,u,c,d,p,m,v){x(this,Z);x(this,hl,new AbortController);x(this,Dn,null);x(this,Tt,new Map);x(this,Wt,new Map);x(this,dl,null);x(this,As,null);x(this,fl,null);x(this,wi,new x1);x(this,Sr,null);x(this,pl,0);x(this,xo,new Set);x(this,Bi,null);x(this,Ai,null);x(this,Co,new Set);x(this,Ec,!1);x(this,bc,!1);x(this,gl,!1);x(this,xc,null);x(this,Ui,null);x(this,Er,null);x(this,ml,null);x(this,br,!1);x(this,Vi,null);x(this,jf,new b1);x(this,xr,!1);x(this,Cc,!1);x(this,Cr,null);x(this,ko,null);x(this,kc,null);x(this,Tc,null);x(this,Ht,Pe.NONE);x(this,Ge,new Set);x(this,_s,null);x(this,To,null);x(this,Pc,null);x(this,Rc,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});x(this,kr,[0,0]);x(this,$i,null);x(this,Ss,null);x(this,Lc,null);x(this,Zn,null);const w=this._signal=l(this,hl).signal;A(this,Ss,e),A(this,Lc,t),A(this,dl,i),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:w}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:w}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:w}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:w}),r._on("setpreference",this.onSetPreference.bind(this),{signal:w}),r._on("switchannotationeditorparams",_=>this.updateParams(_.type,_.value),{signal:w}),E(this,Z,zA).call(this),E(this,Z,UA).call(this),E(this,Z,Sm).call(this),A(this,As,a.annotationStorage),A(this,xc,a.filterFactory),A(this,To,u),A(this,ml,c||null),A(this,Ec,d),A(this,bc,p),A(this,gl,m),A(this,Tc,v||null),this.viewParameters={realScale:Xr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=sl.prototype,t=u=>l(u,Ss).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&u.hasSomethingToControl(),i=(u,{target:c})=>{if(c instanceof HTMLInputElement){const{type:d}=c;return d!=="text"&&d!=="number"}return!0},r=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return ze(this,"_keyboardManager",new Ih([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(u,{target:c})=>!(c instanceof HTMLButtonElement)&&l(u,Ss).contains(c)&&!u.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(u,{target:c})=>!(c instanceof HTMLButtonElement)&&l(u,Ss).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:t}]]))}destroy(){var e,t,i,r;(e=l(this,Zn))==null||e.resolve(),A(this,Zn,null),(t=l(this,hl))==null||t.abort(),A(this,hl,null),this._signal=null;for(const a of l(this,Wt).values())a.destroy();l(this,Wt).clear(),l(this,Tt).clear(),l(this,Co).clear(),A(this,Dn,null),l(this,Ge).clear(),l(this,wi).destroy(),(i=l(this,dl))==null||i.destroy(),(r=l(this,Vi))==null||r.hide(),A(this,Vi,null),l(this,Ui)&&(clearTimeout(l(this,Ui)),A(this,Ui,null)),l(this,$i)&&(clearTimeout(l(this,$i)),A(this,$i,null))}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return l(this,Tc)}get useNewAltTextFlow(){return l(this,bc)}get useNewAltTextWhenAddingImage(){return l(this,gl)}get hcmFilter(){return ze(this,"hcmFilter",l(this,To)?l(this,xc).addHCMFilter(l(this,To).foreground,l(this,To).background):"none")}get direction(){return ze(this,"direction",getComputedStyle(l(this,Ss)).direction)}get highlightColors(){return ze(this,"highlightColors",l(this,ml)?new Map(l(this,ml).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return ze(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){A(this,kc,e)}editAltText(e,t=!1){var i;(i=l(this,dl))==null||i.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":A(this,gl,t);break}}onPageChanging({pageNumber:e}){A(this,pl,e-1)}focusMainContainer(){l(this,Ss).focus()}findParent(e,t){for(const i of l(this,Wt).values()){const{x:r,y:a,width:u,height:c}=i.div.getBoundingClientRect();if(e>=r&&e<=r+u&&t>=a&&t<=a+c)return i}return null}disableUserSelect(e=!1){l(this,Lc).classList.toggle("noUserSelect",e)}addShouldRescale(e){l(this,Co).add(e)}removeShouldRescale(e){l(this,Co).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Xr.PDF_TO_CSS_UNITS;for(const t of l(this,Co))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:a,focusOffset:u}=t,c=t.toString(),p=E(this,Z,rf).call(this,t).closest(".textLayer"),m=this.getSelectionBoxes(p);if(!m)return;t.empty();const v=E(this,Z,_m).call(this,p),w=l(this,Ht)===Pe.NONE,_=()=>{v==null||v.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:m,anchorNode:i,anchorOffset:r,focusNode:a,focusOffset:u,text:c}),w&&this.showAllEditors("highlight",!0,!0)};if(w){this.switchToMode(Pe.HIGHLIGHT,_);return}_()}addToAnnotationStorage(e){!e.isEmpty()&&l(this,As)&&!l(this,As).has(e.id)&&l(this,As).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,l(this,br)&&(A(this,br,!1),E(this,Z,of).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of l(this,Ge))if(t.div.contains(e)){A(this,ko,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!l(this,ko))return;const[e,t]=l(this,ko);A(this,ko,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){E(this,Z,Sm).call(this),E(this,Z,Em).call(this)}removeEditListeners(){E(this,Z,BA).call(this),E(this,Z,bm).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const i of l(this,Ai))if(i.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const i of l(this,Ai))if(i.isHandlingMimeForPasting(t.type)){i.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var i;if(e.preventDefault(),(i=l(this,Dn))==null||i.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of l(this,Ge)){const a=r.serialize(!0);a&&t.push(a)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const a of t.items)for(const u of l(this,Ai))if(u.isHandlingMimeForPasting(a.type)){u.paste(a,this.currentLayer);return}let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(a){Me(`paste: "${a.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const r=this.currentLayer;try{const a=[];for(const d of i){const p=await r.deserialize(d);if(!p)return;a.push(p)}const u=()=>{for(const d of a)E(this,Z,xm).call(this,d);E(this,Z,Cm).call(this,a)},c=()=>{for(const d of a)d.remove()};this.addCommands({cmd:u,undo:c,mustExec:!0})}catch(a){Me(`paste: "${a.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,Ht)!==Pe.NONE&&!this.isEditorHandlingKeyboard&&sl._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,br)&&(A(this,br,!1),E(this,Z,of).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(E(this,Z,HA).call(this),E(this,Z,Em).call(this),E(this,Z,hn).call(this,{isEditing:l(this,Ht)!==Pe.NONE,isEmpty:E(this,Z,Ju).call(this),hasSomethingToUndo:l(this,wi).hasSomethingToUndo(),hasSomethingToRedo:l(this,wi).hasSomethingToRedo(),hasSelectedEditor:!1})):(E(this,Z,jA).call(this),E(this,Z,bm).call(this),E(this,Z,hn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!l(this,Ai)){A(this,Ai,e);for(const t of l(this,Ai))E(this,Z,yr).call(this,t.defaultPropertiesToUpdate)}}getId(){return l(this,jf).id}get currentLayer(){return l(this,Wt).get(l(this,pl))}getLayer(e){return l(this,Wt).get(e)}get currentPageIndex(){return l(this,pl)}addLayer(e){l(this,Wt).set(e.pageIndex,e),l(this,xr)?e.enable():e.disable()}removeLayer(e){l(this,Wt).delete(e.pageIndex)}async updateMode(e,t=null,i=!1){if(l(this,Ht)!==e&&!(l(this,Zn)&&(await l(this,Zn).promise,!l(this,Zn)))){if(A(this,Zn,Promise.withResolvers()),A(this,Ht,e),e===Pe.NONE){this.setEditingState(!1),E(this,Z,$A).call(this),l(this,Zn).resolve();return}this.setEditingState(!0),await E(this,Z,VA).call(this),this.unselectAll();for(const r of l(this,Wt).values())r.updateMode(e);if(!t){i&&this.addNewEditorFromKeyboard(),l(this,Zn).resolve();return}for(const r of l(this,Tt).values())r.annotationElementId===t?(this.setSelected(r),r.enterInEditMode()):r.unselect();l(this,Zn).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==l(this,Ht)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var i;if(l(this,Ai)){switch(e){case xe.CREATE:this.currentLayer.addNewEditor();return;case xe.HIGHLIGHT_DEFAULT_COLOR:(i=l(this,kc))==null||i.updateColor(t);break;case xe.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,Pc)||A(this,Pc,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const r of l(this,Ge))r.updateParams(e,t);for(const r of l(this,Ai))r.updateDefaultParams(e,t)}}showAllEditors(e,t,i=!1){var a;for(const u of l(this,Tt).values())u.editorType===e&&u.show(t);(((a=l(this,Pc))==null?void 0:a.get(xe.HIGHLIGHT_SHOW_ALL))??!0)!==t&&E(this,Z,yr).call(this,[[xe.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(l(this,Cc)!==e){A(this,Cc,e);for(const t of l(this,Wt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const i of l(this,Tt).values())i.pageIndex===e&&t.push(i);return t}getEditor(e){return l(this,Tt).get(e)}addEditor(e){l(this,Tt).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(l(this,Ui)&&clearTimeout(l(this,Ui)),A(this,Ui,setTimeout(()=>{this.focusMainContainer(),A(this,Ui,null)},0))),l(this,Tt).delete(e.id),this.unselect(e),(!e.annotationElementId||!l(this,xo).has(e.annotationElementId))&&((t=l(this,As))==null||t.remove(e.id))}addDeletedAnnotationElement(e){l(this,xo).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return l(this,xo).has(e)}removeDeletedAnnotationElement(e){l(this,xo).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){l(this,Dn)!==e&&(A(this,Dn,e),e&&E(this,Z,yr).call(this,e.propertiesToUpdate))}updateUI(e){l(this,Z,WA)===e&&E(this,Z,yr).call(this,e.propertiesToUpdate)}toggleSelected(e){if(l(this,Ge).has(e)){l(this,Ge).delete(e),e.unselect(),E(this,Z,hn).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,Ge).add(e),e.select(),E(this,Z,yr).call(this,e.propertiesToUpdate),E(this,Z,hn).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of l(this,Ge))t!==e&&t.unselect();l(this,Ge).clear(),l(this,Ge).add(e),e.select(),E(this,Z,yr).call(this,e.propertiesToUpdate),E(this,Z,hn).call(this,{hasSelectedEditor:!0})}isSelected(e){return l(this,Ge).has(e)}get firstSelectedEditor(){return l(this,Ge).values().next().value}unselect(e){e.unselect(),l(this,Ge).delete(e),E(this,Z,hn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,Ge).size!==0}get isEnterHandled(){return l(this,Ge).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){l(this,wi).undo(),E(this,Z,hn).call(this,{hasSomethingToUndo:l(this,wi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:E(this,Z,Ju).call(this)})}redo(){l(this,wi).redo(),E(this,Z,hn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,wi).hasSomethingToRedo(),isEmpty:E(this,Z,Ju).call(this)})}addCommands(e){l(this,wi).add(e),E(this,Z,hn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:E(this,Z,Ju).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...l(this,Ge)],t=()=>{for(const r of e)r.remove()},i=()=>{for(const r of e)E(this,Z,xm).call(this,r)};this.addCommands({cmd:t,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=l(this,Dn))==null||e.commitOrRemove()}hasSomethingToControl(){return l(this,Dn)||this.hasSelection}selectAll(){for(const e of l(this,Ge))e.commit();E(this,Z,Cm).call(this,l(this,Tt).values())}unselectAll(){if(!(l(this,Dn)&&(l(this,Dn).commitOrRemove(),l(this,Ht)!==Pe.NONE))&&this.hasSelection){for(const e of l(this,Ge))e.unselect();l(this,Ge).clear(),E(this,Z,hn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;l(this,kr)[0]+=e,l(this,kr)[1]+=t;const[r,a]=l(this,kr),u=[...l(this,Ge)],c=1e3;l(this,$i)&&clearTimeout(l(this,$i)),A(this,$i,setTimeout(()=>{A(this,$i,null),l(this,kr)[0]=l(this,kr)[1]=0,this.addCommands({cmd:()=>{for(const d of u)l(this,Tt).has(d.id)&&d.translateInPage(r,a)},undo:()=>{for(const d of u)l(this,Tt).has(d.id)&&d.translateInPage(-r,-a)},mustExec:!1})},c));for(const d of u)d.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),A(this,Bi,new Map);for(const e of l(this,Ge))l(this,Bi).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,Bi))return!1;this.disableUserSelect(!1);const e=l(this,Bi);A(this,Bi,null);let t=!1;for(const[{x:r,y:a,pageIndex:u},c]of e)c.newX=r,c.newY=a,c.newPageIndex=u,t||(t=r!==c.savedX||a!==c.savedY||u!==c.savedPageIndex);if(!t)return!1;const i=(r,a,u,c)=>{if(l(this,Tt).has(r.id)){const d=l(this,Wt).get(c);d?r._setParentAndPosition(d,a,u):(r.pageIndex=c,r.x=a,r.y=u)}};return this.addCommands({cmd:()=>{for(const[r,{newX:a,newY:u,newPageIndex:c}]of e)i(r,a,u,c)},undo:()=>{for(const[r,{savedX:a,savedY:u,savedPageIndex:c}]of e)i(r,a,u,c)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(l(this,Bi))for(const i of l(this,Bi).keys())i.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||l(this,Ge).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return l(this,Dn)===e}getActive(){return l(this,Dn)}getMode(){return l(this,Ht)}get imageManager(){return ze(this,"imageManager",new wm)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let p=0,m=t.rangeCount;p<m;p++)if(!e.contains(t.getRangeAt(p).commonAncestorContainer))return null;const{x:i,y:r,width:a,height:u}=e.getBoundingClientRect();let c;switch(e.getAttribute("data-main-rotation")){case"90":c=(p,m,v,w)=>({x:(m-r)/u,y:1-(p+v-i)/a,width:w/u,height:v/a});break;case"180":c=(p,m,v,w)=>({x:1-(p+v-i)/a,y:1-(m+w-r)/u,width:v/a,height:w/u});break;case"270":c=(p,m,v,w)=>({x:1-(m+w-r)/u,y:(p-i)/a,width:w/u,height:v/a});break;default:c=(p,m,v,w)=>({x:(p-i)/a,y:(m-r)/u,width:v/a,height:w/u});break}const d=[];for(let p=0,m=t.rangeCount;p<m;p++){const v=t.getRangeAt(p);if(!v.collapsed)for(const{x:w,y:_,width:b,height:C}of v.getClientRects())b===0||C===0||d.push(c(w,_,b,C))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:e,id:t}){(l(this,fl)||A(this,fl,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=l(this,fl))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=l(this,fl))==null?void 0:r.get(e.data.id);if(!t)return;const i=l(this,As).getRawValue(t);i&&(l(this,Ht)===Pe.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}};hl=new WeakMap,Dn=new WeakMap,Tt=new WeakMap,Wt=new WeakMap,dl=new WeakMap,As=new WeakMap,fl=new WeakMap,wi=new WeakMap,Sr=new WeakMap,pl=new WeakMap,xo=new WeakMap,Bi=new WeakMap,Ai=new WeakMap,Co=new WeakMap,Ec=new WeakMap,bc=new WeakMap,gl=new WeakMap,xc=new WeakMap,Ui=new WeakMap,Er=new WeakMap,ml=new WeakMap,br=new WeakMap,Vi=new WeakMap,jf=new WeakMap,xr=new WeakMap,Cc=new WeakMap,Cr=new WeakMap,ko=new WeakMap,kc=new WeakMap,Tc=new WeakMap,Ht=new WeakMap,Ge=new WeakMap,_s=new WeakMap,To=new WeakMap,Pc=new WeakMap,Rc=new WeakMap,kr=new WeakMap,$i=new WeakMap,Ss=new WeakMap,Lc=new WeakMap,Zn=new WeakMap,Z=new WeakSet,rf=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},_m=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const i of l(this,Wt).values())if(i.hasTextLayer(e))return i;return null},NA=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=E(this,Z,rf).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(i);r&&(l(this,Vi)||A(this,Vi,new S1(this)),l(this,Vi).show(i,r,this.direction==="ltr"))},OA=function(){var a,u,c;const e=document.getSelection();if(!e||e.isCollapsed){l(this,_s)&&((a=l(this,Vi))==null||a.hide(),A(this,_s,null),E(this,Z,hn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===l(this,_s))return;const r=E(this,Z,rf).call(this,e).closest(".textLayer");if(!r){l(this,_s)&&((u=l(this,Vi))==null||u.hide(),A(this,_s,null),E(this,Z,hn).call(this,{hasSelectedText:!1}));return}if((c=l(this,Vi))==null||c.hide(),A(this,_s,t),E(this,Z,hn).call(this,{hasSelectedText:!0}),!(l(this,Ht)!==Pe.HIGHLIGHT&&l(this,Ht)!==Pe.NONE)&&(l(this,Ht)===Pe.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),A(this,br,this.isShiftKeyDown),!this.isShiftKeyDown)){const d=l(this,Ht)===Pe.HIGHLIGHT?E(this,Z,_m).call(this,r):null;d==null||d.toggleDrawing();const p=new AbortController,m=this.combinedSignal(p),v=w=>{w.type==="pointerup"&&w.button!==0||(p.abort(),d==null||d.toggleDrawing(!0),w.type==="pointerup"&&E(this,Z,of).call(this,"main_toolbar"))};window.addEventListener("pointerup",v,{signal:m}),window.addEventListener("blur",v,{signal:m})}},of=function(e=""){l(this,Ht)===Pe.HIGHLIGHT?this.highlightSelection(e):l(this,Ec)&&E(this,Z,NA).call(this)},zA=function(){document.addEventListener("selectionchange",E(this,Z,OA).bind(this),{signal:this._signal})},HA=function(){if(l(this,Er))return;A(this,Er,new AbortController);const e=this.combinedSignal(l(this,Er));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},jA=function(){var e;(e=l(this,Er))==null||e.abort(),A(this,Er,null)},Sm=function(){if(l(this,Cr))return;A(this,Cr,new AbortController);const e=this.combinedSignal(l(this,Cr));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},BA=function(){var e;(e=l(this,Cr))==null||e.abort(),A(this,Cr,null)},Em=function(){if(l(this,Sr))return;A(this,Sr,new AbortController);const e=this.combinedSignal(l(this,Sr));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},bm=function(){var e;(e=l(this,Sr))==null||e.abort(),A(this,Sr,null)},UA=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},hn=function(e){Object.entries(e).some(([i,r])=>l(this,Rc)[i]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,Rc),e)}),l(this,Ht)===Pe.HIGHLIGHT&&e.hasSelectedEditor===!1&&E(this,Z,yr).call(this,[[xe.HIGHLIGHT_FREE,!0]]))},yr=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},VA=async function(){if(!l(this,xr)){A(this,xr,!0);const e=[];for(const t of l(this,Wt).values())e.push(t.enable());await Promise.all(e);for(const t of l(this,Tt).values())t.enable()}},$A=function(){if(this.unselectAll(),l(this,xr)){A(this,xr,!1);for(const e of l(this,Wt).values())e.disable();for(const e of l(this,Tt).values())e.disable()}},xm=function(e){const t=l(this,Wt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},WA=function(){let e=null;for(e of l(this,Ge));return e},Ju=function(){if(l(this,Tt).size===0)return!0;if(l(this,Tt).size===1)for(const e of l(this,Tt).values())return e.isEmpty();return!1},Cm=function(e){for(const t of l(this,Ge))t.unselect();l(this,Ge).clear();for(const t of e)t.isEmpty()||(l(this,Ge).add(t),t.select());E(this,Z,hn).call(this,{hasSelectedEditor:this.hasSelection})},be(sl,"TRANSLATE_SMALL",1),be(sl,"TRANSLATE_BIG",10);let va=sl;var jt,Wi,_i,yl,Gi,Nn,vl,Xi,xn,Es,Po,qi,Tr,Li,Zu,af;const dn=class dn{constructor(e){x(this,Li);x(this,jt,null);x(this,Wi,!1);x(this,_i,null);x(this,yl,null);x(this,Gi,null);x(this,Nn,null);x(this,vl,!1);x(this,Xi,null);x(this,xn,null);x(this,Es,null);x(this,Po,null);x(this,qi,!1);A(this,xn,e),A(this,qi,e._uiManager.useNewAltTextFlow),l(dn,Tr)||A(dn,Tr,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){dn._l10n??(dn._l10n=e)}async render(){const e=A(this,_i,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=A(this,yl,document.createElement("span"));e.append(t),l(this,qi)?(e.classList.add("new"),e.setAttribute("data-l10n-id",l(dn,Tr).missing),t.setAttribute("data-l10n-id",l(dn,Tr)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=l(this,xn)._uiManager._signal;e.addEventListener("contextmenu",ai,{signal:i}),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:i});const r=a=>{a.preventDefault(),l(this,xn)._uiManager.editAltText(l(this,xn)),l(this,qi)&&l(this,xn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,Li,Zu)}})};return e.addEventListener("click",r,{capture:!0,signal:i}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(A(this,vl,!0),r(a))},{signal:i}),await E(this,Li,af).call(this),e}finish(){l(this,_i)&&(l(this,_i).focus({focusVisible:l(this,vl)}),A(this,vl,!1))}isEmpty(){return l(this,qi)?l(this,jt)===null:!l(this,jt)&&!l(this,Wi)}hasData(){return l(this,qi)?l(this,jt)!==null||!!l(this,Es):this.isEmpty()}get guessedText(){return l(this,Es)}async setGuessedText(e){l(this,jt)===null&&(A(this,Es,e),A(this,Po,await dn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),E(this,Li,af).call(this))}toggleAltTextBadge(e=!1){var t;if(!l(this,qi)||l(this,jt)){(t=l(this,Xi))==null||t.remove(),A(this,Xi,null);return}if(!l(this,Xi)){const i=A(this,Xi,document.createElement("div"));i.className="noAltTextBadge",l(this,xn).div.append(i)}l(this,Xi).classList.toggle("hidden",!e)}serialize(e){let t=l(this,jt);return!e&&l(this,Es)===t&&(t=l(this,Po)),{altText:t,decorative:l(this,Wi),guessedText:l(this,Es),textWithDisclaimer:l(this,Po)}}get data(){return{altText:l(this,jt),decorative:l(this,Wi)}}set data({altText:e,decorative:t,guessedText:i,textWithDisclaimer:r,cancel:a=!1}){i&&(A(this,Es,i),A(this,Po,r)),!(l(this,jt)===e&&l(this,Wi)===t)&&(a||(A(this,jt,e),A(this,Wi,t)),E(this,Li,af).call(this))}toggle(e=!1){l(this,_i)&&(!e&&l(this,Nn)&&(clearTimeout(l(this,Nn)),A(this,Nn,null)),l(this,_i).disabled=!e)}shown(){l(this,xn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,Li,Zu)}})}destroy(){var e,t;(e=l(this,_i))==null||e.remove(),A(this,_i,null),A(this,yl,null),A(this,Gi,null),(t=l(this,Xi))==null||t.remove(),A(this,Xi,null)}};jt=new WeakMap,Wi=new WeakMap,_i=new WeakMap,yl=new WeakMap,Gi=new WeakMap,Nn=new WeakMap,vl=new WeakMap,Xi=new WeakMap,xn=new WeakMap,Es=new WeakMap,Po=new WeakMap,qi=new WeakMap,Tr=new WeakMap,Li=new WeakSet,Zu=function(){return l(this,jt)&&"added"||l(this,jt)===null&&this.guessedText&&"review"||"missing"},af=async function(){var r,a,u;const e=l(this,_i);if(!e)return;if(l(this,qi)){if(e.classList.toggle("done",!!l(this,jt)),e.setAttribute("data-l10n-id",l(dn,Tr)[l(this,Li,Zu)]),(r=l(this,yl))==null||r.setAttribute("data-l10n-id",l(dn,Tr)[`${l(this,Li,Zu)}-label`]),!l(this,jt)){(a=l(this,Gi))==null||a.remove();return}}else{if(!l(this,jt)&&!l(this,Wi)){e.classList.remove("done"),(u=l(this,Gi))==null||u.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=l(this,Gi);if(!t){A(this,Gi,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${l(this,xn).id}`;const c=100,d=l(this,xn)._uiManager._signal;d.addEventListener("abort",()=>{clearTimeout(l(this,Nn)),A(this,Nn,null)},{once:!0}),e.addEventListener("mouseenter",()=>{A(this,Nn,setTimeout(()=>{A(this,Nn,null),l(this,Gi).classList.add("show"),l(this,xn)._reportTelemetry({action:"alt_text_tooltip"})},c))},{signal:d}),e.addEventListener("mouseleave",()=>{var p;l(this,Nn)&&(clearTimeout(l(this,Nn)),A(this,Nn,null)),(p=l(this,Gi))==null||p.classList.remove("show")},{signal:d})}l(this,Wi)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=l(this,jt)),t.parentNode||e.append(t);const i=l(this,xn).getImageForAltText();i==null||i.setAttribute("aria-describedby",t.id)},x(dn,Tr,null),be(dn,"_l10n",null);let Mf=dn;var Ro,Si,ut,wl,Lo,Gt,Mo,Pr,Mc,Io,Rr,Ic,Fo,bs,Yi,Al,_l,ei,Fc,Bf,Le,km,Dc,Tm,Pm,GA,XA,Rm,Lm,Mm,qA,Im,YA,KA,QA,Fm,ec;const $e=class $e{constructor(e){x(this,Le);x(this,Ro,null);x(this,Si,null);x(this,ut,null);x(this,wl,!1);x(this,Lo,!1);x(this,Gt,null);x(this,Mo,null);x(this,Pr,null);x(this,Mc,"");x(this,Io,!1);x(this,Rr,null);x(this,Ic,!1);x(this,Fo,!1);x(this,bs,!1);x(this,Yi,null);x(this,Al,0);x(this,_l,0);x(this,ei,null);be(this,"_editToolbar",null);be(this,"_initialOptions",Object.create(null));be(this,"_initialData",null);be(this,"_isVisible",!0);be(this,"_uiManager",null);be(this,"_focusEventsAllowed",!0);x(this,Fc,!1);x(this,Bf,$e._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:i,pageHeight:r,pageX:a,pageY:u}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[a,u];const[c,d]=this.parentDimensions;this.x=e.x/c,this.y=e.y/d,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=$e.prototype._resizeWithKeyboard,t=va.TRANSLATE_SMALL,i=va.TRANSLATE_BIG;return ze(this,"_resizerKeyboardManager",new Ih([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],$e.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return ze(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new C1({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if($e._l10n??($e._l10n=e),$e._l10nResizer||($e._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),$e._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);$e._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){nt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,Fc)}set _isDraggable(e){var t;A(this,Fc,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,Bf)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):E(this,Le,ec).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(l(this,Io)?A(this,Io,!1):this.parent.setSelected(this))}focusout(e){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,r){const[a,u]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(e+i)/a,this.y=(t+r)/u,this.fixAndSetPosition()}translate(e,t){E(this,Le,km).call(this,this.parentDimensions,e,t)}translateInPage(e,t){l(this,Rr)||A(this,Rr,[this.x,this.y]),E(this,Le,km).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){l(this,Rr)||A(this,Rr,[this.x,this.y]);const[i,r]=this.parentDimensions;if(this.x+=e/i,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:p,y:m}=this.div.getBoundingClientRect();this.parent.findNewParent(this,p,m)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:u}=this;const[c,d]=this.getBaseTranslation();a+=c,u+=d,this.div.style.left=`${(100*a).toFixed(2)}%`,this.div.style.top=`${(100*u).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!l(this,Rr)&&(l(this,Rr)[0]!==this.x||l(this,Rr)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=$e,r=i/e,a=i/t;switch(this.rotation){case 90:return[-r,a];case 180:return[r,a];case 270:return[r,-a];default:return[-r,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,i]=this.pageDimensions;let{x:r,y:a,width:u,height:c}=this;if(u*=t,c*=i,r*=t,a*=i,this._mustFixPosition)switch(e){case 0:r=Math.max(0,Math.min(t-u,r)),a=Math.max(0,Math.min(i-c,a));break;case 90:r=Math.max(0,Math.min(t-c,r)),a=Math.min(i,Math.max(u,a));break;case 180:r=Math.min(t,Math.max(u,r)),a=Math.min(i,Math.max(c,a));break;case 270:r=Math.min(t,Math.max(c,r)),a=Math.max(0,Math.min(i-u,a));break}this.x=r/=t,this.y=a/=i;const[d,p]=this.getBaseTranslation();r+=d,a+=p;const{style:m}=this.div;m.left=`${(100*r).toFixed(2)}%`,m.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var i;return E(i=$e,Dc,Tm).call(i,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var i;return E(i=$e,Dc,Tm).call(i,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this;return[t*e,i*e]}setDims(e,t){const[i,r]=this.parentDimensions;this.div.style.width=`${(100*e/i).toFixed(2)}%`,l(this,Lo)||(this.div.style.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:i}=e,r=i.endsWith("%"),a=!l(this,Lo)&&t.endsWith("%");if(r&&a)return;const[u,c]=this.parentDimensions;r||(e.width=`${(100*parseFloat(i)/u).toFixed(2)}%`),!l(this,Lo)&&!a&&(e.height=`${(100*parseFloat(t)/c).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=l(this,ut))==null||e.finish()}async addEditToolbar(){return this._editToolbar||l(this,Fo)?this._editToolbar:(this._editToolbar=new ym(this),this.div.append(this._editToolbar.render()),l(this,ut)&&await this._editToolbar.addAltText(l(this,ut)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=l(this,ut))==null||e.destroy())}addContainer(e){var i;const t=(i=this._editToolbar)==null?void 0:i.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){l(this,ut)||(Mf.initialize($e._l10n),A(this,ut,new Mf(this)),l(this,Ro)&&(l(this,ut).data=l(this,Ro),A(this,Ro,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=l(this,ut))==null?void 0:e.data}set altTextData(e){l(this,ut)&&(l(this,ut).data=e)}get guessedAltText(){var e;return(e=l(this,ut))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=l(this,ut))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=l(this,ut))==null?void 0:t.serialize(e)}hasAltText(){return!!l(this,ut)&&!l(this,ut).isEmpty()}hasAltTextData(){var e;return((e=l(this,ut))==null?void 0:e.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=l(this,wl)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),E(this,Le,Im).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),Lf(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=pn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(A(this,Io,!0),this._isDraggable){E(this,Le,qA).call(this,e);return}E(this,Le,Mm).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){l(this,Yi)&&clearTimeout(l(this,Yi)),A(this,Yi,setTimeout(()=>{var e;A(this,Yi,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition()}getRect(e,t,i=this.rotation){const r=this.parentScale,[a,u]=this.pageDimensions,[c,d]=this.pageTranslation,p=e/r,m=t/r,v=this.x*a,w=this.y*u,_=this.width*a,b=this.height*u;switch(i){case 0:return[v+p+c,u-w-m-b+d,v+p+_+c,u-w-m+d];case 90:return[v+m+c,u-w+p+d,v+m+b+c,u-w+p+_+d];case 180:return[v-p-_+c,u-w+m+d,v-p+c,u-w+m+b+d];case 270:return[v-m-b+c,u-w-p-_+d,v-m+c,u-w-p+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,r,a,u]=e,c=a-i,d=u-r;switch(this.rotation){case 0:return[i,t-u,c,d];case 90:return[i,t-r,d,c];case 180:return[a,t-r,c,d];case 270:return[a,t-u,d,c];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){A(this,Fo,!0)}disableEditMode(){A(this,Fo,!1)}isInEditMode(){return l(this,Fo)}shouldGetKeyboardEvents(){return l(this,bs)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){E(this,Le,Im).call(this)}rotate(e){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){nt("An editor must be serializable")}static async deserialize(e,t,i){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});r.rotation=e.rotation,A(r,Ro,e.accessibilityData);const[a,u]=r.pageDimensions,[c,d,p,m]=r.getRectInCurrentCoords(e.rect,u);return r.x=c/a,r.y=d/u,r.width=p/a,r.height=m/u,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e;if((e=l(this,Pr))==null||e.abort(),A(this,Pr,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),l(this,Yi)&&(clearTimeout(l(this,Yi)),A(this,Yi,null)),E(this,Le,ec).call(this),this.removeEditToolbar(),l(this,ei)){for(const t of l(this,ei).values())clearTimeout(t);A(this,ei,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(E(this,Le,GA).call(this),l(this,Gt).classList.remove("hidden"),Lf(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),A(this,Mo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=l(this,Gt).children;if(!l(this,Si)){A(this,Si,Array.from(t));const u=E(this,Le,YA).bind(this),c=E(this,Le,KA).bind(this),d=this._uiManager._signal;for(const p of l(this,Si)){const m=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",u,{signal:d}),p.addEventListener("blur",c,{signal:d}),p.addEventListener("focus",E(this,Le,QA).bind(this,m),{signal:d}),p.setAttribute("data-l10n-id",$e._l10nResizer[m])}}const i=l(this,Si)[0];let r=0;for(const u of t){if(u===i)break;r++}const a=(360-this.rotation+this.parentRotation)%360/90*(l(this,Si).length/4);if(a!==r){if(a<r)for(let c=0;c<r-a;c++)l(this,Gt).append(l(this,Gt).firstChild);else if(a>r)for(let c=0;c<a-r;c++)l(this,Gt).firstChild.before(l(this,Gt).lastChild);let u=0;for(const c of t){const p=l(this,Si)[u++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",$e._l10nResizer[p])}}E(this,Le,Fm).call(this,0),A(this,bs,!0),l(this,Gt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){l(this,bs)&&E(this,Le,Lm).call(this,l(this,Mc),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){E(this,Le,ec).call(this),this.div.focus()}select(){var e,t,i;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,a;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((a=this._editToolbar)==null||a.show())});return}(t=this._editToolbar)==null||t.show(),(i=l(this,ut))==null||i.toggleAltTextBadge(!1)}unselect(){var e,t,i,r,a;(e=l(this,Gt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(a=l(this,ut))==null||a.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return l(this,Ic)}set isEditing(e){A(this,Ic,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){A(this,Lo,!0);const i=e/t,{style:r}=this.div;r.aspectRatio=i,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){l(this,ei)||A(this,ei,new Map);const{action:i}=e;let r=l(this,ei).get(i);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),l(this,ei).delete(i),l(this,ei).size===0&&A(this,ei,null)},$e._telemetryTimeout),l(this,ei).set(i,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),A(this,wl,!1)}disable(){this.div&&(this.div.tabIndex=-1),A(this,wl,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Ro=new WeakMap,Si=new WeakMap,ut=new WeakMap,wl=new WeakMap,Lo=new WeakMap,Gt=new WeakMap,Mo=new WeakMap,Pr=new WeakMap,Mc=new WeakMap,Io=new WeakMap,Rr=new WeakMap,Ic=new WeakMap,Fo=new WeakMap,bs=new WeakMap,Yi=new WeakMap,Al=new WeakMap,_l=new WeakMap,ei=new WeakMap,Fc=new WeakMap,Bf=new WeakMap,Le=new WeakSet,km=function([e,t],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/e,this.y+=r/t,this.fixAndSetPosition()},Dc=new WeakSet,Tm=function(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Pm=function(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}},GA=function(){if(l(this,Gt))return;A(this,Gt,document.createElement("div")),l(this,Gt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const i of e){const r=document.createElement("div");l(this,Gt).append(r),r.classList.add("resizer",i),r.setAttribute("data-resizer-name",i),r.addEventListener("pointerdown",E(this,Le,XA).bind(this,i),{signal:t}),r.addEventListener("contextmenu",ai,{signal:t}),r.tabIndex=-1}this.div.prepend(l(this,Gt))},XA=function(e,t){var b;t.preventDefault();const{isMac:i}=pn.platform;if(t.button!==0||t.ctrlKey&&i)return;(b=l(this,ut))==null||b.toggle(!1);const r=this._isDraggable;this._isDraggable=!1;const a=new AbortController,u=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",E(this,Le,Lm).bind(this,e),{passive:!0,capture:!0,signal:u}),window.addEventListener("contextmenu",ai,{signal:u});const c=this.x,d=this.y,p=this.width,m=this.height,v=this.parent.div.style.cursor,w=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const _=()=>{var C;a.abort(),this.parent.togglePointerEvents(!0),(C=l(this,ut))==null||C.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=v,this.div.style.cursor=w,E(this,Le,Rm).call(this,c,d,p,m)};window.addEventListener("pointerup",_,{signal:u}),window.addEventListener("blur",_,{signal:u})},Rm=function(e,t,i,r){const a=this.x,u=this.y,c=this.width,d=this.height;a===e&&u===t&&c===i&&d===r||this.addCommands({cmd:()=>{this.width=c,this.height=d,this.x=a,this.y=u;const[p,m]=this.parentDimensions;this.setDims(p*c,m*d),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=r,this.x=e,this.y=t;const[p,m]=this.parentDimensions;this.setDims(p*i,m*r),this.fixAndSetPosition()},mustExec:!0})},Lm=function(e,t){const[i,r]=this.parentDimensions,a=this.x,u=this.y,c=this.width,d=this.height,p=$e.MIN_SIZE/i,m=$e.MIN_SIZE/r,v=Y=>Math.round(Y*1e4)/1e4,w=E(this,Le,Pm).call(this,this.rotation),_=(Y,B)=>[w[0]*Y+w[2]*B,w[1]*Y+w[3]*B],b=E(this,Le,Pm).call(this,360-this.rotation),C=(Y,B)=>[b[0]*Y+b[2]*B,b[1]*Y+b[3]*B];let P,k,I=!1,D=!1;switch(e){case"topLeft":I=!0,P=(Y,B)=>[0,0],k=(Y,B)=>[Y,B];break;case"topMiddle":P=(Y,B)=>[Y/2,0],k=(Y,B)=>[Y/2,B];break;case"topRight":I=!0,P=(Y,B)=>[Y,0],k=(Y,B)=>[0,B];break;case"middleRight":D=!0,P=(Y,B)=>[Y,B/2],k=(Y,B)=>[0,B/2];break;case"bottomRight":I=!0,P=(Y,B)=>[Y,B],k=(Y,B)=>[0,0];break;case"bottomMiddle":P=(Y,B)=>[Y/2,B],k=(Y,B)=>[Y/2,0];break;case"bottomLeft":I=!0,P=(Y,B)=>[0,B],k=(Y,B)=>[Y,0];break;case"middleLeft":D=!0,P=(Y,B)=>[0,B/2],k=(Y,B)=>[Y,B/2];break}const F=P(c,d),j=k(c,d);let H=_(...j);const V=v(a+H[0]),$=v(u+H[1]);let K=1,te=1,[ee,Se]=this.screenToPageTranslation(t.movementX,t.movementY);if([ee,Se]=C(ee/i,Se/r),I){const Y=Math.hypot(c,d);K=te=Math.max(Math.min(Math.hypot(j[0]-F[0]-ee,j[1]-F[1]-Se)/Y,1/c,1/d),p/c,m/d)}else D?K=Math.max(p,Math.min(1,Math.abs(j[0]-F[0]-ee)))/c:te=Math.max(m,Math.min(1,Math.abs(j[1]-F[1]-Se)))/d;const de=v(c*K),ce=v(d*te);H=_(...k(de,ce));const ve=V-H[0],pe=$-H[1];this.width=de,this.height=ce,this.x=ve,this.y=pe,this.setDims(i*de,r*ce),this.fixAndSetPosition()},Mm=function(e){const{isMac:t}=pn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},qA=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();const i=new AbortController,r=this._uiManager.combinedSignal(i);if(t){this.div.classList.add("moving"),A(this,Al,e.clientX),A(this,_l,e.clientY);const u=c=>{const{clientX:d,clientY:p}=c,[m,v]=this.screenToPageTranslation(d-l(this,Al),p-l(this,_l));A(this,Al,d),A(this,_l,p),this._uiManager.dragSelectedEditors(m,v)};window.addEventListener("pointermove",u,{passive:!0,capture:!0,signal:r})}const a=()=>{i.abort(),t&&this.div.classList.remove("moving"),A(this,Io,!1),this._uiManager.endDragSession()||E(this,Le,Mm).call(this,e)};window.addEventListener("pointerup",a,{signal:r}),window.addEventListener("blur",a,{signal:r})},Im=function(){if(l(this,Pr)||!this.div)return;A(this,Pr,new AbortController);const e=this._uiManager.combinedSignal(l(this,Pr));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},YA=function(e){$e._resizerKeyboardManager.exec(this,e)},KA=function(e){var t;l(this,bs)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==l(this,Gt)&&E(this,Le,ec).call(this)},QA=function(e){A(this,Mc,l(this,bs)?e:"")},Fm=function(e){if(l(this,Si))for(const t of l(this,Si))t.tabIndex=e},ec=function(){if(A(this,bs,!1),E(this,Le,Fm).call(this,-1),l(this,Mo)){const{savedX:e,savedY:t,savedWidth:i,savedHeight:r}=l(this,Mo);E(this,Le,Rm).call(this,e,t,i,r),A(this,Mo,null)}},x($e,Dc),be($e,"_l10n",null),be($e,"_l10nResizer",null),be($e,"_borderLineWidth",-1),be($e,"_colorManager",new Am),be($e,"_zIndex",1),be($e,"_telemetryTimeout",1e3);let qe=$e;class C1 extends qe{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Yw=3285377520,Jn=4294901760,ji=65535;class JA{constructor(e){this.h1=e?e&4294967295:Yw,this.h2=e?e&4294967295:Yw}update(e){let t,i;if(typeof e=="string"){t=new Uint8Array(e.length*2),i=0;for(let C=0,P=e.length;C<P;C++){const k=e.charCodeAt(C);k<=255?t[i++]=k:(t[i++]=k>>>8,t[i++]=k&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),i=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=i>>2,a=i-r*4,u=new Uint32Array(t.buffer,0,r);let c=0,d=0,p=this.h1,m=this.h2;const v=3432918353,w=461845907,_=v&ji,b=w&ji;for(let C=0;C<r;C++)C&1?(c=u[C],c=c*v&Jn|c*_&ji,c=c<<15|c>>>17,c=c*w&Jn|c*b&ji,p^=c,p=p<<13|p>>>19,p=p*5+3864292196):(d=u[C],d=d*v&Jn|d*_&ji,d=d<<15|d>>>17,d=d*w&Jn|d*b&ji,m^=d,m=m<<13|m>>>19,m=m*5+3864292196);switch(c=0,a){case 3:c^=t[r*4+2]<<16;case 2:c^=t[r*4+1]<<8;case 1:c^=t[r*4],c=c*v&Jn|c*_&ji,c=c<<15|c>>>17,c=c*w&Jn|c*b&ji,r&1?p^=c:m^=c}this.h1=p,this.h2=m}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Jn|e*36045&ji,t=t*4283543511&Jn|((t<<16|e>>>16)*2950163797&Jn)>>>16,e^=t>>>1,e=e*444984403&Jn|e*60499&ji,t=t*3301882366&Jn|((t<<16|e>>>16)*3120437893&Jn)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Dm=Object.freeze({map:null,hash:"",transfer:void 0});var Do,No,Bt,Uf,ZA;class Hy{constructor(){x(this,Uf);x(this,Do,!1);x(this,No,null);x(this,Bt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=l(this,Bt).get(e);return i===void 0?t:Object.assign(t,i)}getRawValue(e){return l(this,Bt).get(e)}remove(e){if(l(this,Bt).delete(e),l(this,Bt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of l(this,Bt).values())if(t instanceof qe)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=l(this,Bt).get(e);let r=!1;if(i!==void 0)for(const[a,u]of Object.entries(t))i[a]!==u&&(r=!0,i[a]=u);else r=!0,l(this,Bt).set(e,t);r&&E(this,Uf,ZA).call(this),t instanceof qe&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return l(this,Bt).has(e)}getAll(){return l(this,Bt).size>0?Iy(l(this,Bt)):null}setAll(e){for(const[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return l(this,Bt).size}resetModified(){l(this,Do)&&(A(this,Do,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new e_(this)}get serializable(){if(l(this,Bt).size===0)return Dm;const e=new Map,t=new JA,i=[],r=Object.create(null);let a=!1;for(const[u,c]of l(this,Bt)){const d=c instanceof qe?c.serialize(!1,r):c;d&&(e.set(u,d),t.update(`${u}:${JSON.stringify(d)}`),a||(a=!!d.bitmap))}if(a)for(const u of e.values())u.bitmap&&i.push(u.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:Dm}get editorStats(){let e=null;const t=new Map;for(const i of l(this,Bt).values()){if(!(i instanceof qe))continue;const r=i.telemetryFinalData;if(!r)continue;const{type:a}=r;t.has(a)||t.set(a,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const u=e[a]||(e[a]=new Map);for(const[c,d]of Object.entries(r)){if(c==="type")continue;let p=u.get(c);p||(p=new Map,u.set(c,p));const m=p.get(d)??0;p.set(d,m+1)}}for(const[i,r]of t)e[i]=r.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){A(this,No,null)}get modifiedIds(){if(l(this,No))return l(this,No);const e=[];for(const t of l(this,Bt).values())!(t instanceof qe)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return A(this,No,{ids:new Set(e),hash:e.join(",")})}}Do=new WeakMap,No=new WeakMap,Bt=new WeakMap,Uf=new WeakSet,ZA=function(){l(this,Do)||(A(this,Do,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Nc;class e_ extends Hy{constructor(t){super();x(this,Nc);const{map:i,hash:r,transfer:a}=t.serializable,u=structuredClone(i,a?{transfer:a}:null);A(this,Nc,{map:u,hash:r,transfer:a})}get print(){nt("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,Nc)}get modifiedIds(){return ze(this,"modifiedIds",{ids:new Set,hash:""})}}Nc=new WeakMap;var Sl;class k1{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){x(this,Sl,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),l(this,Sl).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||l(this,Sl).has(e.loadedName))){if(Lt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:a}=e,u=new FontFace(i,r,a);this.addNativeFontFace(u);try{await u.load(),l(this,Sl).add(i),t==null||t(e)}catch{Me(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}nt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(r){throw Me(`Failed to load font '${i.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const r=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return ze(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(an||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),ze(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Lt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){const a=i.shift();setTimeout(a.callback,0)}}const{loadingRequests:i}=this,r={done:!1,complete:t,callback:e};return i.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ze(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(F,j){return F.charCodeAt(j)<<24|F.charCodeAt(j+1)<<16|F.charCodeAt(j+2)<<8|F.charCodeAt(j+3)&255}function r(F,j,H,V){const $=F.substring(0,j),K=F.substring(j+H);return $+V+K}let a,u;const c=this._document.createElement("canvas");c.width=1,c.height=1;const d=c.getContext("2d");let p=0;function m(F,j){if(++p>30){Me("Load test font never loaded."),j();return}if(d.font="30px "+F,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){j();return}setTimeout(m.bind(null,F,j))}const v=`lt${Date.now()}${this.loadTestFontId++}`;let w=this._loadTestFont;w=r(w,976,v.length,v);const b=16,C=1482184792;let P=i(w,b);for(a=0,u=v.length-3;a<u;a+=4)P=P-C+i(v,a)|0;a<v.length&&(P=P-C+i(v+"XXX",a)|0),w=r(w,b,4,h1(P));const k=`url(data:font/opentype;base64,${btoa(w)});`,I=`@font-face {font-family:"${v}";src:${k}}`;this.insertRule(I);const D=this._document.createElement("div");D.style.visibility="hidden",D.style.width=D.style.height="10px",D.style.position="absolute",D.style.top=D.style.left="0px";for(const F of[e.loadedName,v]){const j=this._document.createElement("span");j.textContent="Hi",j.style.fontFamily=F,D.append(j)}this._document.body.append(D),m(v,()=>{D.remove(),t.complete()})}}Sl=new WeakMap;class T1{constructor(e,{disableFontFace:t=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this.disableFontFace=t===!0,this._inspectFont=i}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${y1(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(i=this._inspectFont)==null||i.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let i;try{i=e.get(this.loadedName+"_path_"+t)}catch(a){Me(`getPathGenerator - ignoring character: "${a}".`)}if(!Array.isArray(i)||i.length===0)return this.compiledGlyphs[t]=function(a,u){};const r=[];for(let a=0,u=i.length;a<u;)switch(i[a++]){case gs.BEZIER_CURVE_TO:{const[c,d,p,m,v,w]=i.slice(a,a+6);r.push(_=>_.bezierCurveTo(c,d,p,m,v,w)),a+=6}break;case gs.MOVE_TO:{const[c,d]=i.slice(a,a+2);r.push(p=>p.moveTo(c,d)),a+=2}break;case gs.LINE_TO:{const[c,d]=i.slice(a,a+2);r.push(p=>p.lineTo(c,d)),a+=2}break;case gs.QUADRATIC_CURVE_TO:{const[c,d,p,m]=i.slice(a,a+4);r.push(v=>v.quadraticCurveTo(c,d,p,m)),a+=4}break;case gs.RESTORE:r.push(c=>c.restore());break;case gs.SAVE:r.push(c=>c.save());break;case gs.SCALE:Lt(r.length===2,"Scale command is only valid at the third position.");break;case gs.TRANSFORM:{const[c,d,p,m,v,w]=i.slice(a,a+6);r.push(_=>_.transform(c,d,p,m,v,w)),a+=6}break;case gs.TRANSLATE:{const[c,d]=i.slice(a,a+2);r.push(p=>p.translate(c,d)),a+=2}break}return this.compiledGlyphs[t]=function(u,c){r[0](u),r[1](u),u.scale(c,-c);for(let d=2,p=r.length;d<p;d++)r[d](u)}}}var Oc;class t_{constructor({enableHWA:e=!1}){x(this,Oc,!1);A(this,Oc,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!l(this,Oc)})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){nt("Abstract method `_createCanvas` called.")}}Oc=new WeakMap;class P1 extends t_{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}}class n_{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){nt("Abstract method `_fetch` called.")}}class i_ extends n_{async _fetch(e){const t=await sp(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):ip(t)}}class s_{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,r,a){return"none"}destroy(e=!1){}}var Oo,zo,Ki,xs,nn,Vf,Ho,ie,en,Ka,Qa,lf,Ja,r_,Nm,Za,tc,nc,Om,ic;class R1 extends s_{constructor({docId:t,ownerDocument:i=globalThis.document}){super();x(this,ie);x(this,Oo);x(this,zo);x(this,Ki);x(this,xs);x(this,nn);x(this,Vf);x(this,Ho,0);A(this,xs,t),A(this,nn,i)}addFilter(t){if(!t)return"none";let i=l(this,ie,en).get(t);if(i)return i;const[r,a,u]=E(this,ie,lf).call(this,t),c=t.length===1?r:`${r}${a}${u}`;if(i=l(this,ie,en).get(c),i)return l(this,ie,en).set(t,i),i;const d=`g_${l(this,xs)}_transfer_map_${cn(this,Ho)._++}`,p=E(this,ie,Ja).call(this,d);l(this,ie,en).set(t,p),l(this,ie,en).set(c,p);const m=E(this,ie,Za).call(this,d);return E(this,ie,nc).call(this,r,a,u,m),p}addHCMFilter(t,i){var b;const r=`${t}-${i}`,a="base";let u=l(this,ie,Ka).get(a);if((u==null?void 0:u.key)===r||(u?((b=u.filter)==null||b.remove(),u.key=r,u.url="none",u.filter=null):(u={key:r,url:"none",filter:null},l(this,ie,Ka).set(a,u)),!t||!i))return u.url;const c=E(this,ie,ic).call(this,t);t=fe.makeHexColor(...c);const d=E(this,ie,ic).call(this,i);if(i=fe.makeHexColor(...d),l(this,ie,Qa).style.color="",t==="#000000"&&i==="#ffffff"||t===i)return u.url;const p=new Array(256);for(let C=0;C<=255;C++){const P=C/255;p[C]=P<=.03928?P/12.92:((P+.055)/1.055)**2.4}const m=p.join(","),v=`g_${l(this,xs)}_hcm_filter`,w=u.filter=E(this,ie,Za).call(this,v);E(this,ie,nc).call(this,m,m,m,w),E(this,ie,Nm).call(this,w);const _=(C,P)=>{const k=c[C]/255,I=d[C]/255,D=new Array(P+1);for(let F=0;F<=P;F++)D[F]=k+F/P*(I-k);return D.join(",")};return E(this,ie,nc).call(this,_(0,5),_(1,5),_(2,5),w),u.url=E(this,ie,Ja).call(this,v),u.url}addAlphaFilter(t){let i=l(this,ie,en).get(t);if(i)return i;const[r]=E(this,ie,lf).call(this,[t]),a=`alpha_${r}`;if(i=l(this,ie,en).get(a),i)return l(this,ie,en).set(t,i),i;const u=`g_${l(this,xs)}_alpha_map_${cn(this,Ho)._++}`,c=E(this,ie,Ja).call(this,u);l(this,ie,en).set(t,c),l(this,ie,en).set(a,c);const d=E(this,ie,Za).call(this,u);return E(this,ie,Om).call(this,r,d),c}addLuminosityFilter(t){let i=l(this,ie,en).get(t||"luminosity");if(i)return i;let r,a;if(t?([r]=E(this,ie,lf).call(this,[t]),a=`luminosity_${r}`):a="luminosity",i=l(this,ie,en).get(a),i)return l(this,ie,en).set(t,i),i;const u=`g_${l(this,xs)}_luminosity_map_${cn(this,Ho)._++}`,c=E(this,ie,Ja).call(this,u);l(this,ie,en).set(t,c),l(this,ie,en).set(a,c);const d=E(this,ie,Za).call(this,u);return E(this,ie,r_).call(this,d),t&&E(this,ie,Om).call(this,r,d),c}addHighlightHCMFilter(t,i,r,a,u){var I;const c=`${i}-${r}-${a}-${u}`;let d=l(this,ie,Ka).get(t);if((d==null?void 0:d.key)===c||(d?((I=d.filter)==null||I.remove(),d.key=c,d.url="none",d.filter=null):(d={key:c,url:"none",filter:null},l(this,ie,Ka).set(t,d)),!i||!r))return d.url;const[p,m]=[i,r].map(E(this,ie,ic).bind(this));let v=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),w=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[_,b]=[a,u].map(E(this,ie,ic).bind(this));w<v&&([v,w,_,b]=[w,v,b,_]),l(this,ie,Qa).style.color="";const C=(D,F,j)=>{const H=new Array(256),V=(w-v)/j,$=D/255,K=(F-D)/(255*j);let te=0;for(let ee=0;ee<=j;ee++){const Se=Math.round(v+ee*V),de=$+ee*K;for(let ce=te;ce<=Se;ce++)H[ce]=de;te=Se+1}for(let ee=te;ee<256;ee++)H[ee]=H[te-1];return H.join(",")},P=`g_${l(this,xs)}_hcm_${t}_filter`,k=d.filter=E(this,ie,Za).call(this,P);return E(this,ie,Nm).call(this,k),E(this,ie,nc).call(this,C(_[0],b[0],5),C(_[1],b[1],5),C(_[2],b[2],5),k),d.url=E(this,ie,Ja).call(this,P),d.url}destroy(t=!1){t&&l(this,ie,Ka).size!==0||(l(this,Ki)&&(l(this,Ki).parentNode.parentNode.remove(),A(this,Ki,null)),l(this,zo)&&(l(this,zo).clear(),A(this,zo,null)),A(this,Ho,0))}}Oo=new WeakMap,zo=new WeakMap,Ki=new WeakMap,xs=new WeakMap,nn=new WeakMap,Vf=new WeakMap,Ho=new WeakMap,ie=new WeakSet,en=function(){return l(this,zo)||A(this,zo,new Map)},Ka=function(){return l(this,Vf)||A(this,Vf,new Map)},Qa=function(){if(!l(this,Ki)){const t=l(this,nn).createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const r=l(this,nn).createElementNS(ys,"svg");r.setAttribute("width",0),r.setAttribute("height",0),A(this,Ki,l(this,nn).createElementNS(ys,"defs")),t.append(r),r.append(l(this,Ki)),l(this,nn).body.append(t)}return l(this,Ki)},lf=function(t){if(t.length===1){const p=t[0],m=new Array(256);for(let w=0;w<256;w++)m[w]=p[w]/255;const v=m.join(",");return[v,v,v]}const[i,r,a]=t,u=new Array(256),c=new Array(256),d=new Array(256);for(let p=0;p<256;p++)u[p]=i[p]/255,c[p]=r[p]/255,d[p]=a[p]/255;return[u.join(","),c.join(","),d.join(",")]},Ja=function(t){if(l(this,Oo)===void 0){A(this,Oo,"");const i=l(this,nn).URL;i!==l(this,nn).baseURI&&(rp(i)?Me('#createUrl: ignore "data:"-URL for performance reasons.'):A(this,Oo,i.split("#",1)[0]))}return`url(${l(this,Oo)}#${t})`},r_=function(t){const i=l(this,nn).createElementNS(ys,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)},Nm=function(t){const i=l(this,nn).createElementNS(ys,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)},Za=function(t){const i=l(this,nn).createElementNS(ys,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),l(this,ie,Qa).append(i),i},tc=function(t,i,r){const a=l(this,nn).createElementNS(ys,i);a.setAttribute("type","discrete"),a.setAttribute("tableValues",r),t.append(a)},nc=function(t,i,r,a){const u=l(this,nn).createElementNS(ys,"feComponentTransfer");a.append(u),E(this,ie,tc).call(this,u,"feFuncR",t),E(this,ie,tc).call(this,u,"feFuncG",i),E(this,ie,tc).call(this,u,"feFuncB",r)},Om=function(t,i){const r=l(this,nn).createElementNS(ys,"feComponentTransfer");i.append(r),E(this,ie,tc).call(this,r,"feFuncA",t)},ic=function(t){return l(this,ie,Qa).style.color=t,zy(getComputedStyle(l(this,ie,Qa)).getPropertyValue("color"))};class o_{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(i=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){nt("Abstract method `_fetch` called.")}}class a_ extends o_{async _fetch(e){const t=await sp(e,"arraybuffer");return new Uint8Array(t)}}if(an){var zm=Promise.withResolvers(),pc=null;(async()=>{const e=await qd(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await qd(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i=await qd(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),r=await qd(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let a,u;return new Map(Object.entries({fs:e,http:t,https:i,url:r,canvas:a,path2d:u}))})().then(e=>{pc=e,zm.resolve()},e=>{Me(`loadPackages: ${e}`),pc=new Map,zm.resolve()})}class qr{static get promise(){return zm.promise}static get(e){return pc==null?void 0:pc.get(e)}}async function l_(f){const t=await qr.get("fs").promises.readFile(f);return new Uint8Array(t)}class L1 extends s_{}class M1 extends t_{_createCanvas(e,t){return qr.get("canvas").createCanvas(e,t)}}class I1 extends n_{async _fetch(e){return l_(e)}}class F1 extends o_{async _fetch(e){return l_(e)}}const fn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Hm(f,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,i),f.clip(r)}class jy{getPattern(){nt("Abstract method `getPattern` called.")}}class D1 extends jy{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,r){let a;if(r===fn.STROKE||r===fn.FILL){const u=t.current.getClippedPathBoundingBox(r,ht(e))||[0,0,0,0],c=Math.ceil(u[2]-u[0])||1,d=Math.ceil(u[3]-u[1])||1,p=t.cachedCanvases.getCanvas("pattern",c,d),m=p.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-u[0],-u[1]),i=fe.transform(i,[1,0,0,1,u[0],u[1]]),m.transform(...t.baseTransform),this.matrix&&m.transform(...this.matrix),Hm(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),a=e.createPattern(p.canvas,"no-repeat");const v=new DOMMatrix(i);a.setTransform(v)}else Hm(e,this._bbox),a=this._createGradient(e);return a}}function lm(f,e,t,i,r,a,u,c){const d=e.coords,p=e.colors,m=f.data,v=f.width*4;let w;d[t+1]>d[i+1]&&(w=t,t=i,i=w,w=a,a=u,u=w),d[i+1]>d[r+1]&&(w=i,i=r,r=w,w=u,u=c,c=w),d[t+1]>d[i+1]&&(w=t,t=i,i=w,w=a,a=u,u=w);const _=(d[t]+e.offsetX)*e.scaleX,b=(d[t+1]+e.offsetY)*e.scaleY,C=(d[i]+e.offsetX)*e.scaleX,P=(d[i+1]+e.offsetY)*e.scaleY,k=(d[r]+e.offsetX)*e.scaleX,I=(d[r+1]+e.offsetY)*e.scaleY;if(b>=I)return;const D=p[a],F=p[a+1],j=p[a+2],H=p[u],V=p[u+1],$=p[u+2],K=p[c],te=p[c+1],ee=p[c+2],Se=Math.round(b),de=Math.round(I);let ce,ve,pe,Y,B,se,Q,M;for(let U=Se;U<=de;U++){if(U<P){const ge=U<b?0:(b-U)/(b-P);ce=_-(_-C)*ge,ve=D-(D-H)*ge,pe=F-(F-V)*ge,Y=j-(j-$)*ge}else{let ge;U>I?ge=1:P===I?ge=0:ge=(P-U)/(P-I),ce=C-(C-k)*ge,ve=H-(H-K)*ge,pe=V-(V-te)*ge,Y=$-($-ee)*ge}let ae;U<b?ae=0:U>I?ae=1:ae=(b-U)/(b-I),B=_-(_-k)*ae,se=D-(D-K)*ae,Q=F-(F-te)*ae,M=j-(j-ee)*ae;const we=Math.round(Math.min(ce,B)),Ce=Math.round(Math.max(ce,B));let me=v*U+we*4;for(let ge=we;ge<=Ce;ge++)ae=(ce-ge)/(ce-B),ae<0?ae=0:ae>1&&(ae=1),m[me++]=ve-(ve-se)*ae|0,m[me++]=pe-(pe-Q)*ae|0,m[me++]=Y-(Y-M)*ae|0,m[me++]=255}}function N1(f,e,t){const i=e.coords,r=e.colors;let a,u;switch(e.type){case"lattice":const c=e.verticesPerRow,d=Math.floor(i.length/c)-1,p=c-1;for(a=0;a<d;a++){let m=a*c;for(let v=0;v<p;v++,m++)lm(f,t,i[m],i[m+1],i[m+c],r[m],r[m+1],r[m+c]),lm(f,t,i[m+c+1],i[m+1],i[m+c],r[m+c+1],r[m+1],r[m+c])}break;case"triangles":for(a=0,u=i.length;a<u;a+=3)lm(f,t,i[a],i[a+1],i[a+2],r[a],r[a+1],r[a+2]);break;default:throw new Error("illegal figure")}}class O1 extends jy{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,i){const c=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-c,m=Math.ceil(this._bounds[3])-d,v=Math.min(Math.ceil(Math.abs(p*e[0]*1.1)),3e3),w=Math.min(Math.ceil(Math.abs(m*e[1]*1.1)),3e3),_=p/v,b=m/w,C={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-d,scaleX:1/_,scaleY:1/b},P=v+2*2,k=w+2*2,I=i.getCanvas("mesh",P,k),D=I.context,F=D.createImageData(v,w);if(t){const H=F.data;for(let V=0,$=H.length;V<$;V+=4)H[V]=t[0],H[V+1]=t[1],H[V+2]=t[2],H[V+3]=255}for(const H of this._figures)N1(F,H,C);return D.putImageData(F,2,2),{canvas:I.canvas,offsetX:c-2*_,offsetY:d-2*b,scaleX:_,scaleY:b}}getPattern(e,t,i,r){Hm(e,this._bbox);let a;if(r===fn.SHADING)a=fe.singularValueDecompose2dScale(ht(e));else if(a=fe.singularValueDecompose2dScale(t.baseTransform),this.matrix){const c=fe.singularValueDecompose2dScale(this.matrix);a=[a[0]*c[0],a[1]*c[1]]}const u=this._createMeshCanvas(a,r===fn.SHADING?null:this._background,t.cachedCanvases);return r!==fn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(u.offsetX,u.offsetY),e.scale(u.scaleX,u.scaleY),e.createPattern(u.canvas,"no-repeat")}}class z1 extends jy{getPattern(){return"hotpink"}}function H1(f){switch(f[0]){case"RadialAxial":return new D1(f);case"Mesh":return new O1(f);case"Dummy":return new z1}throw new Error(`Unknown IR type: ${f[0]}`)}const Kw={COLORED:1,UNCOLORED:2},$f=class $f{constructor(e,t,i,r,a){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=i,this.canvasGraphicsFactory=r,this.baseTransform=a}createPatternCanvas(e){const{bbox:t,operatorList:i,paintType:r,tilingType:a,color:u,canvasGraphicsFactory:c}=this;let{xstep:d,ystep:p}=this;d=Math.abs(d),p=Math.abs(p),tp("TilingType: "+a);const m=t[0],v=t[1],w=t[2],_=t[3],b=w-m,C=_-v,P=fe.singularValueDecompose2dScale(this.matrix),k=fe.singularValueDecompose2dScale(this.baseTransform),I=P[0]*k[0],D=P[1]*k[1];let F=b,j=C,H=!1,V=!1;const $=Math.ceil(d*I),K=Math.ceil(p*D),te=Math.ceil(b*I),ee=Math.ceil(C*D);$>=te?F=d:H=!0,K>=ee?j=p:V=!0;const Se=this.getSizeAndScale(F,this.ctx.canvas.width,I),de=this.getSizeAndScale(j,this.ctx.canvas.height,D),ce=e.cachedCanvases.getCanvas("pattern",Se.size,de.size),ve=ce.context,pe=c.createCanvasGraphics(ve);if(pe.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(pe,r,u),ve.translate(-Se.scale*m,-de.scale*v),pe.transform(Se.scale,0,0,de.scale,0,0),ve.save(),this.clipBbox(pe,m,v,w,_),pe.baseTransform=ht(pe.ctx),pe.executeOperatorList(i),pe.endDrawing(),ve.restore(),H||V){const Y=ce.canvas;H&&(F=d),V&&(j=p);const B=this.getSizeAndScale(F,this.ctx.canvas.width,I),se=this.getSizeAndScale(j,this.ctx.canvas.height,D),Q=B.size,M=se.size,U=e.cachedCanvases.getCanvas("pattern-workaround",Q,M),ae=U.context,we=H?Math.floor(b/d):0,Ce=V?Math.floor(C/p):0;for(let me=0;me<=we;me++)for(let ge=0;ge<=Ce;ge++)ae.drawImage(Y,Q*me,M*ge,Q,M,0,0,Q,M);return{canvas:U.canvas,scaleX:B.scale,scaleY:se.scale,offsetX:m,offsetY:v}}return{canvas:ce.canvas,scaleX:Se.scale,scaleY:de.scale,offsetX:m,offsetY:v}}getSizeAndScale(e,t,i){const r=Math.max($f.MAX_PATTERN_SIZE,t);let a=Math.ceil(e*i);return a>=r?a=r:i=a/e,{scale:i,size:a}}clipBbox(e,t,i,r,a){const u=r-t,c=a-i;e.ctx.rect(t,i,u,c),e.current.updateRectMinMax(ht(e.ctx),[t,i,r,a]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const r=e.ctx,a=e.current;switch(t){case Kw.COLORED:const u=this.ctx;r.fillStyle=u.fillStyle,r.strokeStyle=u.strokeStyle,a.fillColor=u.fillStyle,a.strokeColor=u.strokeStyle;break;case Kw.UNCOLORED:const c=fe.makeHexColor(i[0],i[1],i[2]);r.fillStyle=c,r.strokeStyle=c,a.fillColor=c,a.strokeColor=c;break;default:throw new c1(`Unsupported paint type: ${t}`)}}getPattern(e,t,i,r){let a=i;r!==fn.SHADING&&(a=fe.transform(a,t.baseTransform),this.matrix&&(a=fe.transform(a,this.matrix)));const u=this.createPatternCanvas(t);let c=new DOMMatrix(a);c=c.translate(u.offsetX,u.offsetY),c=c.scale(1/u.scaleX,1/u.scaleY);const d=e.createPattern(u.canvas,"repeat");return d.setTransform(c),d}};be($f,"MAX_PATTERN_SIZE",3e3);let jm=$f;function j1({src:f,srcPos:e=0,dest:t,width:i,height:r,nonBlackColor:a=4294967295,inverseDecode:u=!1}){const c=pn.isLittleEndian?4278190080:255,[d,p]=u?[a,c]:[c,a],m=i>>3,v=i&7,w=f.length;t=new Uint32Array(t.buffer);let _=0;for(let b=0;b<r;b++){for(const P=e+m;e<P;e++){const k=e<w?f[e]:255;t[_++]=k&128?p:d,t[_++]=k&64?p:d,t[_++]=k&32?p:d,t[_++]=k&16?p:d,t[_++]=k&8?p:d,t[_++]=k&4?p:d,t[_++]=k&2?p:d,t[_++]=k&1?p:d}if(v===0)continue;const C=e<w?f[e++]:255;for(let P=0;P<v;P++)t[_++]=C&1<<7-P?p:d}return{srcPos:e,destPos:_}}const Qw=16,Jw=100,B1=15,Zw=10,eA=1e3,Tn=16;function U1(f,e){if(f._removeMirroring)throw new Error("Context is already forwarding operations.");f.__originalSave=f.save,f.__originalRestore=f.restore,f.__originalRotate=f.rotate,f.__originalScale=f.scale,f.__originalTranslate=f.translate,f.__originalTransform=f.transform,f.__originalSetTransform=f.setTransform,f.__originalResetTransform=f.resetTransform,f.__originalClip=f.clip,f.__originalMoveTo=f.moveTo,f.__originalLineTo=f.lineTo,f.__originalBezierCurveTo=f.bezierCurveTo,f.__originalRect=f.rect,f.__originalClosePath=f.closePath,f.__originalBeginPath=f.beginPath,f._removeMirroring=()=>{f.save=f.__originalSave,f.restore=f.__originalRestore,f.rotate=f.__originalRotate,f.scale=f.__originalScale,f.translate=f.__originalTranslate,f.transform=f.__originalTransform,f.setTransform=f.__originalSetTransform,f.resetTransform=f.__originalResetTransform,f.clip=f.__originalClip,f.moveTo=f.__originalMoveTo,f.lineTo=f.__originalLineTo,f.bezierCurveTo=f.__originalBezierCurveTo,f.rect=f.__originalRect,f.closePath=f.__originalClosePath,f.beginPath=f.__originalBeginPath,delete f._removeMirroring},f.save=function(){e.save(),this.__originalSave()},f.restore=function(){e.restore(),this.__originalRestore()},f.translate=function(i,r){e.translate(i,r),this.__originalTranslate(i,r)},f.scale=function(i,r){e.scale(i,r),this.__originalScale(i,r)},f.transform=function(i,r,a,u,c,d){e.transform(i,r,a,u,c,d),this.__originalTransform(i,r,a,u,c,d)},f.setTransform=function(i,r,a,u,c,d){e.setTransform(i,r,a,u,c,d),this.__originalSetTransform(i,r,a,u,c,d)},f.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},f.rotate=function(i){e.rotate(i),this.__originalRotate(i)},f.clip=function(i){e.clip(i),this.__originalClip(i)},f.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},f.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},f.bezierCurveTo=function(t,i,r,a,u,c){e.bezierCurveTo(t,i,r,a,u,c),this.__originalBezierCurveTo(t,i,r,a,u,c)},f.rect=function(t,i,r,a){e.rect(t,i,r,a),this.__originalRect(t,i,r,a)},f.closePath=function(){e.closePath(),this.__originalClosePath()},f.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class V1{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,i)):(r=this.canvasFactory.create(t,i),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Yd(f,e,t,i,r,a,u,c,d,p){const[m,v,w,_,b,C]=ht(f);if(v===0&&w===0){const I=u*m+b,D=Math.round(I),F=c*_+C,j=Math.round(F),H=(u+d)*m+b,V=Math.abs(Math.round(H)-D)||1,$=(c+p)*_+C,K=Math.abs(Math.round($)-j)||1;return f.setTransform(Math.sign(m),0,0,Math.sign(_),D,j),f.drawImage(e,t,i,r,a,0,0,V,K),f.setTransform(m,v,w,_,b,C),[V,K]}if(m===0&&_===0){const I=c*w+b,D=Math.round(I),F=u*v+C,j=Math.round(F),H=(c+p)*w+b,V=Math.abs(Math.round(H)-D)||1,$=(u+d)*v+C,K=Math.abs(Math.round($)-j)||1;return f.setTransform(0,Math.sign(v),Math.sign(w),0,D,j),f.drawImage(e,t,i,r,a,0,0,K,V),f.setTransform(m,v,w,_,b,C),[K,V]}f.drawImage(e,t,i,r,a,u,c,d,p);const P=Math.hypot(m,v),k=Math.hypot(w,_);return[P*d,k*p]}function $1(f){const{width:e,height:t}=f;if(e>eA||t>eA)return null;const i=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),a=e+1;let u=new Uint8Array(a*(t+1)),c,d,p;const m=e+7&-8;let v=new Uint8Array(m*t),w=0;for(const k of f.data){let I=128;for(;I>0;)v[w++]=k&I?0:255,I>>=1}let _=0;for(w=0,v[w]!==0&&(u[0]=1,++_),d=1;d<e;d++)v[w]!==v[w+1]&&(u[d]=v[w]?2:1,++_),w++;for(v[w]!==0&&(u[d]=2,++_),c=1;c<t;c++){w=c*m,p=c*a,v[w-m]!==v[w]&&(u[p]=v[w]?1:8,++_);let k=(v[w]?4:0)+(v[w-m]?8:0);for(d=1;d<e;d++)k=(k>>2)+(v[w+1]?4:0)+(v[w-m+1]?8:0),r[k]&&(u[p+d]=r[k],++_),w++;if(v[w-m]!==v[w]&&(u[p+d]=v[w]?2:4,++_),_>i)return null}for(w=m*(t-1),p=c*a,v[w]!==0&&(u[p]=8,++_),d=1;d<e;d++)v[w]!==v[w+1]&&(u[p+d]=v[w]?4:8,++_),w++;if(v[w]!==0&&(u[p+d]=4,++_),_>i)return null;const b=new Int32Array([0,a,-1,0,-a,0,0,0,1]),C=new Path2D;for(c=0;_&&c<=t;c++){let k=c*a;const I=k+e;for(;k<I&&!u[k];)k++;if(k===I)continue;C.moveTo(k%a,c);const D=k;let F=u[k];do{const j=b[F];do k+=j;while(!u[k]);const H=u[k];H!==5&&H!==10?(F=H,u[k]=0):(F=H&51*F>>4,u[k]&=F>>2|F<<2),C.lineTo(k%a,k/a|0),u[k]||--_}while(D!==k);--c}return v=null,u=null,function(k){k.save(),k.scale(1/e,-1/t),k.translate(0,-t),k.fill(C),k.beginPath(),k.restore()}}class tA{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=xA,this.textMatrixScale=1,this.fontMatrix=dm,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Zt.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=fe.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){const i=fe.applyTransform(t,e),r=fe.applyTransform(t.slice(2),e),a=fe.applyTransform([t[0],t[3]],e),u=fe.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,i[0],r[0],a[0],u[0]),this.minY=Math.min(this.minY,i[1],r[1],a[1],u[1]),this.maxX=Math.max(this.maxX,i[0],r[0],a[0],u[0]),this.maxY=Math.max(this.maxY,i[1],r[1],a[1],u[1])}updateScalingPathMinMax(e,t){fe.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,r,a,u,c,d,p,m){const v=fe.bezierBoundingBox(t,i,r,a,u,c,d,p,m);m||this.updateRectMinMax(e,v)}getPathBoundingBox(e=fn.FILL,t=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(e===fn.STROKE){t||nt("Stroke bounding box must include transform.");const r=fe.singularValueDecompose2dScale(t),a=r[0]*this.lineWidth/2,u=r[1]*this.lineWidth/2;i[0]-=a,i[1]-=u,i[2]+=a,i[3]+=u}return i}updateClipFromPath(){const e=fe.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=fn.FILL,t=null){return fe.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function nA(f,e){if(typeof ImageData<"u"&&e instanceof ImageData){f.putImageData(e,0,0);return}const t=e.height,i=e.width,r=t%Tn,a=(t-r)/Tn,u=r===0?a:a+1,c=f.createImageData(i,Tn);let d=0,p;const m=e.data,v=c.data;let w,_,b,C;if(e.kind===ef.GRAYSCALE_1BPP){const P=m.byteLength,k=new Uint32Array(v.buffer,0,v.byteLength>>2),I=k.length,D=i+7>>3,F=4294967295,j=pn.isLittleEndian?4278190080:255;for(w=0;w<u;w++){for(b=w<a?Tn:r,p=0,_=0;_<b;_++){const H=P-d;let V=0;const $=H>D?i:H*8-7,K=$&-8;let te=0,ee=0;for(;V<K;V+=8)ee=m[d++],k[p++]=ee&128?F:j,k[p++]=ee&64?F:j,k[p++]=ee&32?F:j,k[p++]=ee&16?F:j,k[p++]=ee&8?F:j,k[p++]=ee&4?F:j,k[p++]=ee&2?F:j,k[p++]=ee&1?F:j;for(;V<$;V++)te===0&&(ee=m[d++],te=128),k[p++]=ee&te?F:j,te>>=1}for(;p<I;)k[p++]=0;f.putImageData(c,0,w*Tn)}}else if(e.kind===ef.RGBA_32BPP){for(_=0,C=i*Tn*4,w=0;w<a;w++)v.set(m.subarray(d,d+C)),d+=C,f.putImageData(c,0,_),_+=Tn;w<u&&(C=i*r*4,v.set(m.subarray(d,d+C)),f.putImageData(c,0,_))}else if(e.kind===ef.RGB_24BPP)for(b=Tn,C=i*b,w=0;w<u;w++){for(w>=a&&(b=r,C=i*b),p=0,_=C;_--;)v[p++]=m[d++],v[p++]=m[d++],v[p++]=m[d++],v[p++]=255;f.putImageData(c,0,w*Tn)}else throw new Error(`bad image kind: ${e.kind}`)}function iA(f,e){if(e.bitmap){f.drawImage(e.bitmap,0,0);return}const t=e.height,i=e.width,r=t%Tn,a=(t-r)/Tn,u=r===0?a:a+1,c=f.createImageData(i,Tn);let d=0;const p=e.data,m=c.data;for(let v=0;v<u;v++){const w=v<a?Tn:r;({srcPos:d}=j1({src:p,srcPos:d,dest:m,width:i,height:w,nonBlackColor:0})),f.putImageData(c,0,v*Tn)}}function Yu(f,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)f[i]!==void 0&&(e[i]=f[i]);f.setLineDash!==void 0&&(e.setLineDash(f.getLineDash()),e.lineDashOffset=f.lineDashOffset)}function Kd(f){if(f.strokeStyle=f.fillStyle="#000000",f.fillRule="nonzero",f.globalAlpha=1,f.lineWidth=1,f.lineCap="butt",f.lineJoin="miter",f.miterLimit=10,f.globalCompositeOperation="source-over",f.font="10px sans-serif",f.setLineDash!==void 0&&(f.setLineDash([]),f.lineDashOffset=0),!an){const{filter:e}=f;e!=="none"&&e!==""&&(f.filter="none")}}function sA(f,e){if(e)return!0;const t=fe.singularValueDecompose2dScale(f);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*Xr.PDF_TO_CSS_UNITS);return t[0]<=i&&t[1]<=i}const W1=["butt","round","square"],G1=["miter","round","bevel"],X1={},rA={};var Kr,Bm,Um;const qy=class qy{constructor(e,t,i,r,a,{optionalContentConfig:u,markedContentStack:c=null},d,p){x(this,Kr);this.ctx=e,this.current=new tA(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=r,this.filterFactory=a,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=u,this.cachedCanvases=new V1(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:r=null}){const a=this.ctx.canvas.width,u=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,a,u),this.ctx.fillStyle=c,i){const d=this.cachedCanvases.getCanvas("transparent",a,u);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...ht(this.compositeCtx))}this.ctx.save(),Kd(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=ht(this.ctx)}executeOperatorList(e,t,i,r){const a=e.argsArray,u=e.fnArray;let c=t||0;const d=a.length;if(d===c)return c;const p=d-c>Zw&&typeof i=="function",m=p?Date.now()+B1:0;let v=0;const w=this.commonObjs,_=this.objs;let b;for(;;){if(r!==void 0&&c===r.nextBreakPoint)return r.breakIt(c,i),c;if(b=u[c],b!==yi.dependency)this[b].apply(this,a[c]);else for(const C of a[c]){const P=C.startsWith("g_")?w:_;if(!P.has(C))return P.get(C,i),c}if(c++,c===d)return c;if(p&&++v>Zw){if(Date.now()>m)return i(),c;v=0}}}endDrawing(){E(this,Kr,Bm).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),E(this,Kr,Um).call(this)}_scaleImage(e,t){const i=e.width??e.displayWidth,r=e.height??e.displayHeight;let a=Math.max(Math.hypot(t[0],t[1]),1),u=Math.max(Math.hypot(t[2],t[3]),1),c=i,d=r,p="prescale1",m,v;for(;a>2&&c>1||u>2&&d>1;){let w=c,_=d;a>2&&c>1&&(w=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),a/=c/w),u>2&&d>1&&(_=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,u/=d/_),m=this.cachedCanvases.getCanvas(p,w,_),v=m.context,v.clearRect(0,0,w,_),v.drawImage(e,0,0,c,d,0,0,w,_),e=m.canvas,c=w,d=_,p=p==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:c,paintHeight:d}}_createMaskCanvas(e){const t=this.ctx,{width:i,height:r}=e,a=this.current.fillColor,u=this.current.patternFill,c=ht(t);let d,p,m,v;if((e.bitmap||e.data)&&e.count>1){const $=e.bitmap||e.data.buffer;p=JSON.stringify(u?c:[c.slice(0,4),a]),d=this._cachedBitmapsMap.get($),d||(d=new Map,this._cachedBitmapsMap.set($,d));const K=d.get(p);if(K&&!u){const te=Math.round(Math.min(c[0],c[2])+c[4]),ee=Math.round(Math.min(c[1],c[3])+c[5]);return{canvas:K,offsetX:te,offsetY:ee}}m=K}m||(v=this.cachedCanvases.getCanvas("maskCanvas",i,r),iA(v.context,e));let w=fe.transform(c,[1/i,0,0,-1/r,0,0]);w=fe.transform(w,[1,0,0,1,0,-r]);const[_,b,C,P]=fe.getAxialAlignedBoundingBox([0,0,i,r],w),k=Math.round(C-_)||1,I=Math.round(P-b)||1,D=this.cachedCanvases.getCanvas("fillCanvas",k,I),F=D.context,j=_,H=b;F.translate(-j,-H),F.transform(...w),m||(m=this._scaleImage(v.canvas,ms(F)),m=m.img,d&&u&&d.set(p,m)),F.imageSmoothingEnabled=sA(ht(F),e.interpolate),Yd(F,m,0,0,m.width,m.height,0,0,i,r),F.globalCompositeOperation="source-in";const V=fe.transform(ms(F),[1,0,0,1,-j,-H]);return F.fillStyle=u?a.getPattern(t,this,V,fn.FILL):a,F.fillRect(0,0,i,r),d&&!u&&(this.cachedCanvases.delete("fillCanvas"),d.set(p,D.canvas)),{canvas:D.canvas,offsetX:Math.round(j),offsetY:Math.round(H)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=W1[e]}setLineJoin(e){this.ctx.lineJoin=G1[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;const a=this.ctx;a.setTransform(...ht(this.suspendedCtx)),Yu(this.suspendedCtx,a),U1(a,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Yu(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,r){const a=r[0],u=r[1],c=r[2]-a,d=r[3]-u;c===0||d===0||(this.genericComposeSMask(t.context,i,c,d,t.subtype,t.backdrop,t.transferMap,a,u,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,r,a,u,c,d,p,m,v){let w=e.canvas,_=d-m,b=p-v;if(u){const P=fe.makeHexColor(...u);if(_<0||b<0||_+i>w.width||b+r>w.height){const k=this.cachedCanvases.getCanvas("maskExtension",i,r),I=k.context;I.drawImage(w,-_,-b),I.globalCompositeOperation="destination-atop",I.fillStyle=P,I.fillRect(0,0,i,r),I.globalCompositeOperation="source-over",w=k.canvas,_=b=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const k=new Path2D;k.rect(_,b,i,r),e.clip(k),e.globalCompositeOperation="destination-atop",e.fillStyle=P,e.fillRect(_,b,i,r),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),a==="Alpha"&&c?t.filter=this.filterFactory.addAlphaFilter(c):a==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(c));const C=new Path2D;C.rect(d,p,i,r),t.clip(C),t.globalCompositeOperation="destination-in",t.drawImage(w,_,b,i,r,d,p,i,r),t.restore()}save(){this.inSMaskMode?(Yu(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Yu(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,r,a,u){this.ctx.transform(e,t,i,r,a,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){const r=this.ctx,a=this.current;let u=a.x,c=a.y,d,p;const m=ht(r),v=m[0]===0&&m[3]===0||m[1]===0&&m[2]===0,w=v?i.slice(0):null;for(let _=0,b=0,C=e.length;_<C;_++)switch(e[_]|0){case yi.rectangle:u=t[b++],c=t[b++];const P=t[b++],k=t[b++],I=u+P,D=c+k;r.moveTo(u,c),P===0||k===0?r.lineTo(I,D):(r.lineTo(I,c),r.lineTo(I,D),r.lineTo(u,D)),v||a.updateRectMinMax(m,[u,c,I,D]),r.closePath();break;case yi.moveTo:u=t[b++],c=t[b++],r.moveTo(u,c),v||a.updatePathMinMax(m,u,c);break;case yi.lineTo:u=t[b++],c=t[b++],r.lineTo(u,c),v||a.updatePathMinMax(m,u,c);break;case yi.curveTo:d=u,p=c,u=t[b+4],c=t[b+5],r.bezierCurveTo(t[b],t[b+1],t[b+2],t[b+3],u,c),a.updateCurvePathMinMax(m,d,p,t[b],t[b+1],t[b+2],t[b+3],u,c,w),b+=6;break;case yi.curveTo2:d=u,p=c,r.bezierCurveTo(u,c,t[b],t[b+1],t[b+2],t[b+3]),a.updateCurvePathMinMax(m,d,p,u,c,t[b],t[b+1],t[b+2],t[b+3],w),u=t[b+2],c=t[b+3],b+=4;break;case yi.curveTo3:d=u,p=c,u=t[b+2],c=t[b+3],r.bezierCurveTo(t[b],t[b+1],u,c,u,c),a.updateCurvePathMinMax(m,d,p,t[b],t[b+1],u,c,u,c,w),b+=4;break;case yi.closePath:r.closePath();break}v&&a.updateScalingPathMinMax(m,w),a.setCurrentPoint(u,c)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(t.save(),t.strokeStyle=i.getPattern(t,this,ms(t),fn.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,i=this.current.fillColor,r=this.current.patternFill;let a=!1;r&&(t.save(),t.fillStyle=i.getPattern(t,this,ms(t),fn.FILL),a=!0);const u=this.current.getClippedPathBoundingBox();this.contentVisible&&u!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),a&&t.restore(),e&&this.consumePath(u)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=X1}eoClip(){this.pendingClip=rA}beginText(){this.current.textMatrix=xA,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const i of e)t.setTransform(...i.transform),t.translate(i.x,i.y),i.addToPath(t,i.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var m;const i=this.commonObjs.get(e),r=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=i.fontMatrix||dm,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&Me("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const a=i.loadedName||"sans-serif",u=((m=i.systemFontInfo)==null?void 0:m.css)||`"${a}", ${i.fallbackName}`;let c="normal";i.black?c="900":i.bold&&(c="bold");const d=i.italic?"italic":"normal";let p=t;t<Qw?p=Qw:t>Jw&&(p=Jw),this.current.fontSizeScale=t/p,this.ctx.font=`${d} ${c} ${p}px ${u}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,r,a,u){this.current.textMatrix=[e,t,i,r,a,u],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,r){const a=this.ctx,u=this.current,c=u.font,d=u.textRenderingMode,p=u.fontSize/u.fontSizeScale,m=d&Zt.FILL_STROKE_MASK,v=!!(d&Zt.ADD_TO_PATH_FLAG),w=u.patternFill&&!c.missingFile;let _;(c.disableFontFace||v||w)&&(_=c.getPathGenerator(this.commonObjs,e)),c.disableFontFace||w?(a.save(),a.translate(t,i),a.beginPath(),_(a,p),r&&a.setTransform(...r),(m===Zt.FILL||m===Zt.FILL_STROKE)&&a.fill(),(m===Zt.STROKE||m===Zt.FILL_STROKE)&&a.stroke(),a.restore()):((m===Zt.FILL||m===Zt.FILL_STROKE)&&a.fillText(e,t,i),(m===Zt.STROKE||m===Zt.FILL_STROKE)&&a.strokeText(e,t,i)),v&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ht(a),x:t,y:i,fontSize:p,addToPath:_})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){i=!0;break}return ze(this,"isFontSubpixelAAEnabled",i)}showText(e){const t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(r===0)return;const a=this.ctx,u=t.fontSizeScale,c=t.charSpacing,d=t.wordSpacing,p=t.fontDirection,m=t.textHScale*p,v=e.length,w=i.vertical,_=w?1:-1,b=i.defaultVMetrics,C=r*t.fontMatrix[0],P=t.textRenderingMode===Zt.FILL&&!i.disableFontFace&&!t.patternFill;a.save(),a.transform(...t.textMatrix),a.translate(t.x,t.y+t.textRise),p>0?a.scale(m,-1):a.scale(m,1);let k;if(t.patternFill){a.save();const H=t.fillColor.getPattern(a,this,ms(a),fn.FILL);k=ht(a),a.restore(),a.fillStyle=H}let I=t.lineWidth;const D=t.textMatrixScale;if(D===0||I===0){const H=t.textRenderingMode&Zt.FILL_STROKE_MASK;(H===Zt.STROKE||H===Zt.FILL_STROKE)&&(I=this.getSinglePixelWidth())}else I/=D;if(u!==1&&(a.scale(u,u),I/=u),a.lineWidth=I,i.isInvalidPDFjsFont){const H=[];let V=0;for(const $ of e)H.push($.unicode),V+=$.width;a.fillText(H.join(""),0,0),t.x+=V*C*m,a.restore(),this.compose();return}let F=0,j;for(j=0;j<v;++j){const H=e[j];if(typeof H=="number"){F+=_*H*r/1e3;continue}let V=!1;const $=(H.isSpace?d:0)+c,K=H.fontChar,te=H.accent;let ee,Se,de=H.width;if(w){const ve=H.vmetric||b,pe=-(H.vmetric?ve[1]:de*.5)*C,Y=ve[2]*C;de=ve?-ve[0]:de,ee=pe/u,Se=(F+Y)/u}else ee=F/u,Se=0;if(i.remeasure&&de>0){const ve=a.measureText(K).width*1e3/r*u;if(de<ve&&this.isFontSubpixelAAEnabled){const pe=de/ve;V=!0,a.save(),a.scale(pe,1),ee/=pe}else de!==ve&&(ee+=(de-ve)/2e3*r/u)}if(this.contentVisible&&(H.isInFont||i.missingFile)){if(P&&!te)a.fillText(K,ee,Se);else if(this.paintChar(K,ee,Se,k),te){const ve=ee+r*te.offset.x/u,pe=Se-r*te.offset.y/u;this.paintChar(te.fontChar,ve,pe,k)}}const ce=w?de*C-$*p:de*C+$*p;F+=ce,V&&a.restore()}w?t.y-=F:t.x+=F*m,a.restore(),this.compose()}showType3Text(e){const t=this.ctx,i=this.current,r=i.font,a=i.fontSize,u=i.fontDirection,c=r.vertical?1:-1,d=i.charSpacing,p=i.wordSpacing,m=i.textHScale*u,v=i.fontMatrix||dm,w=e.length,_=i.textRenderingMode===Zt.INVISIBLE;let b,C,P,k;if(!(_||a===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...i.textMatrix),t.translate(i.x,i.y),t.scale(m,u),b=0;b<w;++b){if(C=e[b],typeof C=="number"){k=c*C*a/1e3,this.ctx.translate(k,0),i.x+=k*m;continue}const I=(C.isSpace?p:0)+d,D=r.charProcOperatorList[C.operatorListId];if(!D){Me(`Type3 character "${C.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=C,this.save(),t.scale(a,a),t.transform(...v),this.executeOperatorList(D),this.restore()),P=fe.applyTransform([C.width,0],v)[0]*a+I,t.translate(P,0),i.x+=P*m}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,r,a,u){this.ctx.rect(i,r,a-i,u-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const i=e[1],r=this.baseTransform||ht(this.ctx),a={createCanvasGraphics:u=>new qy(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new jm(e,i,this.ctx,a,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){this.ctx.strokeStyle=this.current.strokeColor=fe.makeHexColor(e,t,i)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,i){this.ctx.fillStyle=this.current.fillColor=fe.makeHexColor(e,t,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=H1(this.getObject(e)),this.cachedPatterns.set(e,i)),t&&(i.matrix=t),i}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,ms(t),fn.SHADING);const r=ms(t);if(r){const{width:a,height:u}=t.canvas,[c,d,p,m]=fe.getAxialAlignedBoundingBox([0,0,a,u],r);this.ctx.fillRect(c,d,p-c,m-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){nt("Should not call beginInlineImage")}beginImageData(){nt("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=ht(this.ctx),t)){const i=t[2]-t[0],r=t[3]-t[1];this.ctx.rect(t[0],t[1],i,r),this.current.updateRectMinMax(ht(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||tp("TODO: Support non-isolated groups."),e.knockout&&Me("Knockout groups not supported.");const i=ht(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=fe.getAxialAlignedBoundingBox(e.bbox,ht(t));const a=[0,0,t.canvas.width,t.canvas.height];r=fe.intersect(r,a)||[0,0,0,0];const u=Math.floor(r[0]),c=Math.floor(r[1]),d=Math.max(Math.ceil(r[2])-u,1),p=Math.max(Math.ceil(r[3])-c,1);this.current.startNewPathAndClipBox([0,0,d,p]);let m="groupAt"+this.groupLevel;e.smask&&(m+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(m,d,p),w=v.context;w.translate(-u,-c),w.transform(...i),e.smask?this.smaskStack.push({canvas:v.canvas,context:w,offsetX:u,offsetY:c,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(u,c),t.save()),Yu(t,w),this.ctx=w,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=ht(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const a=fe.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(e,t,i,r,a){if(E(this,Kr,Bm).call(this),Kd(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const u=t[2]-t[0],c=t[3]-t[1];if(a&&this.annotationCanvasMap){i=i.slice(),i[4]-=t[0],i[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=u,t[3]=c;const[d,p]=fe.singularValueDecompose2dScale(ht(this.ctx)),{viewportScale:m}=this,v=Math.ceil(u*this.outputScaleX*m),w=Math.ceil(c*this.outputScaleY*m);this.annotationCanvas=this.canvasFactory.create(v,w);const{canvas:_,context:b}=this.annotationCanvas;this.annotationCanvasMap.set(e,_),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.save(),this.ctx.setTransform(d,0,0,-p,0,c*p),Kd(this.ctx)}else Kd(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],u,c),this.ctx.clip(),this.ctx.beginPath()}this.current=new tA(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),E(this,Kr,Um).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const i=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=$1(e)),r.compiled)){r.compiled(i);return}const a=this._createMaskCanvas(e),u=a.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(u,a.offsetX,a.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i=0,r=0,a,u){if(!this.contentVisible)return;e=this.getObject(e.data,e);const c=this.ctx;c.save();const d=ht(c);c.transform(t,i,r,a,0,0);const p=this._createMaskCanvas(e);c.setTransform(1,0,0,1,p.offsetX-d[4],p.offsetY-d[5]);for(let m=0,v=u.length;m<v;m+=2){const w=fe.transform(d,[t,i,r,a,u[m],u[m+1]]),[_,b]=fe.applyTransform([0,0],w);c.drawImage(p.canvas,_,b)}c.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,i=this.current.fillColor,r=this.current.patternFill;for(const a of e){const{data:u,width:c,height:d,transform:p}=a,m=this.cachedCanvases.getCanvas("maskCanvas",c,d),v=m.context;v.save();const w=this.getObject(u,a);iA(v,w),v.globalCompositeOperation="source-in",v.fillStyle=r?i.getPattern(v,this,ms(t),fn.FILL):i,v.fillRect(0,0,c,d),v.restore(),t.save(),t.transform(...p),t.scale(1,-1),Yd(t,m.canvas,0,0,c,d,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Me("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,i,r){if(!this.contentVisible)return;const a=this.getObject(e);if(!a){Me("Dependent image isn't ready yet");return}const u=a.width,c=a.height,d=[];for(let p=0,m=r.length;p<m;p+=2)d.push({transform:[t,0,0,i,r[p],r[p+1]],x:0,y:0,w:u,h:c});this.paintInlineImageXObjectGroup(a,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:i,height:r}=e,a=this.cachedCanvases.getCanvas("inlineImage",i,r),u=a.context;return u.filter=this.current.transferMaps,u.drawImage(t,0,0),u.filter="none",a.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,i=e.height,r=this.ctx;if(this.save(),!an){const{filter:c}=r;c!=="none"&&c!==""&&(r.filter="none")}r.scale(1/t,-1/i);let a;if(e.bitmap)a=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)a=e;else{const d=this.cachedCanvases.getCanvas("inlineImage",t,i).context;nA(d,e),a=this.applyTransferMapsToCanvas(d)}const u=this._scaleImage(a,ms(r));r.imageSmoothingEnabled=sA(ht(r),e.interpolate),Yd(r,u.img,0,0,u.paintWidth,u.paintHeight,0,-i,t,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const a=e.width,u=e.height,d=this.cachedCanvases.getCanvas("inlineImage",a,u).context;nA(d,e),r=this.applyTransferMapsToCanvas(d)}for(const a of t)i.save(),i.transform(...a.transform),i.scale(1,-1),Yd(i,r,a.x,a.y,a.w,a.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(t||(this.pendingClip===rA?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=ht(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:i,c:r,d:a}=this.ctx.getTransform();let u,c;if(i===0&&r===0){const d=Math.abs(t),p=Math.abs(a);if(d===p)if(e===0)u=c=1/d;else{const m=d*e;u=c=m<1?1/m:1}else if(e===0)u=1/d,c=1/p;else{const m=d*e,v=p*e;u=m<1?1/m:1,c=v<1?1/v:1}}else{const d=Math.abs(t*a-i*r),p=Math.hypot(t,i),m=Math.hypot(r,a);if(e===0)u=m/d,c=p/d;else{const v=e*d;u=m>v?m/v:1,c=p>v?p/v:1}}this._cachedScaleForStroking[0]=u,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:i}=this.current,[r,a]=this.getScaleForStroking();if(t.lineWidth=i||1,r===1&&a===1){t.stroke();return}const u=t.getLineDash();if(e&&t.save(),t.scale(r,a),u.length>0){const c=Math.max(r,a);t.setLineDash(u.map(d=>d/c)),t.lineDashOffset/=c}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Kr=new WeakSet,Bm=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Um=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let rl=qy;for(const f in yi)rl.prototype[f]!==void 0&&(rl.prototype[yi[f]]=rl.prototype[f]);var zc,Hc;class $s{static get workerPort(){return l(this,zc)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");A(this,zc,e)}static get workerSrc(){return l(this,Hc)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");A(this,Hc,e)}}zc=new WeakMap,Hc=new WeakMap,x($s,zc,null),x($s,Hc,"");const Qd={DATA:1,ERROR:2},_t={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Fn(f){switch(f instanceof Error||typeof f=="object"&&f!==null||nt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),f.name){case"AbortException":return new ba(f.message);case"MissingPDFException":return new Ea(f.message);case"PasswordException":return new fm(f.message,f.code);case"UnexpectedResponseException":return new np(f.message,f.status);case"UnknownErrorException":return new pm(f.message,f.details);default:return new pm(f.message,f.toString())}}var El,oi,u_,c_,h_,uf;class sc{constructor(e,t,i){x(this,oi);x(this,El,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",E(this,oi,u_).bind(this),{signal:l(this,El).signal})}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const r=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[r]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},i)}catch(u){a.reject(u)}return a.promise}sendWithStream(e,t,i,r){const a=this.streamId++,u=this.sourceName,c=this.targetName,d=this.comObj;return new ReadableStream({start:p=>{const m=Promise.withResolvers();return this.streamControllers[a]={controller:p,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:u,targetName:c,action:e,streamId:a,data:t,desiredSize:p.desiredSize},r),m.promise},pull:p=>{const m=Promise.withResolvers();return this.streamControllers[a].pullCall=m,d.postMessage({sourceName:u,targetName:c,stream:_t.PULL,streamId:a,desiredSize:p.desiredSize}),m.promise},cancel:p=>{Lt(p instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[a].cancelCall=m,this.streamControllers[a].isClosed=!0,d.postMessage({sourceName:u,targetName:c,stream:_t.CANCEL,streamId:a,reason:Fn(p)}),m.promise}},i)}destroy(){var e;(e=l(this,El))==null||e.abort(),A(this,El,null)}}El=new WeakMap,oi=new WeakSet,u_=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){E(this,oi,h_).call(this,e);return}if(e.callback){const i=e.callbackId,r=this.callbackCapabilities[i];if(!r)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],e.callback===Qd.DATA)r.resolve(e.data);else if(e.callback===Qd.ERROR)r.reject(Fn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const i=this.sourceName,r=e.sourceName,a=this.comObj;new Promise(function(u){u(t(e.data))}).then(function(u){a.postMessage({sourceName:i,targetName:r,callback:Qd.DATA,callbackId:e.callbackId,data:u})},function(u){a.postMessage({sourceName:i,targetName:r,callback:Qd.ERROR,callbackId:e.callbackId,reason:Fn(u)})});return}if(e.streamId){E(this,oi,c_).call(this,e);return}t(e.data)},c_=function(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,a=this.comObj,u=this,c=this.actionHandler[e.action],d={enqueue(p,m=1,v){if(this.isCancelled)return;const w=this.desiredSize;this.desiredSize-=m,w>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:i,targetName:r,stream:_t.ENQUEUE,streamId:t,chunk:p},v)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:i,targetName:r,stream:_t.CLOSE,streamId:t}),delete u.streamSinks[t])},error(p){Lt(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:i,targetName:r,stream:_t.ERROR,streamId:t,reason:Fn(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[t]=d,new Promise(function(p){p(c(e.data,d))}).then(function(){a.postMessage({sourceName:i,targetName:r,stream:_t.START_COMPLETE,streamId:t,success:!0})},function(p){a.postMessage({sourceName:i,targetName:r,stream:_t.START_COMPLETE,streamId:t,reason:Fn(p)})})},h_=function(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,a=this.comObj,u=this.streamControllers[t],c=this.streamSinks[t];switch(e.stream){case _t.START_COMPLETE:e.success?u.startCall.resolve():u.startCall.reject(Fn(e.reason));break;case _t.PULL_COMPLETE:e.success?u.pullCall.resolve():u.pullCall.reject(Fn(e.reason));break;case _t.PULL:if(!c){a.postMessage({sourceName:i,targetName:r,stream:_t.PULL_COMPLETE,streamId:t,success:!0});break}c.desiredSize<=0&&e.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=e.desiredSize,new Promise(function(d){var p;d((p=c.onPull)==null?void 0:p.call(c))}).then(function(){a.postMessage({sourceName:i,targetName:r,stream:_t.PULL_COMPLETE,streamId:t,success:!0})},function(d){a.postMessage({sourceName:i,targetName:r,stream:_t.PULL_COMPLETE,streamId:t,reason:Fn(d)})});break;case _t.ENQUEUE:if(Lt(u,"enqueue should have stream controller"),u.isClosed)break;u.controller.enqueue(e.chunk);break;case _t.CLOSE:if(Lt(u,"close should have stream controller"),u.isClosed)break;u.isClosed=!0,u.controller.close(),E(this,oi,uf).call(this,u,t);break;case _t.ERROR:Lt(u,"error should have stream controller"),u.controller.error(Fn(e.reason)),E(this,oi,uf).call(this,u,t);break;case _t.CANCEL_COMPLETE:e.success?u.cancelCall.resolve():u.cancelCall.reject(Fn(e.reason)),E(this,oi,uf).call(this,u,t);break;case _t.CANCEL:if(!c)break;new Promise(function(d){var p;d((p=c.onCancel)==null?void 0:p.call(c,Fn(e.reason)))}).then(function(){a.postMessage({sourceName:i,targetName:r,stream:_t.CANCEL_COMPLETE,streamId:t,success:!0})},function(d){a.postMessage({sourceName:i,targetName:r,stream:_t.CANCEL_COMPLETE,streamId:t,reason:Fn(d)})}),c.sinkCapability.reject(Fn(e.reason)),c.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},uf=async function(e,t){var i,r,a;await Promise.allSettled([(i=e.startCall)==null?void 0:i.promise,(r=e.pullCall)==null?void 0:r.promise,(a=e.cancelCall)==null?void 0:a.promise]),delete this.streamControllers[t]};var jo,jc;class q1{constructor({parsedData:e,rawData:t}){x(this,jo);x(this,jc);A(this,jo,e),A(this,jc,t)}getRaw(){return l(this,jc)}get(e){return l(this,jo).get(e)??null}getAll(){return Iy(l(this,jo))}has(e){return l(this,jo).has(e)}}jo=new WeakMap,jc=new WeakMap;const el=Symbol("INTERNAL");var Bc,Uc,Vc,bl;class Y1{constructor(e,{name:t,intent:i,usage:r,rbGroups:a}){x(this,Bc,!1);x(this,Uc,!1);x(this,Vc,!1);x(this,bl,!0);A(this,Bc,!!(e&Vn.DISPLAY)),A(this,Uc,!!(e&Vn.PRINT)),this.name=t,this.intent=i,this.usage=r,this.rbGroups=a}get visible(){if(l(this,Vc))return l(this,bl);if(!l(this,bl))return!1;const{print:e,view:t}=this.usage;return l(this,Bc)?(t==null?void 0:t.viewState)!=="OFF":l(this,Uc)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,i=!1){e!==el&&nt("Internal method `_setVisible` called."),A(this,Vc,i),A(this,bl,t)}}Bc=new WeakMap,Uc=new WeakMap,Vc=new WeakMap,bl=new WeakMap;var Lr,Xe,xl,Cl,$c,Vm;class K1{constructor(e,t=Vn.DISPLAY){x(this,$c);x(this,Lr,null);x(this,Xe,new Map);x(this,xl,null);x(this,Cl,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,A(this,Cl,e.order);for(const i of e.groups)l(this,Xe).set(i.id,new Y1(t,i));if(e.baseState==="OFF")for(const i of l(this,Xe).values())i._setVisible(el,!1);for(const i of e.on)l(this,Xe).get(i)._setVisible(el,!0);for(const i of e.off)l(this,Xe).get(i)._setVisible(el,!1);A(this,xl,this.getHash())}}isVisible(e){if(l(this,Xe).size===0)return!0;if(!e)return tp("Optional content group not defined."),!0;if(e.type==="OCG")return l(this,Xe).has(e.id)?l(this,Xe).get(e.id).visible:(Me(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return E(this,$c,Vm).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!l(this,Xe).has(t))return Me(`Optional content group not found: ${t}`),!0;if(l(this,Xe).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!l(this,Xe).has(t))return Me(`Optional content group not found: ${t}`),!0;if(!l(this,Xe).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!l(this,Xe).has(t))return Me(`Optional content group not found: ${t}`),!0;if(!l(this,Xe).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!l(this,Xe).has(t))return Me(`Optional content group not found: ${t}`),!0;if(l(this,Xe).get(t).visible)return!1}return!0}return Me(`Unknown optional content policy ${e.policy}.`),!0}return Me(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,i=!0){var a;const r=l(this,Xe).get(e);if(!r){Me(`Optional content group not found: ${e}`);return}if(i&&t&&r.rbGroups.length)for(const u of r.rbGroups)for(const c of u)c!==e&&((a=l(this,Xe).get(c))==null||a._setVisible(el,!1,!0));r._setVisible(el,!!t,!0),A(this,Lr,null)}setOCGState({state:e,preserveRB:t}){let i;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":i=r;continue}const a=l(this,Xe).get(r);if(a)switch(i){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!a.visible,t);break}}A(this,Lr,null)}get hasInitialVisibility(){return l(this,xl)===null||this.getHash()===l(this,xl)}getOrder(){return l(this,Xe).size?l(this,Cl)?l(this,Cl).slice():[...l(this,Xe).keys()]:null}getGroups(){return l(this,Xe).size>0?Iy(l(this,Xe)):null}getGroup(e){return l(this,Xe).get(e)||null}getHash(){if(l(this,Lr)!==null)return l(this,Lr);const e=new JA;for(const[t,i]of l(this,Xe))e.update(`${t}:${i.visible}`);return A(this,Lr,e.hexdigest())}}Lr=new WeakMap,Xe=new WeakMap,xl=new WeakMap,Cl=new WeakMap,$c=new WeakSet,Vm=function(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let r=1;r<t;r++){const a=e[r];let u;if(Array.isArray(a))u=E(this,$c,Vm).call(this,a);else if(l(this,Xe).has(a))u=l(this,Xe).get(a).visible;else return Me(`Optional content group not found: ${a}`),!0;switch(i){case"And":if(!u)return!1;break;case"Or":if(u)return!0;break;case"Not":return!u;default:return!0}}return i==="And"};class Q1{constructor(e,{disableRange:t=!1,disableStream:i=!1}){Lt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:a,progressiveDone:u,contentDispositionFilename:c}=e;if(this._queuedChunks=[],this._progressiveDone=u,this._contentDispositionFilename=c,(a==null?void 0:a.length)>0){const d=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((d,p)=>{this._onReceiveData({begin:d,chunk:p})}),e.addProgressListener((d,p)=>{this._onProgress({loaded:d,total:p})}),e.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const r=this._rangeReaders.some(function(a){return a._begin!==e?!1:(a._enqueue(i),!0)});Lt(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,i,r,a;e.total===void 0?(i=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||i.call(t,{loaded:e.loaded}):(a=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||a.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Lt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new J1(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new Z1(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeReaders.slice(0))i.cancel(e);this._pdfDataRangeTransport.abort()}}class J1{constructor(e,t,i=!1,r=null){this._stream=e,this._done=i||!1,this._filename=Ny(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Z1{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function ex(f){let e=!0,t=i("filename\\*","i").exec(f);if(t){t=t[1];let m=c(t);return m=unescape(m),m=d(m),m=p(m),a(m)}if(t=u(f),t){const m=p(t);return a(m)}if(t=i("filename","i").exec(f),t){t=t[1];let m=c(t);return m=p(m),a(m)}function i(m,v){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',v)}function r(m,v){if(m){if(!/^[\x00-\xFF]+$/.test(v))return v;try{const w=new TextDecoder(m,{fatal:!0}),_=ip(v);v=w.decode(_),e=!1}catch{}}return v}function a(m){return e&&/[\x80-\xff]/.test(m)&&(m=r("utf-8",m),e&&(m=r("iso-8859-1",m))),m}function u(m){const v=[];let w;const _=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(w=_.exec(m))!==null;){let[,C,P,k]=w;if(C=parseInt(C,10),C in v){if(C===0)break;continue}v[C]=[P,k]}const b=[];for(let C=0;C<v.length&&C in v;++C){let[P,k]=v[C];k=c(k),P&&(k=unescape(k),C===0&&(k=d(k))),b.push(k)}return b.join("")}function c(m){if(m.startsWith('"')){const v=m.slice(1).split('\\"');for(let w=0;w<v.length;++w){const _=v[w].indexOf('"');_!==-1&&(v[w]=v[w].slice(0,_),v.length=w+1),v[w]=v[w].replaceAll(/\\(.)/g,"$1")}m=v.join('"')}return m}function d(m){const v=m.indexOf("'");if(v===-1)return m;const w=m.slice(0,v),b=m.slice(v+1).replace(/^[^']*'/,"");return r(w,b)}function p(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(v,w,_,b){if(_==="q"||_==="Q")return b=b.replaceAll("_"," "),b=b.replaceAll(/=([0-9a-fA-F]{2})/g,function(C,P){return String.fromCharCode(parseInt(P,16))}),r(w,b);try{b=atob(b)}catch{}return r(w,b)})}return""}function By(f,e){const t=new Headers;if(!f||!e||typeof e!="object")return t;for(const i in e){const r=e[i];r!==void 0&&t.append(i,r)}return t}function Uy({responseHeaders:f,isHttp:e,rangeChunkSize:t,disableRange:i}){const r={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(f.get("Content-Length"),10);return!Number.isInteger(a)||(r.suggestedLength=a,a<=2*t)||i||!e||f.get("Accept-Ranges")!=="bytes"||(f.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function Vy(f){const e=f.get("Content-Disposition");if(e){let t=ex(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Ny(t))return t}return null}function op(f,e){return f===404||f===0&&e.startsWith("file:")?new Ea('Missing PDF "'+e+'".'):new np(`Unexpected server response (${f}) while retrieving PDF "${e}".`,f)}function d_(f){return f===200||f===206}function f_(f,e,t){return{method:"GET",headers:f,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function p_(f){return f instanceof Uint8Array?f.buffer:f instanceof ArrayBuffer?f:(Me(`getArrayBuffer - unexpected data format: ${f}`),new Uint8Array(f).buffer)}class oA{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=By(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Lt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new tx(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new nx(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class tx{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const i=new Headers(e.headers),r=t.url;fetch(r,f_(i,this._withCredentials,this._abortController)).then(a=>{if(!d_(a.status))throw op(a.status,r);this._reader=a.body.getReader(),this._headersCapability.resolve();const u=a.headers,{allowRangeRequests:c,suggestedLength:d}=Uy({responseHeaders:u,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=d||this._contentLength,this._filename=Vy(u),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ba("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:p_(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class nx{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const a=new Headers(e.headers);a.append("Range",`bytes=${t}-${i-1}`);const u=r.url;fetch(u,f_(a,this._withCredentials,this._abortController)).then(c=>{if(!d_(c.status))throw op(c.status,u);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:p_(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const um=200,cm=206;function ix(f){const e=f.response;return typeof e!="string"?e:ip(e).buffer}class sx{constructor({url:e,httpHeaders:t,withCredentials:i}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=By(this.isHttp,t),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,i){const r={begin:e,end:t};for(const a in i)r[a]=i[a];return this.request(r)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[a,u]of this.headers)t.setRequestHeader(a,u);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=cm):r.expectedStatus=um,t.responseType="arraybuffer",e.onError&&(t.onerror=function(a){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){var r;const i=this.pendingRequests[e];i&&((r=i.onProgress)==null||r.call(i,t))}onStateChange(e,t){var d,p,m;const i=this.pendingRequests[e];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){(d=i.onError)==null||d.call(i,r.status);return}const a=r.status||um;if(!(a===um&&i.expectedStatus===cm)&&a!==i.expectedStatus){(p=i.onError)==null||p.call(i,r.status);return}const c=ix(r);if(a===cm){const v=r.getResponseHeader("Content-Range"),w=/bytes (\d+)-(\d+)\/(\d+)/.exec(v);i.onDone({begin:parseInt(w[1],10),chunk:c})}else c?i.onDone({begin:0,chunk:c}):(m=i.onError)==null||m.call(i,r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class rx{constructor(e){this._source=e,this._manager=new sx(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Lt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new ox(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const i=new ax(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class ox{constructor(e,t){this._manager=e;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(i),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),i=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(u=>{const[c,...d]=u.split(": ");return[c,d.join(": ")]})),{allowRangeRequests:r,suggestedLength:a}=Uy({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=Vy(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=op(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class ax{constructor(e,t,i){this._manager=e;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,i,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=op(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const lx=/^[a-z][a-z0-9\-+.]+:/i;function ux(f){if(lx.test(f))return new URL(f);const e=qr.get("url");return new URL(e.pathToFileURL(f))}function g_(f,e,t){return f.protocol==="http:"?qr.get("http").request(f,{headers:e},t):qr.get("https").request(f,{headers:e},t)}class cx{constructor(e){this.source=e,this.url=ux(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=By(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Lt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new fx(this):new hx(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=this.isFsUrl?new px(this,e,t):new dx(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class m_{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ba("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class y_{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class hx extends m_{constructor(e){super(e);const t=Object.fromEntries(e.headers),i=r=>{if(r.statusCode===404){const d=new Ea(`Missing PDF "${this._url}".`);this._storedError=d,this._headersCapability.reject(d);return}this._headersCapability.resolve(),this._setReadableStream(r);const a=new Headers(this._readableStream.headers),{allowRangeRequests:u,suggestedLength:c}=Uy({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=c||this._contentLength,this._filename=Vy(a)};this._request=g_(this._url,t,i),this._request.on("error",r=>{this._storedError=r,this._headersCapability.reject(r)}),this._request.end()}}class dx extends y_{constructor(e,t,i){super(e);const r=Object.fromEntries(e.headers);r.Range=`bytes=${t}-${i-1}`;const a=u=>{if(u.statusCode===404){const c=new Ea(`Missing PDF "${this._url}".`);this._storedError=c;return}this._setReadableStream(u)};this._request=g_(this._url,r,a),this._request.on("error",u=>{this._storedError=u}),this._request.end()}}class fx extends m_{constructor(e){super(e);const t=qr.get("fs");t.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new Ea(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}}class px extends y_{constructor(e,t,i){super(e);const r=qr.get("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:i-1}))}}const gx=1e5,En=30,mx=.8;var EA,Mr,Cn,Wc,Gc,Bo,Cs,Xc,qc,Uo,kl,Tl,Ir,Pl,Yc,Rl,Vo,Kc,Qc,pt,$o,Wo,Jc,Fr,Ll,qs,v_,w_,Wm,Wn,cf,Gm,A_,__;let $m=(pt=class{constructor({textContentSource:e,container:t,viewport:i}){x(this,qs);x(this,Mr,Promise.withResolvers());x(this,Cn,null);x(this,Wc,!1);x(this,Gc,!!((EA=globalThis.FontInspector)!=null&&EA.enabled));x(this,Bo,null);x(this,Cs,null);x(this,Xc,0);x(this,qc,0);x(this,Uo,null);x(this,kl,null);x(this,Tl,0);x(this,Ir,0);x(this,Pl,Object.create(null));x(this,Yc,[]);x(this,Rl,null);x(this,Vo,[]);x(this,Kc,new WeakMap);x(this,Qc,null);var d;if(e instanceof ReadableStream)A(this,Rl,e);else if(typeof e=="object")A(this,Rl,new ReadableStream({start(p){p.enqueue(e),p.close()}}));else throw new Error('No "textContentSource" parameter specified.');A(this,Cn,A(this,kl,t)),A(this,Ir,i.scale*(globalThis.devicePixelRatio||1)),A(this,Tl,i.rotation),A(this,Cs,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:a,pageX:u,pageY:c}=i.rawDims;A(this,Qc,[1,0,0,-1,-u,c+a]),A(this,qc,r),A(this,Xc,a),E(d=pt,Wn,A_).call(d),ya(t,i),l(this,Mr).promise.finally(()=>{l(pt,Ll).delete(this),A(this,Cs,null),A(this,Pl,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=pn.platform;return ze(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{l(this,Uo).read().then(({value:t,done:i})=>{if(i){l(this,Mr).resolve();return}l(this,Bo)??A(this,Bo,t.lang),Object.assign(l(this,Pl),t.styles),E(this,qs,v_).call(this,t.items),e()},l(this,Mr).reject)};return A(this,Uo,l(this,Rl).getReader()),l(pt,Ll).add(this),e(),l(this,Mr).promise}update({viewport:e,onBefore:t=null}){var a;const i=e.scale*(globalThis.devicePixelRatio||1),r=e.rotation;if(r!==l(this,Tl)&&(t==null||t(),A(this,Tl,r),ya(l(this,kl),{rotation:r})),i!==l(this,Ir)){t==null||t(),A(this,Ir,i);const u={div:null,properties:null,ctx:E(a=pt,Wn,cf).call(a,l(this,Bo))};for(const c of l(this,Vo))u.properties=l(this,Kc).get(c),u.div=c,E(this,qs,Wm).call(this,u)}}cancel(){var t;const e=new ba("TextLayer task cancelled.");(t=l(this,Uo))==null||t.cancel(e).catch(()=>{}),A(this,Uo,null),l(this,Mr).reject(e)}get textDivs(){return l(this,Vo)}get textContentItemsStr(){return l(this,Yc)}static cleanup(){if(!(l(this,Ll).size>0)){l(this,$o).clear();for(const{canvas:e}of l(this,Wo).values())e.remove();l(this,Wo).clear()}}},Mr=new WeakMap,Cn=new WeakMap,Wc=new WeakMap,Gc=new WeakMap,Bo=new WeakMap,Cs=new WeakMap,Xc=new WeakMap,qc=new WeakMap,Uo=new WeakMap,kl=new WeakMap,Tl=new WeakMap,Ir=new WeakMap,Pl=new WeakMap,Yc=new WeakMap,Rl=new WeakMap,Vo=new WeakMap,Kc=new WeakMap,Qc=new WeakMap,$o=new WeakMap,Wo=new WeakMap,Jc=new WeakMap,Fr=new WeakMap,Ll=new WeakMap,qs=new WeakSet,v_=function(e){var r,a;if(l(this,Wc))return;(a=l(this,Cs)).ctx??(a.ctx=E(r=pt,Wn,cf).call(r,l(this,Bo)));const t=l(this,Vo),i=l(this,Yc);for(const u of e){if(t.length>gx){Me("Ignoring additional textDivs for performance reasons."),A(this,Wc,!0);return}if(u.str===void 0){if(u.type==="beginMarkedContentProps"||u.type==="beginMarkedContent"){const c=l(this,Cn);A(this,Cn,document.createElement("span")),l(this,Cn).classList.add("markedContent"),u.id!==null&&l(this,Cn).setAttribute("id",`${u.id}`),c.append(l(this,Cn))}else u.type==="endMarkedContent"&&A(this,Cn,l(this,Cn).parentNode);continue}i.push(u.str),E(this,qs,w_).call(this,u)}},w_=function(e){var C;const t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};l(this,Vo).push(t);const r=fe.transform(l(this,Qc),e.transform);let a=Math.atan2(r[1],r[0]);const u=l(this,Pl)[e.fontName];u.vertical&&(a+=Math.PI/2);let c=l(this,Gc)&&u.fontSubstitution||u.fontFamily;c=pt.fontFamilyMap.get(c)||c;const d=Math.hypot(r[2],r[3]),p=d*E(C=pt,Wn,__).call(C,c,l(this,Bo));let m,v;a===0?(m=r[4],v=r[5]-p):(m=r[4]+p*Math.sin(a),v=r[5]-p*Math.cos(a));const w="calc(var(--scale-factor)*",_=t.style;l(this,Cn)===l(this,kl)?(_.left=`${(100*m/l(this,qc)).toFixed(2)}%`,_.top=`${(100*v/l(this,Xc)).toFixed(2)}%`):(_.left=`${w}${m.toFixed(2)}px)`,_.top=`${w}${v.toFixed(2)}px)`),_.fontSize=`${w}${(l(pt,Fr)*d).toFixed(2)}px)`,_.fontFamily=c,i.fontSize=d,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,l(this,Gc)&&(t.dataset.fontName=u.fontSubstitutionLoadedName||e.fontName),a!==0&&(i.angle=a*(180/Math.PI));let b=!1;if(e.str.length>1)b=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const P=Math.abs(e.transform[0]),k=Math.abs(e.transform[3]);P!==k&&Math.max(P,k)/Math.min(P,k)>1.5&&(b=!0)}if(b&&(i.canvasWidth=u.vertical?e.height:e.width),l(this,Kc).set(t,i),l(this,Cs).div=t,l(this,Cs).properties=i,E(this,qs,Wm).call(this,l(this,Cs)),i.hasText&&l(this,Cn).append(t),i.hasEOL){const P=document.createElement("br");P.setAttribute("role","presentation"),l(this,Cn).append(P)}},Wm=function(e){var c;const{div:t,properties:i,ctx:r}=e,{style:a}=t;let u="";if(l(pt,Fr)>1&&(u=`scale(${1/l(pt,Fr)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:d}=a,{canvasWidth:p,fontSize:m}=i;E(c=pt,Wn,Gm).call(c,r,m*l(this,Ir),d);const{width:v}=r.measureText(t.textContent);v>0&&(u=`scaleX(${p*l(this,Ir)/v}) ${u}`)}i.angle!==0&&(u=`rotate(${i.angle}deg) ${u}`),u.length>0&&(a.transform=u)},Wn=new WeakSet,cf=function(e=null){let t=l(this,Wo).get(e||(e=""));if(!t){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,Wo).set(e,t),l(this,Jc).set(t,{size:0,family:""})}return t},Gm=function(e,t,i){const r=l(this,Jc).get(e);t===r.size&&i===r.family||(e.font=`${t}px ${i}`,r.size=t,r.family=i)},A_=function(){if(l(this,Fr)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),A(this,Fr,e.getBoundingClientRect().height),e.remove()},__=function(e,t){const i=l(this,$o).get(e);if(i)return i;const r=E(this,Wn,cf).call(this,t);r.canvas.width=r.canvas.height=En,E(this,Wn,Gm).call(this,r,En,e);const a=r.measureText("");let u=a.fontBoundingBoxAscent,c=Math.abs(a.fontBoundingBoxDescent);if(u){const m=u/(u+c);return l(this,$o).set(e,m),r.canvas.width=r.canvas.height=0,m}r.strokeStyle="red",r.clearRect(0,0,En,En),r.strokeText("g",0,0);let d=r.getImageData(0,0,En,En).data;c=0;for(let m=d.length-1-3;m>=0;m-=4)if(d[m]>0){c=Math.ceil(m/4/En);break}r.clearRect(0,0,En,En),r.strokeText("A",0,En),d=r.getImageData(0,0,En,En).data,u=0;for(let m=0,v=d.length;m<v;m+=4)if(d[m]>0){u=En-Math.floor(m/4/En);break}r.canvas.width=r.canvas.height=0;const p=u?u/(u+c):mx;return l(this,$o).set(e,p),p},x(pt,Wn),x(pt,$o,new Map),x(pt,Wo,new Map),x(pt,Jc,new WeakMap),x(pt,Fr,null),x(pt,Ll,new Set),pt);class mc{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};function r(a){var d;if(!a)return;let u=null;const c=a.name;if(c==="#text")u=a.value;else if(mc.shouldBuildText(c))(d=a==null?void 0:a.attributes)!=null&&d.textContent?u=a.attributes.textContent:a.value&&(u=a.value);else return;if(u!==null&&t.push({str:u}),!!a.children)for(const p of a.children)r(p)}return r(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const yx=65536,vx=100,wx=5e3,Ax=an?M1:P1,_x=an?I1:i_,Sx=an?L1:R1,Ex=an?F1:a_;function bx(f={}){typeof f=="string"||f instanceof URL?f={url:f}:(f instanceof ArrayBuffer||ArrayBuffer.isView(f))&&(f={data:f});const e=new Xm,{docId:t}=e,i=f.url?xx(f.url):null,r=f.data?Cx(f.data):null,a=f.httpHeaders||null,u=f.withCredentials===!0,c=f.password??null,d=f.range instanceof S_?f.range:null,p=Number.isInteger(f.rangeChunkSize)&&f.rangeChunkSize>0?f.rangeChunkSize:yx;let m=f.worker instanceof ol?f.worker:null;const v=f.verbosity,w=typeof f.docBaseUrl=="string"&&!rp(f.docBaseUrl)?f.docBaseUrl:null,_=typeof f.cMapUrl=="string"?f.cMapUrl:null,b=f.cMapPacked!==!1,C=f.CMapReaderFactory||_x,P=typeof f.standardFontDataUrl=="string"?f.standardFontDataUrl:null,k=f.StandardFontDataFactory||Ex,I=f.stopAtErrors!==!0,D=Number.isInteger(f.maxImageSize)&&f.maxImageSize>-1?f.maxImageSize:-1,F=f.isEvalSupported!==!1,j=typeof f.isOffscreenCanvasSupported=="boolean"?f.isOffscreenCanvasSupported:!an,H=typeof f.isChrome=="boolean"?f.isChrome:!pn.platform.isFirefox&&typeof window<"u"&&!!(window!=null&&window.chrome),V=Number.isInteger(f.canvasMaxAreaInBytes)?f.canvasMaxAreaInBytes:-1,$=typeof f.disableFontFace=="boolean"?f.disableFontFace:an,K=f.fontExtraProperties===!0,te=f.enableXfa===!0,ee=f.ownerDocument||globalThis.document,Se=f.disableRange===!0,de=f.disableStream===!0,ce=f.disableAutoFetch===!0,ve=f.pdfBug===!0,pe=f.CanvasFactory||Ax,Y=f.FilterFactory||Sx,B=f.enableHWA===!0,se=d?d.length:f.length??NaN,Q=typeof f.useSystemFonts=="boolean"?f.useSystemFonts:!an&&!$,M=typeof f.useWorkerFetch=="boolean"?f.useWorkerFetch:C===i_&&k===a_&&_&&P&&Qu(_,document.baseURI)&&Qu(P,document.baseURI);f.canvasFactory&&qw("`canvasFactory`-instance option, please use `CanvasFactory` instead."),f.filterFactory&&qw("`filterFactory`-instance option, please use `FilterFactory` instead.");const U=null;o1(v);const ae={canvasFactory:new pe({ownerDocument:ee,enableHWA:B}),filterFactory:new Y({docId:t,ownerDocument:ee}),cMapReaderFactory:M?null:new C({baseUrl:_,isCompressed:b}),standardFontDataFactory:M?null:new k({baseUrl:P})};if(!m){const me={verbosity:v,port:$s.workerPort};m=me.port?ol.fromPort(me):new ol(me),e._worker=m}const we={docId:t,apiVersion:"4.8.69",data:r,password:c,disableAutoFetch:ce,rangeChunkSize:p,length:se,docBaseUrl:w,enableXfa:te,evaluatorOptions:{maxImageSize:D,disableFontFace:$,ignoreErrors:I,isEvalSupported:F,isOffscreenCanvasSupported:j,isChrome:H,canvasMaxAreaInBytes:V,fontExtraProperties:K,useSystemFonts:Q,cMapUrl:M?_:null,standardFontDataUrl:M?P:null}},Ce={disableFontFace:$,fontExtraProperties:K,ownerDocument:ee,pdfBug:ve,styleElement:U,loadingParams:{disableAutoFetch:ce,enableXfa:te}};return m.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const me=m.messageHandler.sendWithPromise("GetDocRequest",we,r?[r.buffer]:null);let ge;if(d)ge=new Q1(d,{disableRange:Se,disableStream:de});else if(!r){if(!i)throw new Error("getDocument - no `url` parameter provided.");let Re;an?Re=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&Qu(i)?oA:cx:Re=Qu(i)?oA:rx,ge=new Re({url:i,length:se,httpHeaders:a,withCredentials:u,rangeChunkSize:p,disableRange:Se,disableStream:de})}return me.then(Re=>{if(e.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const Ne=new sc(t,Re,m.port),Ie=new Rx(Ne,e,ge,Ce,ae);e._transport=Ie,Ne.send("Ready",null)})}).catch(e._capability.reject),e}function xx(f){if(f instanceof URL)return f.href;try{return new URL(f,window.location).href}catch{if(an&&typeof f=="string")return f}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Cx(f){if(an&&typeof Buffer<"u"&&f instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(f instanceof Uint8Array&&f.byteLength===f.buffer.byteLength)return f;if(typeof f=="string")return ip(f);if(f instanceof ArrayBuffer||ArrayBuffer.isView(f)||typeof f=="object"&&!isNaN(f==null?void 0:f.length))return new Uint8Array(f);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function aA(f){return typeof f=="object"&&Number.isInteger(f==null?void 0:f.num)&&f.num>=0&&Number.isInteger(f==null?void 0:f.gen)&&f.gen>=0}var Wf;const Gf=class Gf{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${cn(Gf,Wf)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,r}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Wf=new WeakMap,x(Gf,Wf,0);let Xm=Gf,S_=class{constructor(e,t,i=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){nt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class kx{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ze(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Dr,ks,si,tl,hf;class Tx{constructor(e,t,i,r=!1){x(this,si);x(this,Dr,null);x(this,ks,!1);this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=r?new Xw:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new E_,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:a=!1}={}){return new Mh({viewBox:this.view,scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:a})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ze(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:i="display",annotationMode:r=wr.ENABLE,transform:a=null,background:u=null,optionalContentConfigPromise:c=null,annotationCanvasMap:d=null,pageColors:p=null,printAnnotationStorage:m=null,isEditing:v=!1}){var F,j;(F=this._stats)==null||F.time("Overall");const w=this._transport.getRenderingIntent(i,r,m,v),{renderingIntent:_,cacheKey:b}=w;A(this,ks,!1),E(this,si,hf).call(this),c||(c=this._transport.getOptionalContentConfig(_));let C=this._intentStates.get(b);C||(C=Object.create(null),this._intentStates.set(b,C)),C.streamReaderCancelTimeout&&(clearTimeout(C.streamReaderCancelTimeout),C.streamReaderCancelTimeout=null);const P=!!(_&Vn.PRINT);C.displayReadyCapability||(C.displayReadyCapability=Promise.withResolvers(),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(j=this._stats)==null||j.time("Page Request"),this._pumpOperatorList(w));const k=H=>{var V;C.renderTasks.delete(I),(this._maybeCleanupAfterRender||P)&&A(this,ks,!0),E(this,si,tl).call(this,!P),H?(I.capability.reject(H),this._abortOperatorList({intentState:C,reason:H instanceof Error?H:new Error(H)})):I.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(V=globalThis.Stats)!=null&&V.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},I=new Ym({callback:k,params:{canvasContext:e,viewport:t,transform:a,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:C.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!P,pdfBug:this._pdfBug,pageColors:p});(C.renderTasks||(C.renderTasks=new Set)).add(I);const D=I.task;return Promise.all([C.displayReadyCapability.promise,c]).then(([H,V])=>{var $;if(this.destroyed){k();return}if(($=this._stats)==null||$.time("Rendering"),!(V.renderingIntent&_))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");I.initializeGraphics({transparency:H,optionalContentConfig:V}),I.operatorListChanged()}).catch(k),D}getOperatorList({intent:e="display",annotationMode:t=wr.ENABLE,printAnnotationStorage:i=null,isEditing:r=!1}={}){var p;function a(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(d))}const u=this._transport.getRenderingIntent(e,t,i,r,!0);let c=this._intentStates.get(u.cacheKey);c||(c=Object.create(null),this._intentStates.set(u.cacheKey,c));let d;return c.opListReadCapability||(d=Object.create(null),d.operatorListChanged=a,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||(c.renderTasks=new Set)).add(d),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(p=this._stats)==null||p.time("Page Request"),this._pumpOperatorList(u)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>mc.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,r){function a(){u.read().then(function({value:d,done:p}){if(p){i(c);return}c.lang??(c.lang=d.lang),Object.assign(c.styles,d.styles),c.items.push(...d.items),a()},r)}const u=t.getReader(),c={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),A(this,ks,!1),E(this,si,hf).call(this),Promise.all(e)}cleanup(e=!1){A(this,ks,!0);const t=E(this,si,tl).call(this,!1);return e&&t&&this._stats&&(this._stats=new Xw),t}_startRenderPage(e,t){var r,a;const i=this._intentStates.get(t);i&&((r=this._stats)==null||r.timeEnd("Page Request"),(a=i.displayReadyCapability)==null||a.resolve(e))}_renderPageChunk(e,t){for(let i=0,r=e.length;i<r;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&E(this,si,tl).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i,modifiedIds:r}){const{map:a,transfer:u}=i,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:a,modifiedIds:r},u).getReader(),p=this._intentStates.get(t);p.streamReader=d;const m=()=>{d.read().then(({value:v,done:w})=>{if(w){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(v,p),m())},v=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const w of p.renderTasks)w.operatorListChanged();E(this,si,tl).call(this,!0)}if(p.displayReadyCapability)p.displayReadyCapability.reject(v);else if(p.opListReadCapability)p.opListReadCapability.reject(v);else throw v}})};m()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof Dy){let r=vx;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new ba(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,a]of this._intentStates)if(a===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}Dr=new WeakMap,ks=new WeakMap,si=new WeakSet,tl=function(e=!1){if(E(this,si,hf).call(this),!l(this,ks)||this.destroyed)return!1;if(e)return A(this,Dr,setTimeout(()=>{A(this,Dr,null),E(this,si,tl).call(this,!1)},wx)),!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),A(this,ks,!1),!0},hf=function(){l(this,Dr)&&(clearTimeout(l(this,Dr)),A(this,Dr,null))};var Ts,Xf;class Px{constructor(){x(this,Ts,new Map);x(this,Xf,Promise.resolve())}postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};l(this,Xf).then(()=>{for(const[r]of l(this,Ts))r.call(this,i)})}addEventListener(e,t,i=null){let r=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:a}=i;if(a.aborted){Me("LoopbackPort - cannot use an `aborted` signal.");return}const u=()=>this.removeEventListener(e,t);r=()=>a.removeEventListener("abort",u),a.addEventListener("abort",u)}l(this,Ts).set(t,r)}removeEventListener(e,t){const i=l(this,Ts).get(t);i==null||i(),l(this,Ts).delete(t)}terminate(){for(const[,e]of l(this,Ts))e==null||e();l(this,Ts).clear()}}Ts=new WeakMap,Xf=new WeakMap;var qf,Go,Xo,Ml,df,Il,ff;const rt=class rt{constructor({name:e=null,port:t=null,verbosity:i=a1()}={}){x(this,Ml);var r;if(this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((r=l(rt,Xo))!=null&&r.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(l(rt,Xo)||A(rt,Xo,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return an?Promise.all([qr.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new sc("main","worker",e),this._messageHandler.on("ready",function(){}),E(this,Ml,df).call(this)}_initialize(){if(l(rt,Go)||l(rt,Il,ff)){this._setupFakeWorker();return}let{workerSrc:e}=rt;try{rt._isSameOrigin(window.location.href,e)||(e=rt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new sc("main","worker",t),r=()=>{a.abort(),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},a=new AbortController;t.addEventListener("error",()=>{this._webWorker||r()},{signal:a.signal}),i.on("test",c=>{if(a.abort(),this.destroyed||!c){r();return}this._messageHandler=i,this._port=t,this._webWorker=t,E(this,Ml,df).call(this)}),i.on("ready",c=>{if(a.abort(),this.destroyed){r();return}try{u()}catch{this._setupFakeWorker()}});const u=()=>{const c=new Uint8Array;i.send("test",c,[c.buffer])};u();return}catch{tp("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){l(rt,Go)||(Me("Setting up fake worker."),A(rt,Go,!0)),rt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new Px;this._port=t;const i=`fake${cn(rt,qf)._++}`,r=new sc(i+"_worker",i,t);e.setup(r,t),this._messageHandler=new sc(i,i+"_worker",t),E(this,Ml,df).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=l(rt,Xo))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var i;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(i=l(this,Xo))==null?void 0:i.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new rt(e)}static get workerSrc(){if($s.workerSrc)return $s.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ze(this,"_setupFakeWorkerGlobal",(async()=>l(this,Il,ff)?l(this,Il,ff):(await import(this.workerSrc)).WorkerMessageHandler)())}};qf=new WeakMap,Go=new WeakMap,Xo=new WeakMap,Ml=new WeakSet,df=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Il=new WeakSet,ff=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},x(rt,Il),x(rt,qf,0),x(rt,Go,!1),x(rt,Xo),an&&(A(rt,Go,!0),$s.workerSrc||($s.workerSrc="./pdf.worker.mjs")),rt._isSameOrigin=(e,t)=>{let i;try{if(i=new URL(e),!i.origin||i.origin==="null")return!1}catch{return!1}const r=new URL(t,i);return i.origin===r.origin},rt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let ol=rt;var Ps,Qi,Fl,Dl,Ji,qo,rc;class Rx{constructor(e,t,i,r,a){x(this,qo);x(this,Ps,new Map);x(this,Qi,new Map);x(this,Fl,new Map);x(this,Dl,new Map);x(this,Ji,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new E_,this.fontLoader=new k1({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return ze(this,"annotationStorage",new Hy)}getRenderingIntent(e,t=wr.ENABLE,i=null,r=!1,a=!1){let u=Vn.DISPLAY,c=Dm;switch(e){case"any":u=Vn.ANY;break;case"display":break;case"print":u=Vn.PRINT;break;default:Me(`getRenderingIntent - invalid intent: ${e}`)}const d=u&Vn.PRINT&&i instanceof e_?i:this.annotationStorage;switch(t){case wr.DISABLE:u+=Vn.ANNOTATIONS_DISABLE;break;case wr.ENABLE:break;case wr.ENABLE_FORMS:u+=Vn.ANNOTATIONS_FORMS;break;case wr.ENABLE_STORAGE:u+=Vn.ANNOTATIONS_STORAGE,c=d.serializable;break;default:Me(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(u+=Vn.IS_EDITING),a&&(u+=Vn.OPLIST);const{ids:p,hash:m}=d.modifiedIds,v=[u,c.hash,m];return{renderingIntent:u,cacheKey:v.join("_"),annotationStorageSerializable:c,modifiedIds:p}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=l(this,Ji))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of l(this,Qi).values())e.push(r._destroy());l(this,Qi).clear(),l(this,Fl).clear(),l(this,Dl).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r;this.commonObjs.clear(),this.fontLoader.clear(),l(this,Ps).clear(),this.filterFactory.destroy(),$m.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new ba("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,r)=>{Lt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},r.onPull=()=>{this._fullReader.read().then(function({value:a,done:u}){if(u){r.close();return}Lt(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{this._fullReader.cancel(a),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),e.on("ReaderHeadersReady",async i=>{var c;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:a,contentLength:u}=this._fullReader;return(!r||!a)&&(this._lastProgress&&((c=t.onProgress)==null||c.call(t,this._lastProgress)),this._fullReader.onProgress=d=>{var p;(p=t.onProgress)==null||p.call(t,{loaded:d.loaded,total:d.total})}),{isStreamingSupported:r,isRangeSupported:a,contentLength:u}}),e.on("GetRangeReader",(i,r)=>{Lt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(i.begin,i.end);if(!a){r.close();return}r.onPull=()=>{a.read().then(function({value:u,done:c}){if(c){r.close();return}Lt(u instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(u),1,[u])}).catch(u=>{r.error(u)})},r.onCancel=u=>{a.cancel(u),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new kx(i,this))}),e.on("DocException",function(i){let r;switch(i.name){case"PasswordException":r=new fm(i.message,i.code);break;case"InvalidPDFException":r=new CA(i.message);break;case"MissingPDFException":r=new Ea(i.message);break;case"UnexpectedResponseException":r=new np(i.message,i.status);break;case"UnknownErrorException":r=new pm(i.message,i.details);break;default:nt("DocException - expected a valid Error.")}t._capability.reject(r)}),e.on("PasswordRequest",i=>{if(A(this,Ji,Promise.withResolvers()),t.onPassword){const r=a=>{a instanceof Error?l(this,Ji).reject(a):l(this,Ji).resolve({password:a})};try{t.onPassword(r,i.code)}catch(a){l(this,Ji).reject(a)}}else l(this,Ji).reject(new fm(i.message,i.code));return l(this,Ji).promise}),e.on("DataLoaded",i=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;l(this,Qi).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,r,a])=>{var u;if(this.destroyed||this.commonObjs.has(i))return null;switch(r){case"Font":const{disableFontFace:c,fontExtraProperties:d,pdfBug:p}=this._params;if("error"in a){const _=a.error;Me(`Error during font loading: ${_}`),this.commonObjs.resolve(i,_);break}const m=p&&((u=globalThis.FontInspector)!=null&&u.enabled)?(_,b)=>globalThis.FontInspector.fontAdded(_,b):null,v=new T1(a,{disableFontFace:c,inspectFont:m});this.fontLoader.bind(v).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!d&&v.data&&(v.data=null),this.commonObjs.resolve(i,v)});break;case"CopyLocalImage":const{imageRef:w}=a;Lt(w,"The imageRef must be defined.");for(const _ of l(this,Qi).values())for(const[,b]of _.objs)if((b==null?void 0:b.ref)===w)return b.dataLen?(this.commonObjs.resolve(i,structuredClone(b)),b.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,a);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([i,r,a,u])=>{var d;if(this.destroyed)return;const c=l(this,Qi).get(r);if(!c.objs.has(i)){if(c._intentStates.size===0){(d=u==null?void 0:u.bitmap)==null||d.close();return}switch(a){case"Image":c.objs.resolve(i,u),(u==null?void 0:u.dataLen)>n1&&(c._maybeCleanupAfterRender=!0);break;case"Pattern":c.objs.resolve(i,u);break;default:throw new Error(`Got unknown object type ${a}`)}}}),e.on("DocProgress",i=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:i.loaded,total:i.total})}),e.on("FetchBuiltInCMap",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)}),e.on("FetchStandardFontData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&Me("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((i=this._fullReader)==null?void 0:i.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=l(this,Fl).get(t);if(i)return i;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&l(this,Dl).set(a.refStr,e);const u=new Tx(t,a,this,this._params.pdfBug);return l(this,Qi).set(t,u),u});return l(this,Fl).set(t,r),r}getPageIndex(e){return aA(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return E(this,qo,rc).call(this,"GetFieldObjects")}hasJSActions(){return E(this,qo,rc).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return E(this,qo,rc).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return E(this,qo,rc).call(this,"GetOptionalContentConfig").then(t=>new K1(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=l(this,Ps).get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(r=>{var a,u;return{info:r[0],metadata:r[1]?new q1(r[1]):null,contentDispositionFilename:((a=this._fullReader)==null?void 0:a.filename)??null,contentLength:((u=this._fullReader)==null?void 0:u.contentLength)??null}});return l(this,Ps).set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of l(this,Qi).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),l(this,Ps).clear(),this.filterFactory.destroy(!0),$m.cleanup()}}cachedPageNumber(e){if(!aA(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return l(this,Dl).get(t)??null}}Ps=new WeakMap,Qi=new WeakMap,Fl=new WeakMap,Dl=new WeakMap,Ji=new WeakMap,qo=new WeakSet,rc=function(e,t=null){const i=l(this,Ps).get(e);if(i)return i;const r=this.messageHandler.sendWithPromise(e,t);return l(this,Ps).set(e,r),r};const Jd=Symbol("INITIAL_DATA");var Ei,Zc,qm;class E_{constructor(){x(this,Zc);x(this,Ei,Object.create(null))}get(e,t=null){if(t){const r=E(this,Zc,qm).call(this,e);return r.promise.then(()=>t(r.data)),null}const i=l(this,Ei)[e];if(!i||i.data===Jd)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=l(this,Ei)[e];return!!t&&t.data!==Jd}resolve(e,t=null){const i=E(this,Zc,qm).call(this,e);i.data=t,i.resolve()}clear(){var e;for(const t in l(this,Ei)){const{data:i}=l(this,Ei)[t];(e=i==null?void 0:i.bitmap)==null||e.close()}A(this,Ei,Object.create(null))}*[Symbol.iterator](){for(const e in l(this,Ei)){const{data:t}=l(this,Ei)[e];t!==Jd&&(yield[e,t])}}}Ei=new WeakMap,Zc=new WeakSet,qm=function(e){var t;return(t=l(this,Ei))[e]||(t[e]={...Promise.withResolvers(),data:Jd})};var Nr;class Lx{constructor(e){x(this,Nr,null);A(this,Nr,e),this.onContinue=null}get promise(){return l(this,Nr).capability.promise}cancel(e=0){l(this,Nr).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=l(this,Nr).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=l(this,Nr);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Nr=new WeakMap;var Or,Yo;const Ao=class Ao{constructor({callback:e,params:t,objs:i,commonObjs:r,annotationCanvasMap:a,operatorList:u,pageIndex:c,canvasFactory:d,filterFactory:p,useRequestAnimationFrame:m=!1,pdfBug:v=!1,pageColors:w=null}){x(this,Or,null);this.callback=e,this.params=t,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=u,this._pageIndex=c,this.canvasFactory=d,this.filterFactory=p,this._pdfBug=v,this.pageColors=w,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Lx(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var c,d;if(this.cancelled)return;if(this._canvas){if(l(Ao,Yo).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(Ao,Yo).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:r,transform:a,background:u}=this.params;this.gfx=new rl(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:a,viewport:r,transparency:e,background:u}),this.operatorListIdx=0,this.graphicsReady=!0,(d=this.graphicsReadyCallback)==null||d.call(this)}cancel(e=null,t=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),l(this,Or)&&(window.cancelAnimationFrame(l(this,Or)),A(this,Or,null)),l(Ao,Yo).delete(this._canvas),this.callback(e||new Dy(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?A(this,Or,window.requestAnimationFrame(()=>{A(this,Or,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(Ao,Yo).delete(this._canvas),this.callback())))}};Or=new WeakMap,Yo=new WeakMap,x(Ao,Yo,new WeakSet);let Ym=Ao;const Mx="4.8.69",Ix="3634dab10";function lA(f){return Math.floor(Math.max(0,Math.min(1,f))*255).toString(16).padStart(2,"0")}function Ku(f){return Math.max(0,Math.min(255,255*f))}class uA{static CMYK_G([e,t,i,r]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Ku(e),[e,e,e]}static G_HTML([e]){const t=lA(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(Ku)}static RGB_HTML(e){return`#${e.map(lA).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,i+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,i,r]){return[Ku(1-Math.min(1,e+r)),Ku(1-Math.min(1,i+r)),Ku(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const r=1-e,a=1-t,u=1-i,c=Math.min(r,a,u);return["CMYK",r,a,u,c]}}class Fx{create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){nt("Abstract method `_createSVG` called.")}}class $y extends Fx{_createSVG(e){return document.createElementNS(ys,e)}}class b_{static setupStorage(e,t,i,r,a){const u=r.getValue(t,{value:null});switch(i.name){case"textarea":if(u.value!==null&&(e.textContent=u.value),a==="print")break;e.addEventListener("input",c=>{r.setValue(t,{value:c.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(u.value===i.attributes.xfaOn?e.setAttribute("checked",!0):u.value===i.attributes.xfaOff&&e.removeAttribute("checked"),a==="print")break;e.addEventListener("change",c=>{r.setValue(t,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(u.value!==null&&e.setAttribute("value",u.value),a==="print")break;e.addEventListener("input",c=>{r.setValue(t,{value:c.target.value})})}break;case"select":if(u.value!==null){e.setAttribute("value",u.value);for(const c of i.children)c.attributes.value===u.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}e.addEventListener("input",c=>{const d=c.target.options,p=d.selectedIndex===-1?"":d[d.selectedIndex].value;r.setValue(t,{value:p})});break}}static setAttributes({html:e,element:t,storage:i=null,intent:r,linkService:a}){const{attributes:u}=t,c=e instanceof HTMLAnchorElement;u.type==="radio"&&(u.name=`${u.name}-${r}`);for(const[d,p]of Object.entries(u))if(p!=null)switch(d){case"class":p.length&&e.setAttribute(d,p.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",p);break;case"style":Object.assign(e.style,p);break;case"textContent":e.textContent=p;break;default:(!c||d!=="href"&&d!=="newWindow")&&e.setAttribute(d,p)}c&&a.addLinkAttributes(e,u.href,u.newWindow),i&&u.dataId&&this.setupStorage(e,u.dataId,t,i)}static render(e){var v,w;const t=e.annotationStorage,i=e.linkService,r=e.xfaHtml,a=e.intent||"display",u=document.createElement(r.name);r.attributes&&this.setAttributes({html:u,element:r,intent:a,linkService:i});const c=a!=="richText",d=e.div;if(d.append(u),e.viewport){const _=`matrix(${e.viewport.transform.join(",")})`;d.style.transform=_}c&&d.setAttribute("class","xfaLayer xfaFont");const p=[];if(r.children.length===0){if(r.value){const _=document.createTextNode(r.value);u.append(_),c&&mc.shouldBuildText(r.name)&&p.push(_)}return{textDivs:p}}const m=[[r,-1,u]];for(;m.length>0;){const[_,b,C]=m.at(-1);if(b+1===_.children.length){m.pop();continue}const P=_.children[++m.at(-1)[1]];if(P===null)continue;const{name:k}=P;if(k==="#text"){const D=document.createTextNode(P.value);p.push(D),C.append(D);continue}const I=(v=P==null?void 0:P.attributes)!=null&&v.xmlns?document.createElementNS(P.attributes.xmlns,k):document.createElement(k);if(C.append(I),P.attributes&&this.setAttributes({html:I,element:P,storage:t,intent:a,linkService:i}),((w=P.children)==null?void 0:w.length)>0)m.push([P,-1,I]);else if(P.value){const D=document.createTextNode(P.value);c&&mc.shouldBuildText(k)&&p.push(D),I.append(D)}}for(const _ of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))_.setAttribute("readOnly",!0);return{textDivs:p}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Fh=1e3,Dx=9,wa=new WeakSet;function Ws(f){return{width:f[2]-f[0],height:f[3]-f[1]}}class Nx{static create(e){switch(e.data.annotationType){case kt.LINK:return new x_(e);case kt.TEXT:return new Ox(e);case kt.WIDGET:switch(e.data.fieldType){case"Tx":return new zx(e);case"Btn":return e.data.radioButton?new T_(e):e.data.checkBox?new jx(e):new Bx(e);case"Ch":return new Ux(e);case"Sig":return new Hx(e)}return new xa(e);case kt.POPUP:return new Qm(e);case kt.FREETEXT:return new I_(e);case kt.LINE:return new $x(e);case kt.SQUARE:return new Wx(e);case kt.CIRCLE:return new Gx(e);case kt.POLYLINE:return new F_(e);case kt.CARET:return new qx(e);case kt.INK:return new Wy(e);case kt.POLYGON:return new Xx(e);case kt.HIGHLIGHT:return new D_(e);case kt.UNDERLINE:return new Yx(e);case kt.SQUIGGLY:return new Kx(e);case kt.STRIKEOUT:return new Qx(e);case kt.STAMP:return new N_(e);case kt.FILEATTACHMENT:return new Jx(e);default:return new wt(e)}}}var Ko,Nl,Ol,eh,Km;const Yy=class Yy{constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){x(this,eh);x(this,Ko,null);x(this,Nl,!1);x(this,Ol,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:i}){return!!(e!=null&&e.str||t!=null&&t.str||i!=null&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Yy._hasPopupData(this.data)}updateEdited(e){var i;if(!this.container)return;l(this,Ko)||A(this,Ko,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&E(this,eh,Km).call(this,t),(i=l(this,Ol))==null||i.popup.updateEdited(e)}resetEdited(){var e;l(this,Ko)&&(E(this,eh,Km).call(this,l(this,Ko).rect),(e=l(this,Ol))==null||e.popup.resetEdited(),A(this,Ko,null))}_createContainer(e){const{data:t,parent:{page:i,viewport:r}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",t.id),this instanceof xa||(a.tabIndex=Fh);const{style:u}=a;if(u.zIndex=this.parent.zIndex++,t.alternativeText&&(a.title=t.alternativeText),t.noRotate&&a.classList.add("norotate"),!t.rect||this instanceof Qm){const{rotation:C}=t;return!t.hasOwnCanvas&&C!==0&&this.setRotation(C,a),a}const{width:c,height:d}=Ws(t.rect);if(!e&&t.borderStyle.width>0){u.borderWidth=`${t.borderStyle.width}px`;const C=t.borderStyle.horizontalCornerRadius,P=t.borderStyle.verticalCornerRadius;if(C>0||P>0){const I=`calc(${C}px * var(--scale-factor)) / calc(${P}px * var(--scale-factor))`;u.borderRadius=I}else if(this instanceof T_){const I=`calc(${c}px * var(--scale-factor)) / calc(${d}px * var(--scale-factor))`;u.borderRadius=I}switch(t.borderStyle.style){case qu.SOLID:u.borderStyle="solid";break;case qu.DASHED:u.borderStyle="dashed";break;case qu.BEVELED:Me("Unimplemented border style: beveled");break;case qu.INSET:Me("Unimplemented border style: inset");break;case qu.UNDERLINE:u.borderBottomStyle="solid";break}const k=t.borderColor||null;k?(A(this,Nl,!0),u.borderColor=fe.makeHexColor(k[0]|0,k[1]|0,k[2]|0)):u.borderWidth=0}const p=fe.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:m,pageHeight:v,pageX:w,pageY:_}=r.rawDims;u.left=`${100*(p[0]-w)/m}%`,u.top=`${100*(p[1]-_)/v}%`;const{rotation:b}=t;return t.hasOwnCanvas||b===0?(u.width=`${100*c/m}%`,u.height=`${100*d/v}%`):this.setRotation(b,a),a}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims,{width:a,height:u}=Ws(this.data.rect);let c,d;e%180===0?(c=100*a/i,d=100*u/r):(c=100*u/i,d=100*a/r),t.style.width=`${c}%`,t.style.height=`${d}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,r)=>{const a=r.detail[t],u=a[0],c=a.slice(1);r.target.style[i]=uA[`${u}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[i]:uA[`${u}_rgb`](c)})};return ze(this,"_commonActions",{display:t=>{const{display:i}=t.detail,r=i%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:i===1||i===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const r of Object.keys(t.detail)){const a=e[r]||i[r];a==null||a(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[r,a]of Object.entries(t)){const u=i[r];if(u){const c={detail:{[r]:a},target:e};u(c),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,r,a]=this.data.rect.map(C=>Math.fround(C));if(e.length===8){const[C,P,k,I]=e.subarray(2,6);if(r===C&&a===P&&t===k&&i===I)return}const{style:u}=this.container;let c;if(l(this,Nl)){const{borderColor:C,borderWidth:P}=u;u.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${C}" stroke-width="${P}">`],this.container.classList.add("hasBorder")}const d=r-t,p=a-i,{svgFactory:m}=this,v=m.createElement("svg");v.classList.add("quadrilateralsContainer"),v.setAttribute("width",0),v.setAttribute("height",0);const w=m.createElement("defs");v.append(w);const _=m.createElement("clipPath"),b=`clippath_${this.data.id}`;_.setAttribute("id",b),_.setAttribute("clipPathUnits","objectBoundingBox"),w.append(_);for(let C=2,P=e.length;C<P;C+=8){const k=e[C],I=e[C+1],D=e[C+2],F=e[C+3],j=m.createElement("rect"),H=(D-t)/d,V=(a-I)/p,$=(k-D)/d,K=(I-F)/p;j.setAttribute("x",H),j.setAttribute("y",V),j.setAttribute("width",$),j.setAttribute("height",K),_.append(j),c==null||c.push(`<rect vector-effect="non-scaling-stroke" x="${H}" y="${V}" width="${$}" height="${K}"/>`)}l(this,Nl)&&(c.push("</g></svg>')"),u.backgroundImage=c.join("")),this.container.append(v),this.container.style.clipPath=`url(#${b})`}_createPopup(){const{data:e}=this,t=A(this,Ol,new Qm({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){nt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:a,id:u,exportValues:c}of r){if(a===-1||u===t)continue;const d=typeof c=="string"?c:null,p=document.querySelector(`[data-element-id="${u}"]`);if(p&&!wa.has(p)){Me(`_getElementsByName - element not allowed: ${u}`);continue}i.push({id:u,exportValue:d,domElement:p})}return i}for(const r of document.getElementsByName(e)){const{exportValue:a}=r,u=r.getAttribute("data-element-id");u!==t&&wa.has(r)&&i.push({id:u,exportValue:a,domElement:r})}return i}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};Ko=new WeakMap,Nl=new WeakMap,Ol=new WeakMap,eh=new WeakSet,Km=function(e){const{container:{style:t},data:{rect:i,rotation:r},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:u,pageX:c,pageY:d}}}}=this;i==null||i.splice(0,4,...e);const{width:p,height:m}=Ws(e);t.left=`${100*(e[0]-c)/a}%`,t.top=`${100*(u-e[3]+d)/u}%`,r===0?(t.width=`${100*p/a}%`,t.height=`${100*m/u}%`):this.setRotation(r)};let wt=Yy;var $n,go,C_,k_;class x_ extends wt{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});x(this,$n);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let a=!1;return t.url?(i.addLinkAttributes(r,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(r,t.action),a=!0):t.attachment?(E(this,$n,C_).call(this,r,t.attachment,t.attachmentDest),a=!0):t.setOCGState?(E(this,$n,k_).call(this,r,t.setOCGState),a=!0):t.dest?(this._bindLink(r,t.dest),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),a=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(r,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(r),this.container}_bindLink(t,i){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&E(this,$n,go).call(this)}_bindNamedAction(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),E(this,$n,go).call(this)}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(i.actions)){const u=r.get(a);u&&(t[u]=()=>{var c;return(c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:a}}),!1})}t.onclick||(t.onclick=()=>!1),E(this,$n,go).call(this)}_bindResetFormAction(t,i){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),E(this,$n,go).call(this),!this._fieldObjects){Me('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var v;r==null||r();const{fields:a,refs:u,include:c}=i,d=[];if(a.length!==0||u.length!==0){const w=new Set(u);for(const _ of a){const b=this._fieldObjects[_]||[];for(const{id:C}of b)w.add(C)}for(const _ of Object.values(this._fieldObjects))for(const b of _)w.has(b.id)===c&&d.push(b)}else for(const w of Object.values(this._fieldObjects))d.push(...w);const p=this.annotationStorage,m=[];for(const w of d){const{id:_}=w;switch(m.push(_),w.type){case"text":{const C=w.defaultValue||"";p.setValue(_,{value:C});break}case"checkbox":case"radiobutton":{const C=w.defaultValue===w.exportValues;p.setValue(_,{value:C});break}case"combobox":case"listbox":{const C=w.defaultValue||"";p.setValue(_,{value:C});break}default:continue}const b=document.querySelector(`[data-element-id="${_}"]`);if(b){if(!wa.has(b)){Me(`_bindResetFormAction - element not allowed: ${_}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}})),!1}}}$n=new WeakSet,go=function(){this.container.setAttribute("data-internal-link","")},C_=function(t,i,r=null){t.href=this.linkService.getAnchorUrl(""),i.description&&(t.title=i.description),t.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(i.content,i.filename,r),!1},E(this,$n,go).call(this)},k_=function(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),E(this,$n,go).call(this)};class Ox extends wt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class xa extends wt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return pn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,r,a){i.includes("mouse")?e.addEventListener(i,u=>{var c;(c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:a(u),shift:u.shiftKey,modifier:this._getKeyModifier(u)}})}):e.addEventListener(i,u=>{var c;if(i==="blur"){if(!t.focused||!u.relatedTarget)return;t.focused=!1}else if(i==="focus"){if(t.focused)return;t.focused=!0}a&&((c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:a(u)}}))})}_setEventListeners(e,t,i,r){var a,u,c;for(const[d,p]of i)(p==="Action"||(a=this.data.actions)!=null&&a[p])&&((p==="Focus"||p==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,d,p,r),p==="Focus"&&!((u=this.data.actions)!=null&&u.Blur)?this._setEventListener(e,t,"blur","Blur",null):p==="Blur"&&!((c=this.data.actions)!=null&&c.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":fe.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||Dx,a=e.style;let u;const c=2,d=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-c),m=Math.round(p/(rm*r))||1,v=p/m;u=Math.min(r,d(v/rm))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-c);u=Math.min(r,d(p/rm))}a.fontSize=`calc(${u}px * var(--scale-factor))`,a.color=fe.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(a.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class zx extends xa{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,i,r){const a=this.annotationStorage;for(const u of this._getElementsByName(e.name,e.id))u.domElement&&(u.domElement[t]=i),a.setValue(u.id,{[r]:i})}render(){var r,a;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const u=e.getValue(t,{value:this.data.fieldValue});let c=u.value||"";const d=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;d&&c.length>d&&(c=c.slice(0,d));let p=u.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;p&&this.data.comb&&(p=p.replaceAll(/\s+/g,""));const m={userValue:c,formattedValue:p,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=p??c,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",p??c),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),wa.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=Fh,this._setRequired(i,this.data.required),d&&(i.maxLength=d),i.addEventListener("input",w=>{e.setValue(t,{value:w.target.value}),this.setPropertyOnSiblings(i,"value",w.target.value,"value"),m.formattedValue=null}),i.addEventListener("resetform",w=>{const _=this.data.defaultFieldValue??"";i.value=m.userValue=_,m.formattedValue=null});let v=w=>{const{formattedValue:_}=m;_!=null&&(w.target.value=_),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",_=>{var C;if(m.focused)return;const{target:b}=_;m.userValue&&(b.value=m.userValue),m.lastCommittedValue=b.value,m.commitKey=1,(C=this.data.actions)!=null&&C.Focus||(m.focused=!0)}),i.addEventListener("updatefromsandbox",_=>{this.showElementAndHideCanvas(_.target);const b={value(C){m.userValue=C.detail.value??"",e.setValue(t,{value:m.userValue.toString()}),C.target.value=m.userValue},formattedValue(C){const{formattedValue:P}=C.detail;m.formattedValue=P,P!=null&&C.target!==document.activeElement&&(C.target.value=P),e.setValue(t,{formattedValue:P})},selRange(C){C.target.setSelectionRange(...C.detail.selRange)},charLimit:C=>{var D;const{charLimit:P}=C.detail,{target:k}=C;if(P===0){k.removeAttribute("maxLength");return}k.setAttribute("maxLength",P);let I=m.userValue;!I||I.length<=P||(I=I.slice(0,P),k.value=m.userValue=I,e.setValue(t,{value:I}),(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:I,willCommit:!0,commitKey:1,selStart:k.selectionStart,selEnd:k.selectionEnd}}))}};this._dispatchEventFromSandbox(b,_)}),i.addEventListener("keydown",_=>{var P;m.commitKey=1;let b=-1;if(_.key==="Escape"?b=0:_.key==="Enter"&&!this.data.multiLine?b=2:_.key==="Tab"&&(m.commitKey=3),b===-1)return;const{value:C}=_.target;m.lastCommittedValue!==C&&(m.lastCommittedValue=C,m.userValue=C,(P=this.linkService.eventBus)==null||P.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,willCommit:!0,commitKey:b,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}}))});const w=v;v=null,i.addEventListener("blur",_=>{var C,P;if(!m.focused||!_.relatedTarget)return;(C=this.data.actions)!=null&&C.Blur||(m.focused=!1);const{value:b}=_.target;m.userValue=b,m.lastCommittedValue!==b&&((P=this.linkService.eventBus)==null||P.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:m.commitKey,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}})),w(_)}),(a=this.data.actions)!=null&&a.Keystroke&&i.addEventListener("beforeinput",_=>{var j;m.lastCommittedValue=null;const{data:b,target:C}=_,{value:P,selectionStart:k,selectionEnd:I}=C;let D=k,F=I;switch(_.inputType){case"deleteWordBackward":{const H=P.substring(0,k).match(/\w*[^\w]*$/);H&&(D-=H[0].length);break}case"deleteWordForward":{const H=P.substring(k).match(/^[^\w]*\w*/);H&&(F+=H[0].length);break}case"deleteContentBackward":k===I&&(D-=1);break;case"deleteContentForward":k===I&&(F+=1);break}_.preventDefault(),(j=this.linkService.eventBus)==null||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:P,change:b||"",willCommit:!1,selStart:D,selEnd:F}})}),this._setEventListeners(i,m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_=>_.target.value)}if(v&&i.addEventListener("blur",v),this.data.comb){const _=(this.data.rect[2]-this.data.rect[0])/d;i.classList.add("comb"),i.style.letterSpacing=`calc(${_}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Hx extends xa{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class jx extends xa{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return wa.add(a),a.setAttribute("data-element-id",i),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=t.fieldName,r&&a.setAttribute("checked",!0),a.setAttribute("exportValue",t.exportValue),a.tabIndex=Fh,a.addEventListener("change",u=>{const{name:c,checked:d}=u.target;for(const p of this._getElementsByName(c,i)){const m=d&&p.exportValue===t.exportValue;p.domElement&&(p.domElement.checked=m),e.setValue(p.id,{value:m})}e.setValue(i,{value:d})}),a.addEventListener("resetform",u=>{const c=t.defaultFieldValue||"Off";u.target.checked=c===t.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",u=>{const c={value(d){d.target.checked=d.detail.value!=="Off",e.setValue(i,{value:d.target.checked})}};this._dispatchEventFromSandbox(c,u)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class T_ extends xa{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(i,{value:r})),r)for(const u of this._getElementsByName(t.fieldName,i))e.setValue(u.id,{value:!1});const a=document.createElement("input");if(wa.add(a),a.setAttribute("data-element-id",i),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=t.fieldName,r&&a.setAttribute("checked",!0),a.tabIndex=Fh,a.addEventListener("change",u=>{const{name:c,checked:d}=u.target;for(const p of this._getElementsByName(c,i))e.setValue(p.id,{value:!1});e.setValue(i,{value:d})}),a.addEventListener("resetform",u=>{const c=t.defaultFieldValue;u.target.checked=c!=null&&c===t.buttonValue}),this.enableScripting&&this.hasJSActions){const u=t.buttonValue;a.addEventListener("updatefromsandbox",c=>{const d={value:p=>{const m=u===p.detail.value;for(const v of this._getElementsByName(p.target.name)){const w=m&&v.id===i;v.domElement&&(v.domElement.checked=w),e.setValue(v.id,{value:w})}}};this._dispatchEventFromSandbox(d,c)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class Bx extends x_{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class Ux extends xa{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");wa.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=Fh;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",m=>{const v=this.data.defaultFieldValue;for(const w of r.options)w.selected=w.value===v});for(const m of this.data.options){const v=document.createElement("option");v.textContent=m.displayValue,v.value=m.exportValue,i.value.includes(m.exportValue)&&(v.setAttribute("selected",!0),a=!1),r.append(v)}let u=null;if(a){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),r.prepend(m),u=()=>{m.remove(),r.removeEventListener("input",u),u=null},r.addEventListener("input",u)}const c=m=>{const v=m?"value":"textContent",{options:w,multiple:_}=r;return _?Array.prototype.filter.call(w,b=>b.selected).map(b=>b[v]):w.selectedIndex===-1?null:w[w.selectedIndex][v]};let d=c(!1);const p=m=>{const v=m.target.options;return Array.prototype.map.call(v,w=>({displayValue:w.textContent,exportValue:w.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",m=>{const v={value(w){u==null||u();const _=w.detail.value,b=new Set(Array.isArray(_)?_:[_]);for(const C of r.options)C.selected=b.has(C.value);e.setValue(t,{value:c(!0)}),d=c(!1)},multipleSelection(w){r.multiple=!0},remove(w){const _=r.options,b=w.detail.remove;_[b].selected=!1,r.remove(b),_.length>0&&Array.prototype.findIndex.call(_,P=>P.selected)===-1&&(_[0].selected=!0),e.setValue(t,{value:c(!0),items:p(w)}),d=c(!1)},clear(w){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),d=c(!1)},insert(w){const{index:_,displayValue:b,exportValue:C}=w.detail.insert,P=r.children[_],k=document.createElement("option");k.textContent=b,k.value=C,P?P.before(k):r.append(k),e.setValue(t,{value:c(!0),items:p(w)}),d=c(!1)},items(w){const{items:_}=w.detail;for(;r.length!==0;)r.remove(0);for(const b of _){const{displayValue:C,exportValue:P}=b,k=document.createElement("option");k.textContent=C,k.value=P,r.append(k)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:c(!0),items:p(w)}),d=c(!1)},indices(w){const _=new Set(w.detail.indices);for(const b of w.target.options)b.selected=_.has(b.index);e.setValue(t,{value:c(!0)}),d=c(!1)},editable(w){w.target.disabled=!w.detail.editable}};this._dispatchEventFromSandbox(v,m)}),r.addEventListener("input",m=>{var _;const v=c(!0),w=c(!1);e.setValue(t,{value:v}),m.preventDefault(),(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:d,change:w,changeEx:v,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):r.addEventListener("input",function(m){e.setValue(t,{value:c(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Qm extends wt{constructor(e){const{data:t,elements:i}=e;super(e,{isRenderable:wt._hasPopupData(t)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new Vx({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(i=>`${Fy}${i}`).join(",")),this.container}}var zl,Yf,Kf,Hl,Qo,ft,Rs,jl,th,nh,Bl,Ls,bi,Ms,ih,Is,sh,Jo,Zo,Ke,pf,Jm,P_,R_,L_,M_,gf,mf,Zm;class Vx{constructor({container:e,color:t,elements:i,titleObj:r,modificationDate:a,contentsObj:u,richText:c,parent:d,rect:p,parentRect:m,open:v}){x(this,Ke);x(this,zl,E(this,Ke,L_).bind(this));x(this,Yf,E(this,Ke,Zm).bind(this));x(this,Kf,E(this,Ke,mf).bind(this));x(this,Hl,E(this,Ke,gf).bind(this));x(this,Qo,null);x(this,ft,null);x(this,Rs,null);x(this,jl,null);x(this,th,null);x(this,nh,null);x(this,Bl,null);x(this,Ls,!1);x(this,bi,null);x(this,Ms,null);x(this,ih,null);x(this,Is,null);x(this,sh,null);x(this,Jo,null);x(this,Zo,!1);var w;A(this,ft,e),A(this,sh,r),A(this,Rs,u),A(this,Is,c),A(this,nh,d),A(this,Qo,t),A(this,ih,p),A(this,Bl,m),A(this,th,i),A(this,jl,Oy.toDateObject(a)),this.trigger=i.flatMap(_=>_.getElementsToTriggerPopup());for(const _ of this.trigger)_.addEventListener("click",l(this,Hl)),_.addEventListener("mouseenter",l(this,Kf)),_.addEventListener("mouseleave",l(this,Yf)),_.classList.add("popupTriggerArea");for(const _ of i)(w=_.container)==null||w.addEventListener("keydown",l(this,zl));l(this,ft).hidden=!0,v&&E(this,Ke,gf).call(this)}render(){if(l(this,bi))return;const e=A(this,bi,document.createElement("div"));if(e.className="popup",l(this,Qo)){const a=e.style.outlineColor=fe.makeHexColor(...l(this,Qo));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`:e.style.backgroundColor=fe.makeHexColor(...l(this,Qo).map(c=>Math.floor(.7*(255-c)+c)))}const t=document.createElement("span");t.className="header";const i=document.createElement("h1");if(t.append(i),{dir:i.dir,str:i.textContent}=l(this,sh),e.append(t),l(this,jl)){const a=document.createElement("span");a.classList.add("popupDate"),a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,jl).valueOf()})),t.append(a)}const r=l(this,Ke,pf);if(r)b_.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const a=this._formatContents(l(this,Rs));e.append(a)}l(this,ft).append(e)}_formatContents({str:e,dir:t}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let a=0,u=r.length;a<u;++a){const c=r[a];i.append(document.createTextNode(c)),a<u-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:e,popupContent:t}){var i;l(this,Jo)||A(this,Jo,{contentsObj:l(this,Rs),richText:l(this,Is)}),e&&A(this,Ms,null),t&&(A(this,Is,E(this,Ke,R_).call(this,t)),A(this,Rs,null)),(i=l(this,bi))==null||i.remove(),A(this,bi,null)}resetEdited(){var e;l(this,Jo)&&({contentsObj:cn(this,Rs)._,richText:cn(this,Is)._}=l(this,Jo),A(this,Jo,null),(e=l(this,bi))==null||e.remove(),A(this,bi,null),A(this,Ms,null))}forceHide(){A(this,Zo,this.isVisible),l(this,Zo)&&(l(this,ft).hidden=!0)}maybeShow(){l(this,Zo)&&(l(this,bi)||E(this,Ke,mf).call(this),A(this,Zo,!1),l(this,ft).hidden=!1)}get isVisible(){return l(this,ft).hidden===!1}}zl=new WeakMap,Yf=new WeakMap,Kf=new WeakMap,Hl=new WeakMap,Qo=new WeakMap,ft=new WeakMap,Rs=new WeakMap,jl=new WeakMap,th=new WeakMap,nh=new WeakMap,Bl=new WeakMap,Ls=new WeakMap,bi=new WeakMap,Ms=new WeakMap,ih=new WeakMap,Is=new WeakMap,sh=new WeakMap,Jo=new WeakMap,Zo=new WeakMap,Ke=new WeakSet,pf=function(){const e=l(this,Is),t=l(this,Rs);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&l(this,Is).html||null},Jm=function(){var e,t,i;return((i=(t=(e=l(this,Ke,pf))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.fontSize)||0},P_=function(){var e,t,i;return((i=(t=(e=l(this,Ke,pf))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.color)||null},R_=function(e){const t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:l(this,Ke,P_),fontSize:l(this,Ke,Jm)?`calc(${l(this,Ke,Jm)}px * var(--scale-factor))`:""}};for(const a of e.split(`
`))t.push({name:"span",value:a,attributes:r});return i},L_=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&l(this,Ls))&&E(this,Ke,gf).call(this)},M_=function(){if(l(this,Ms)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:r,pageY:a}}}=l(this,nh);let u=!!l(this,Bl),c=u?l(this,Bl):l(this,ih);for(const b of l(this,th))if(!c||fe.intersect(b.data.rect,c)!==null){c=b.data.rect,u=!0;break}const d=fe.normalizeRect([c[0],e[3]-c[1]+e[1],c[2],e[3]-c[3]+e[1]]),m=u?c[2]-c[0]+5:0,v=d[0]+m,w=d[1];A(this,Ms,[100*(v-r)/t,100*(w-a)/i]);const{style:_}=l(this,ft);_.left=`${l(this,Ms)[0]}%`,_.top=`${l(this,Ms)[1]}%`},gf=function(){A(this,Ls,!l(this,Ls)),l(this,Ls)?(E(this,Ke,mf).call(this),l(this,ft).addEventListener("click",l(this,Hl)),l(this,ft).addEventListener("keydown",l(this,zl))):(E(this,Ke,Zm).call(this),l(this,ft).removeEventListener("click",l(this,Hl)),l(this,ft).removeEventListener("keydown",l(this,zl)))},mf=function(){l(this,bi)||this.render(),this.isVisible?l(this,Ls)&&l(this,ft).classList.add("focused"):(E(this,Ke,M_).call(this),l(this,ft).hidden=!1,l(this,ft).style.zIndex=parseInt(l(this,ft).style.zIndex)+1e3)},Zm=function(){l(this,ft).classList.remove("focused"),!(l(this,Ls)||!this.isVisible)&&(l(this,ft).hidden=!0,l(this,ft).style.zIndex=parseInt(l(this,ft).style.zIndex)-1e3)};class I_ extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Pe.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var rh;class $x extends wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,rh,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:i,height:r}=Ws(t.rect),a=this.svgFactory.create(i,r,!0),u=A(this,rh,this.svgFactory.createElement("svg:line"));return u.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),u.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),u.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),u.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),u.setAttribute("stroke-width",t.borderStyle.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),a.append(u),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,rh)}addHighlightArea(){this.container.classList.add("highlightArea")}}rh=new WeakMap;var oh;class Wx extends wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,oh,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:i,height:r}=Ws(t.rect),a=this.svgFactory.create(i,r,!0),u=t.borderStyle.width,c=A(this,oh,this.svgFactory.createElement("svg:rect"));return c.setAttribute("x",u/2),c.setAttribute("y",u/2),c.setAttribute("width",i-u),c.setAttribute("height",r-u),c.setAttribute("stroke-width",u||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,oh)}addHighlightArea(){this.container.classList.add("highlightArea")}}oh=new WeakMap;var ah;class Gx extends wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,ah,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:i,height:r}=Ws(t.rect),a=this.svgFactory.create(i,r,!0),u=t.borderStyle.width,c=A(this,ah,this.svgFactory.createElement("svg:ellipse"));return c.setAttribute("cx",i/2),c.setAttribute("cy",r/2),c.setAttribute("rx",i/2-u/2),c.setAttribute("ry",r/2-u/2),c.setAttribute("stroke-width",u||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,ah)}addHighlightArea(){this.container.classList.add("highlightArea")}}ah=new WeakMap;var lh;class F_ extends wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,lh,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:r,popupRef:a}}=this;if(!i)return this.container;const{width:u,height:c}=Ws(t),d=this.svgFactory.create(u,c,!0);let p=[];for(let v=0,w=i.length;v<w;v+=2){const _=i[v]-t[0],b=t[3]-i[v+1];p.push(`${_},${b}`)}p=p.join(" ");const m=A(this,lh,this.svgFactory.createElement(this.svgElementName));return m.setAttribute("points",p),m.setAttribute("stroke-width",r.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),d.append(m),this.container.append(d),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,lh)}addHighlightArea(){this.container.classList.add("highlightArea")}}lh=new WeakMap;class Xx extends F_{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class qx extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var uh;class Wy extends wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,uh,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Pe.HIGHLIGHT:Pe.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:i,borderStyle:r,popupRef:a}}=this,{width:u,height:c}=Ws(t),d=this.svgFactory.create(u,c,!0);for(const p of i){let m=[];for(let w=0,_=p.length;w<_;w+=2){const b=p[w]-t[0],C=t[3]-p[w+1];m.push(`${b},${C}`)}m=m.join(" ");const v=this.svgFactory.createElement(this.svgElementName);l(this,uh).push(v),v.setAttribute("points",m),v.setAttribute("stroke-width",r.width||1),v.setAttribute("stroke","transparent"),v.setAttribute("fill","transparent"),d.append(v)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return l(this,uh)}addHighlightArea(){this.container.classList.add("highlightArea")}}uh=new WeakMap;class D_ extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Pe.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class Yx extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Kx extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Qx extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class N_ extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Pe.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var ch,hh,ey;class Jx extends wt{constructor(t){var r;super(t,{isRenderable:!0});x(this,hh);x(this,ch,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let r;i.hasAppearance||i.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),r.addEventListener("dblclick",E(this,hh,ey).bind(this)),A(this,ch,r);const{isMac:a}=pn.platform;return t.addEventListener("keydown",u=>{u.key==="Enter"&&(a?u.metaKey:u.ctrlKey)&&E(this,hh,ey).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return l(this,ch)}addHighlightArea(){this.container.classList.add("highlightArea")}}ch=new WeakMap,hh=new WeakSet,ey=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var dh,ea,ta,fh,_a,O_,ty,bA;let Zx=(bA=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:r,page:a,viewport:u,structTreeLayer:c}){x(this,_a);x(this,dh,null);x(this,ea,null);x(this,ta,new Map);x(this,fh,null);this.div=e,A(this,dh,t),A(this,ea,i),A(this,fh,c||null),this.page=a,this.viewport=u,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return l(this,ta).size>0}async render(e){var u;const{annotations:t}=e,i=this.div;ya(i,this.viewport);const r=new Map,a={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new $y,annotationStorage:e.annotationStorage||new Hy,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const c of t){if(c.noHTML)continue;const d=c.annotationType===kt.POPUP;if(d){const v=r.get(c.id);if(!v)continue;a.elements=v}else{const{width:v,height:w}=Ws(c.rect);if(v<=0||w<=0)continue}a.data=c;const p=Nx.create(a);if(!p.isRenderable)continue;if(!d&&c.popupRef){const v=r.get(c.popupRef);v?v.push(p):r.set(c.popupRef,[p])}const m=p.render();c.hidden&&(m.style.visibility="hidden"),await E(this,_a,O_).call(this,m,c.id),p._isEditable&&(l(this,ta).set(p.data.id,p),(u=this._annotationEditorUIManager)==null||u.renderAnnotationElement(p))}E(this,_a,ty).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,ya(t,{rotation:e.rotation}),E(this,_a,ty).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(l(this,ta).values())}getEditableAnnotation(e){return l(this,ta).get(e)}},dh=new WeakMap,ea=new WeakMap,ta=new WeakMap,fh=new WeakMap,_a=new WeakSet,O_=async function(e,t){var u,c;const i=e.firstChild||e,r=i.id=`${Fy}${t}`,a=await((u=l(this,fh))==null?void 0:u.getAriaAttributes(r));if(a)for(const[d,p]of a)i.setAttribute(d,p);this.div.append(e),(c=l(this,dh))==null||c.moveElementInDOM(this.div,e,i,!1)},ty=function(){if(!l(this,ea))return;const e=this.div;for(const[t,i]of l(this,ea)){const r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:a}=r;a?a.nodeName==="CANVAS"?a.replaceWith(i):a.classList.contains("annotationContent")?a.after(i):a.before(i):r.append(i)}l(this,ea).clear()},bA);const Zd=/\r\n?|\n/g;var xi,On,ph,na,zn,Et,z_,H_,j_,yf,Xs,vf,wf,B_,iy,U_;const Ze=class Ze extends qe{constructor(t){super({...t,name:"freeTextEditor"});x(this,Et);x(this,xi);x(this,On,"");x(this,ph,`${this.id}-editor`);x(this,na,null);x(this,zn);A(this,xi,t.color||Ze._defaultColor||qe._defaultLineColor),A(this,zn,t.fontSize||Ze._defaultFontSize)}static get _keyboardManager(){const t=Ze.prototype,i=u=>u.isEmpty(),r=va.TRANSLATE_SMALL,a=va.TRANSLATE_BIG;return ze(this,"_keyboardManager",new Ih([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:i}]]))}static initialize(t,i){qe.initialize(t,i);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case xe.FREETEXT_SIZE:Ze._defaultFontSize=i;break;case xe.FREETEXT_COLOR:Ze._defaultColor=i;break}}updateParams(t,i){switch(t){case xe.FREETEXT_SIZE:E(this,Et,z_).call(this,i);break;case xe.FREETEXT_COLOR:E(this,Et,H_).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[xe.FREETEXT_SIZE,Ze._defaultFontSize],[xe.FREETEXT_COLOR,Ze._defaultColor||qe._defaultLineColor]]}get propertiesToUpdate(){return[[xe.FREETEXT_SIZE,l(this,zn)],[xe.FREETEXT_COLOR,l(this,xi)]]}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ze._internalPadding*t,-(Ze._internalPadding+l(this,zn))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Pe.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),A(this,na,new AbortController);const t=this._uiManager.combinedSignal(l(this,na));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,ph)),this._isDraggable=!0,(t=l(this,na))==null||t.abort(),A(this,na,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=l(this,On),i=A(this,On,E(this,Et,j_).call(this).trimEnd());if(t===i)return;const r=a=>{if(A(this,On,a),!a){this.remove();return}E(this,Et,wf).call(this),this._uiManager.rebuild(this),E(this,Et,yf).call(this)};this.addCommands({cmd:()=>{r(i)},undo:()=>{r(t)},mustExec:!1}),E(this,Et,yf).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ze._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,ph)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${l(this,zn)}px * var(--scale-factor))`,r.color=l(this,xi),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Lf(this,this.div,["dblclick","keydown"]),this.width){const[a,u]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[d,p]=this.getInitialTranslation();[d,p]=this.pageTranslationToScreen(d,p);const[m,v]=this.pageDimensions,[w,_]=this.pageTranslation;let b,C;switch(this.rotation){case 0:b=t+(c[0]-w)/m,C=i+this.height-(c[1]-_)/v;break;case 90:b=t+(c[0]-w)/m,C=i-(c[1]-_)/v,[d,p]=[p,-d];break;case 180:b=t-this.width+(c[0]-w)/m,C=i-(c[1]-_)/v,[d,p]=[-d,-p];break;case 270:b=t+(c[0]-w-this.height*v)/m,C=i+(c[1]-_-this.width*m)/v,[d,p]=[-p,d];break}this.setAt(b*a,C*u,d,p)}else this.setAt(t*a,i*u,this.width*a,this.height*u);E(this,Et,wf).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var b,C,P;const i=t.clipboardData||window.clipboardData,{types:r}=i;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const a=E(b=Ze,Xs,iy).call(b,i.getData("text")||"").replaceAll(Zd,`
`);if(!a)return;const u=window.getSelection();if(!u.rangeCount)return;this.editorDiv.normalize(),u.deleteFromDocument();const c=u.getRangeAt(0);if(!a.includes(`
`)){c.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),u.collapseToStart();return}const{startContainer:d,startOffset:p}=c,m=[],v=[];if(d.nodeType===Node.TEXT_NODE){const k=d.parentElement;if(v.push(d.nodeValue.slice(p).replaceAll(Zd,"")),k!==this.editorDiv){let I=m;for(const D of this.editorDiv.childNodes){if(D===k){I=v;continue}I.push(E(C=Ze,Xs,vf).call(C,D))}}m.push(d.nodeValue.slice(0,p).replaceAll(Zd,""))}else if(d===this.editorDiv){let k=m,I=0;for(const D of this.editorDiv.childNodes)I++===p&&(k=v),k.push(E(P=Ze,Xs,vf).call(P,D))}A(this,On,`${m.join(`
`)}${a}${v.join(`
`)}`),E(this,Et,wf).call(this);const w=new Range;let _=m.reduce((k,I)=>k+I.length,0);for(const{firstChild:k}of this.editorDiv.childNodes)if(k.nodeType===Node.TEXT_NODE){const I=k.nodeValue.length;if(_<=I){w.setStart(k,_),w.setEnd(k,_);break}_-=I}u.removeAllRanges(),u.addRange(w)}get contentDiv(){return this.editorDiv}static async deserialize(t,i,r){var c;let a=null;if(t instanceof I_){const{data:{defaultAppearanceData:{fontSize:d,fontColor:p},rect:m,rotation:v,id:w,popupRef:_},textContent:b,textPosition:C,parent:{page:{pageNumber:P}}}=t;if(!b||b.length===0)return null;a=t={annotationType:Pe.FREETEXT,color:Array.from(p),fontSize:d,value:b.join(`
`),position:C,pageIndex:P-1,rect:m.slice(0),rotation:v,id:w,deleted:!1,popupRef:_}}const u=await super.deserialize(t,i,r);return A(u,zn,t.fontSize),A(u,xi,fe.makeHexColor(...t.color)),A(u,On,E(c=Ze,Xs,iy).call(c,t.value)),u.annotationElementId=t.id||null,u._initialData=a,u}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Ze._internalPadding*this.parentScale,r=this.getRect(i,i),a=qe._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:l(this,xi)),u={annotationType:Pe.FREETEXT,color:a,fontSize:l(this,zn),value:E(this,Et,B_).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?u:this.annotationElementId&&!E(this,Et,U_).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(this.deleted)return i;const{style:r}=i;r.fontSize=`calc(${l(this,zn)}px * var(--scale-factor))`,r.color=l(this,xi),i.replaceChildren();for(const u of l(this,On).split(`
`)){const c=document.createElement("div");c.append(u?document.createTextNode(u):document.createElement("br")),i.append(c)}const a=Ze._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(a,a),popupContent:l(this,On)}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};xi=new WeakMap,On=new WeakMap,ph=new WeakMap,na=new WeakMap,zn=new WeakMap,Et=new WeakSet,z_=function(t){const i=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--scale-factor))`,this.translate(0,-(a-l(this,zn))*this.parentScale),A(this,zn,a),E(this,Et,yf).call(this)},r=l(this,zn);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xe.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},H_=function(t){const i=a=>{A(this,xi,this.editorDiv.style.color=a)},r=l(this,xi);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xe.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},j_=function(){var r;const t=[];this.editorDiv.normalize();let i=null;for(const a of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&a.nodeName==="BR"||(t.push(E(r=Ze,Xs,vf).call(r,a)),i=a);return t.join(`
`)},yf=function(){const[t,i]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:a,div:u}=this,c=u.style.display,d=u.classList.contains("hidden");u.classList.remove("hidden"),u.style.display="hidden",a.div.append(this.div),r=u.getBoundingClientRect(),u.remove(),u.style.display=c,u.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/i):(this.width=r.height/t,this.height=r.width/i),this.fixAndSetPosition()},Xs=new WeakSet,vf=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Zd,"")},wf=function(){if(this.editorDiv.replaceChildren(),!!l(this,On))for(const t of l(this,On).split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}},B_=function(){return l(this,On).replaceAll(" "," ")},iy=function(t){return t.replaceAll(" "," ")},U_=function(t){const{value:i,fontSize:r,color:a,pageIndex:u}=this._initialData;return this._hasBeenMoved||t.value!==i||t.fontSize!==r||t.color.some((c,d)=>c!==a[d])||t.pageIndex!==u},x(Ze,Xs),be(Ze,"_freeTextDefaultContent",""),be(Ze,"_internalPadding",0),be(Ze,"_defaultColor",null),be(Ze,"_defaultFontSize",10),be(Ze,"_type","freetext"),be(Ze,"_editorType",Pe.FREETEXT);let ny=Ze;class V_{toSVGPath(){nt("Abstract method `toSVGPath` must be implemented.")}get box(){nt("Abstract getter `box` must be implemented.")}serialize(e,t){nt("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){nt("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){nt("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var Hn,Ci,Ul,Vl,Zi,De,ia,sa,gh,mh,$l,Wl,zr,yh,Qf,Jf,Mt,oc,$_,W_,G_,X_,q_,Y_;const ws=class ws{constructor({x:e,y:t},i,r,a,u,c=0){x(this,Mt);x(this,Hn);x(this,Ci,[]);x(this,Ul);x(this,Vl);x(this,Zi,[]);x(this,De,new Float64Array(18));x(this,ia);x(this,sa);x(this,gh);x(this,mh);x(this,$l);x(this,Wl);x(this,zr,[]);A(this,Hn,i),A(this,Wl,a*r),A(this,Vl,u),l(this,De).set([NaN,NaN,NaN,NaN,e,t],6),A(this,Ul,c),A(this,mh,l(ws,yh)*r),A(this,gh,l(ws,Jf)*r),A(this,$l,r),l(this,zr).push(e,t)}isEmpty(){return isNaN(l(this,De)[8])}add({x:e,y:t}){var K;A(this,ia,e),A(this,sa,t);const[i,r,a,u]=l(this,Hn);let[c,d,p,m]=l(this,De).subarray(8,12);const v=e-p,w=t-m,_=Math.hypot(v,w);if(_<l(this,gh))return!1;const b=_-l(this,mh),C=b/_,P=C*v,k=C*w;let I=c,D=d;c=p,d=m,p+=P,m+=k,(K=l(this,zr))==null||K.push(e,t);const F=-k/b,j=P/b,H=F*l(this,Wl),V=j*l(this,Wl);return l(this,De).set(l(this,De).subarray(2,8),0),l(this,De).set([p+H,m+V],4),l(this,De).set(l(this,De).subarray(14,18),12),l(this,De).set([p-H,m-V],16),isNaN(l(this,De)[6])?(l(this,Zi).length===0&&(l(this,De).set([c+H,d+V],2),l(this,Zi).push(NaN,NaN,NaN,NaN,(c+H-i)/a,(d+V-r)/u),l(this,De).set([c-H,d-V],14),l(this,Ci).push(NaN,NaN,NaN,NaN,(c-H-i)/a,(d-V-r)/u)),l(this,De).set([I,D,c,d,p,m],6),!this.isEmpty()):(l(this,De).set([I,D,c,d,p,m],6),Math.abs(Math.atan2(D-d,I-c)-Math.atan2(k,P))<Math.PI/2?([c,d,p,m]=l(this,De).subarray(2,6),l(this,Zi).push(NaN,NaN,NaN,NaN,((c+p)/2-i)/a,((d+m)/2-r)/u),[c,d,I,D]=l(this,De).subarray(14,18),l(this,Ci).push(NaN,NaN,NaN,NaN,((I+c)/2-i)/a,((D+d)/2-r)/u),!0):([I,D,c,d,p,m]=l(this,De).subarray(0,6),l(this,Zi).push(((I+5*c)/6-i)/a,((D+5*d)/6-r)/u,((5*c+p)/6-i)/a,((5*d+m)/6-r)/u,((c+p)/2-i)/a,((d+m)/2-r)/u),[p,m,c,d,I,D]=l(this,De).subarray(12,18),l(this,Ci).push(((I+5*c)/6-i)/a,((D+5*d)/6-r)/u,((5*c+p)/6-i)/a,((5*d+m)/6-r)/u,((c+p)/2-i)/a,((d+m)/2-r)/u),!0))}toSVGPath(){if(this.isEmpty())return"";const e=l(this,Zi),t=l(this,Ci);if(isNaN(l(this,De)[6])&&!this.isEmpty())return E(this,Mt,$_).call(this);const i=[];i.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?i.push(`L${e[r+4]} ${e[r+5]}`):i.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);E(this,Mt,G_).call(this,i);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?i.push(`L${t[r+4]} ${t[r+5]}`):i.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return E(this,Mt,W_).call(this,i),i.join(" ")}newFreeDrawOutline(e,t,i,r,a,u){return new K_(e,t,i,r,a,u)}getOutlines(){var v;const e=l(this,Zi),t=l(this,Ci),i=l(this,De),[r,a,u,c]=l(this,Hn),d=new Float64Array((((v=l(this,zr))==null?void 0:v.length)??0)+2);for(let w=0,_=d.length-2;w<_;w+=2)d[w]=(l(this,zr)[w]-r)/u,d[w+1]=(l(this,zr)[w+1]-a)/c;if(d[d.length-2]=(l(this,ia)-r)/u,d[d.length-1]=(l(this,sa)-a)/c,isNaN(i[6])&&!this.isEmpty())return E(this,Mt,X_).call(this,d);const p=new Float64Array(l(this,Zi).length+24+l(this,Ci).length);let m=e.length;for(let w=0;w<m;w+=2){if(isNaN(e[w])){p[w]=p[w+1]=NaN;continue}p[w]=e[w],p[w+1]=e[w+1]}m=E(this,Mt,Y_).call(this,p,m);for(let w=t.length-6;w>=6;w-=6)for(let _=0;_<6;_+=2){if(isNaN(t[w+_])){p[m]=p[m+1]=NaN,m+=2;continue}p[m]=t[w+_],p[m+1]=t[w+_+1],m+=2}return E(this,Mt,q_).call(this,p,m),this.newFreeDrawOutline(p,d,l(this,Hn),l(this,$l),l(this,Ul),l(this,Vl))}};Hn=new WeakMap,Ci=new WeakMap,Ul=new WeakMap,Vl=new WeakMap,Zi=new WeakMap,De=new WeakMap,ia=new WeakMap,sa=new WeakMap,gh=new WeakMap,mh=new WeakMap,$l=new WeakMap,Wl=new WeakMap,zr=new WeakMap,yh=new WeakMap,Qf=new WeakMap,Jf=new WeakMap,Mt=new WeakSet,oc=function(){const e=l(this,De).subarray(4,6),t=l(this,De).subarray(16,18),[i,r,a,u]=l(this,Hn);return[(l(this,ia)+(e[0]-t[0])/2-i)/a,(l(this,sa)+(e[1]-t[1])/2-r)/u,(l(this,ia)+(t[0]-e[0])/2-i)/a,(l(this,sa)+(t[1]-e[1])/2-r)/u]},$_=function(){const[e,t,i,r]=l(this,Hn),[a,u,c,d]=E(this,Mt,oc).call(this);return`M${(l(this,De)[2]-e)/i} ${(l(this,De)[3]-t)/r} L${(l(this,De)[4]-e)/i} ${(l(this,De)[5]-t)/r} L${a} ${u} L${c} ${d} L${(l(this,De)[16]-e)/i} ${(l(this,De)[17]-t)/r} L${(l(this,De)[14]-e)/i} ${(l(this,De)[15]-t)/r} Z`},W_=function(e){const t=l(this,Ci);e.push(`L${t[4]} ${t[5]} Z`)},G_=function(e){const[t,i,r,a]=l(this,Hn),u=l(this,De).subarray(4,6),c=l(this,De).subarray(16,18),[d,p,m,v]=E(this,Mt,oc).call(this);e.push(`L${(u[0]-t)/r} ${(u[1]-i)/a} L${d} ${p} L${m} ${v} L${(c[0]-t)/r} ${(c[1]-i)/a}`)},X_=function(e){const t=l(this,De),[i,r,a,u]=l(this,Hn),[c,d,p,m]=E(this,Mt,oc).call(this),v=new Float64Array(36);return v.set([NaN,NaN,NaN,NaN,(t[2]-i)/a,(t[3]-r)/u,NaN,NaN,NaN,NaN,(t[4]-i)/a,(t[5]-r)/u,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,(t[16]-i)/a,(t[17]-r)/u,NaN,NaN,NaN,NaN,(t[14]-i)/a,(t[15]-r)/u],0),this.newFreeDrawOutline(v,e,l(this,Hn),l(this,$l),l(this,Ul),l(this,Vl))},q_=function(e,t){const i=l(this,Ci);return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],t),t+=6},Y_=function(e,t){const i=l(this,De).subarray(4,6),r=l(this,De).subarray(16,18),[a,u,c,d]=l(this,Hn),[p,m,v,w]=E(this,Mt,oc).call(this);return e.set([NaN,NaN,NaN,NaN,(i[0]-a)/c,(i[1]-u)/d,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,v,w,NaN,NaN,NaN,NaN,(r[0]-a)/c,(r[1]-u)/d],t),t+=24},x(ws,yh,8),x(ws,Qf,2),x(ws,Jf,l(ws,yh)+l(ws,Qf));let If=ws;var Gl,ra,Fs,vh,jn,wh,vt,Pn,ac,lc,Q_;class K_ extends V_{constructor(t,i,r,a,u,c){super();x(this,Pn);x(this,Gl);x(this,ra,null);x(this,Fs);x(this,vh);x(this,jn);x(this,wh);x(this,vt);A(this,vt,t),A(this,jn,i),A(this,Gl,r),A(this,wh,a),A(this,Fs,u),A(this,vh,c),E(this,Pn,Q_).call(this,c);const{x:d,y:p,width:m,height:v}=l(this,ra);for(let w=0,_=t.length;w<_;w+=2)t[w]=(t[w]-d)/m,t[w+1]=(t[w+1]-p)/v;for(let w=0,_=i.length;w<_;w+=2)i[w]=(i[w]-d)/m,i[w+1]=(i[w+1]-p)/v}toSVGPath(){const t=[`M${l(this,vt)[4]} ${l(this,vt)[5]}`];for(let i=6,r=l(this,vt).length;i<r;i+=6){if(isNaN(l(this,vt)[i])){t.push(`L${l(this,vt)[i+4]} ${l(this,vt)[i+5]}`);continue}t.push(`C${l(this,vt)[i]} ${l(this,vt)[i+1]} ${l(this,vt)[i+2]} ${l(this,vt)[i+3]} ${l(this,vt)[i+4]} ${l(this,vt)[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,r,a],u){const c=r-t,d=a-i;let p,m;switch(u){case 0:p=E(this,Pn,ac).call(this,l(this,vt),t,a,c,-d),m=E(this,Pn,ac).call(this,l(this,jn),t,a,c,-d);break;case 90:p=E(this,Pn,lc).call(this,l(this,vt),t,i,c,d),m=E(this,Pn,lc).call(this,l(this,jn),t,i,c,d);break;case 180:p=E(this,Pn,ac).call(this,l(this,vt),r,i,-c,d),m=E(this,Pn,ac).call(this,l(this,jn),r,i,-c,d);break;case 270:p=E(this,Pn,lc).call(this,l(this,vt),r,a,-c,-d),m=E(this,Pn,lc).call(this,l(this,jn),r,a,-c,-d);break}return{outline:Array.from(p),points:[Array.from(m)]}}get box(){return l(this,ra)}newOutliner(t,i,r,a,u,c=0){return new If(t,i,r,a,u,c)}getNewOutline(t,i){const{x:r,y:a,width:u,height:c}=l(this,ra),[d,p,m,v]=l(this,Gl),w=u*m,_=c*v,b=r*m+d,C=a*v+p,P=this.newOutliner({x:l(this,jn)[0]*w+b,y:l(this,jn)[1]*_+C},l(this,Gl),l(this,wh),t,l(this,vh),i??l(this,Fs));for(let k=2;k<l(this,jn).length;k+=2)P.add({x:l(this,jn)[k]*w+b,y:l(this,jn)[k+1]*_+C});return P.getOutlines()}get mustRemoveSelfIntersections(){return!0}}Gl=new WeakMap,ra=new WeakMap,Fs=new WeakMap,vh=new WeakMap,jn=new WeakMap,wh=new WeakMap,vt=new WeakMap,Pn=new WeakSet,ac=function(t,i,r,a,u){const c=new Float64Array(t.length);for(let d=0,p=t.length;d<p;d+=2)c[d]=i+t[d]*a,c[d+1]=r+t[d+1]*u;return c},lc=function(t,i,r,a,u){const c=new Float64Array(t.length);for(let d=0,p=t.length;d<p;d+=2)c[d]=i+t[d+1]*a,c[d+1]=r+t[d]*u;return c},Q_=function(t){const i=l(this,vt);let r=i[4],a=i[5],u=r,c=a,d=r,p=a,m=r,v=a;const w=t?Math.max:Math.min;for(let k=6,I=i.length;k<I;k+=6){if(isNaN(i[k]))u=Math.min(u,i[k+4]),c=Math.min(c,i[k+5]),d=Math.max(d,i[k+4]),p=Math.max(p,i[k+5]),v<i[k+5]?(m=i[k+4],v=i[k+5]):v===i[k+5]&&(m=w(m,i[k+4]));else{const D=fe.bezierBoundingBox(r,a,...i.slice(k,k+6));u=Math.min(u,D[0]),c=Math.min(c,D[1]),d=Math.max(d,D[2]),p=Math.max(p,D[3]),v<D[3]?(m=D[2],v=D[3]):v===D[3]&&(m=w(m,D[2]))}r=i[k+4],a=i[k+5]}const _=u-l(this,Fs),b=c-l(this,Fs),C=d-u+2*l(this,Fs),P=p-c+2*l(this,Fs);A(this,ra,{x:_,y:b,width:C,height:P,lastPoint:[m,v]})};var Ah,Hr,ki,mn,J_,Af,Z_,eS,sy;class cA{constructor(e,t=0,i=0,r=!0){x(this,mn);x(this,Ah);x(this,Hr,[]);x(this,ki,[]);let a=1/0,u=-1/0,c=1/0,d=-1/0;const p=10**-4;for(const{x:P,y:k,width:I,height:D}of e){const F=Math.floor((P-t)/p)*p,j=Math.ceil((P+I+t)/p)*p,H=Math.floor((k-t)/p)*p,V=Math.ceil((k+D+t)/p)*p,$=[F,H,V,!0],K=[j,H,V,!1];l(this,Hr).push($,K),a=Math.min(a,F),u=Math.max(u,j),c=Math.min(c,H),d=Math.max(d,V)}const m=u-a+2*i,v=d-c+2*i,w=a-i,_=c-i,b=l(this,Hr).at(r?-1:-2),C=[b[0],b[2]];for(const P of l(this,Hr)){const[k,I,D]=P;P[0]=(k-w)/m,P[1]=(I-_)/v,P[2]=(D-_)/v}A(this,Ah,{x:w,y:_,width:m,height:v,lastPoint:C})}getOutlines(){l(this,Hr).sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of l(this,Hr))t[3]?(e.push(...E(this,mn,sy).call(this,t)),E(this,mn,Z_).call(this,t)):(E(this,mn,eS).call(this,t),e.push(...E(this,mn,sy).call(this,t)));return E(this,mn,J_).call(this,e)}}Ah=new WeakMap,Hr=new WeakMap,ki=new WeakMap,mn=new WeakSet,J_=function(e){const t=[],i=new Set;for(const u of e){const[c,d,p]=u;t.push([c,d,u],[c,p,u])}t.sort((u,c)=>u[1]-c[1]||u[0]-c[0]);for(let u=0,c=t.length;u<c;u+=2){const d=t[u][2],p=t[u+1][2];d.push(p),p.push(d),i.add(d),i.add(p)}const r=[];let a;for(;i.size>0;){const u=i.values().next().value;let[c,d,p,m,v]=u;i.delete(u);let w=c,_=d;for(a=[c,p],r.push(a);;){let b;if(i.has(m))b=m;else if(i.has(v))b=v;else break;i.delete(b),[c,d,p,m,v]=b,w!==c&&(a.push(w,_,c,_===d?d:p),w=c),_=_===d?p:d}a.push(w,_)}return new eC(r,l(this,Ah))},Af=function(e){const t=l(this,ki);let i=0,r=t.length-1;for(;i<=r;){const a=i+r>>1,u=t[a][0];if(u===e)return a;u<e?i=a+1:r=a-1}return r+1},Z_=function([,e,t]){const i=E(this,mn,Af).call(this,e);l(this,ki).splice(i,0,[e,t])},eS=function([,e,t]){const i=E(this,mn,Af).call(this,e);for(let r=i;r<l(this,ki).length;r++){const[a,u]=l(this,ki)[r];if(a!==e)break;if(a===e&&u===t){l(this,ki).splice(r,1);return}}for(let r=i-1;r>=0;r--){const[a,u]=l(this,ki)[r];if(a!==e)break;if(a===e&&u===t){l(this,ki).splice(r,1);return}}},sy=function(e){const[t,i,r]=e,a=[[t,i,r]],u=E(this,mn,Af).call(this,r);for(let c=0;c<u;c++){const[d,p]=l(this,ki)[c];for(let m=0,v=a.length;m<v;m++){const[,w,_]=a[m];if(!(p<=w||_<=d)){if(w>=d){if(_>p)a[m][1]=p;else{if(v===1)return[];a.splice(m,1),m--,v--}continue}a[m][2]=d,_>p&&a.push([t,p,_])}}}return a};var _h,Xl;class eC extends V_{constructor(t,i){super();x(this,_h);x(this,Xl);A(this,Xl,t),A(this,_h,i)}toSVGPath(){const t=[];for(const i of l(this,Xl)){let[r,a]=i;t.push(`M${r} ${a}`);for(let u=2;u<i.length;u+=2){const c=i[u],d=i[u+1];c===r?(t.push(`V${d}`),a=d):d===a&&(t.push(`H${c}`),r=c)}t.push("Z")}return t.join(" ")}serialize([t,i,r,a],u){const c=[],d=r-t,p=a-i;for(const m of l(this,Xl)){const v=new Array(m.length);for(let w=0;w<m.length;w+=2)v[w]=t+m[w]*d,v[w+1]=a-m[w+1]*p;c.push(v)}return c}get box(){return l(this,_h)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}_h=new WeakMap,Xl=new WeakMap;class ry extends If{newFreeDrawOutline(e,t,i,r,a,u){return new tC(e,t,i,r,a,u)}get classNamesForDrawing(){return["highlight","free"]}}class tC extends K_{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,i,r,a,u=0){return new ry(e,t,i,r,a,u)}}var Ti,oa,ql,Pt,Sh,Yl,Eh,bh,jr,Pi,Kl,xh,Ye,oy,ay,ly,mo,tS,vr;const bn=class bn{constructor({editor:e=null,uiManager:t=null}){x(this,Ye);x(this,Ti,null);x(this,oa,null);x(this,ql);x(this,Pt,null);x(this,Sh,!1);x(this,Yl,!1);x(this,Eh,null);x(this,bh);x(this,jr,null);x(this,Pi,null);x(this,Kl);var i;e?(A(this,Yl,!1),A(this,Kl,xe.HIGHLIGHT_COLOR),A(this,Eh,e)):(A(this,Yl,!0),A(this,Kl,xe.HIGHLIGHT_DEFAULT_COLOR)),A(this,Pi,(e==null?void 0:e._uiManager)||t),A(this,bh,l(this,Pi)._eventBus),A(this,ql,(e==null?void 0:e.color)||((i=l(this,Pi))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),l(bn,xh)||A(bn,xh,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return ze(this,"_keyboardManager",new Ih([[["Escape","mac+Escape"],bn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],bn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],bn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],bn.prototype._moveToPrevious],[["Home","mac+Home"],bn.prototype._moveToBeginning],[["End","mac+End"],bn.prototype._moveToEnd]]))}renderButton(){const e=A(this,Ti,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=l(this,Pi)._signal;e.addEventListener("click",E(this,Ye,mo).bind(this),{signal:t}),e.addEventListener("keydown",E(this,Ye,ly).bind(this),{signal:t});const i=A(this,oa,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=l(this,ql),e.append(i),e}renderMainDropdown(){const e=A(this,Pt,E(this,Ye,oy).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===l(this,Ti)){E(this,Ye,mo).call(this,e);return}const t=e.target.getAttribute("data-color");t&&E(this,Ye,ay).call(this,t,e)}_moveToNext(e){var t,i;if(!l(this,Ye,vr)){E(this,Ye,mo).call(this,e);return}if(e.target===l(this,Ti)){(t=l(this,Pt).firstChild)==null||t.focus();return}(i=e.target.nextSibling)==null||i.focus()}_moveToPrevious(e){var t,i;if(e.target===((t=l(this,Pt))==null?void 0:t.firstChild)||e.target===l(this,Ti)){l(this,Ye,vr)&&this._hideDropdownFromKeyboard();return}l(this,Ye,vr)||E(this,Ye,mo).call(this,e),(i=e.target.previousSibling)==null||i.focus()}_moveToBeginning(e){var t;if(!l(this,Ye,vr)){E(this,Ye,mo).call(this,e);return}(t=l(this,Pt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!l(this,Ye,vr)){E(this,Ye,mo).call(this,e);return}(t=l(this,Pt).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=l(this,Pt))==null||e.classList.add("hidden"),(t=l(this,jr))==null||t.abort(),A(this,jr,null)}_hideDropdownFromKeyboard(){var e;if(!l(this,Yl)){if(!l(this,Ye,vr)){(e=l(this,Eh))==null||e.unselect();return}this.hideDropdown(),l(this,Ti).focus({preventScroll:!0,focusVisible:l(this,Sh)})}}updateColor(e){if(l(this,oa)&&(l(this,oa).style.backgroundColor=e),!l(this,Pt))return;const t=l(this,Pi).highlightColors.values();for(const i of l(this,Pt).children)i.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=l(this,Ti))==null||e.remove(),A(this,Ti,null),A(this,oa,null),(t=l(this,Pt))==null||t.remove(),A(this,Pt,null)}};Ti=new WeakMap,oa=new WeakMap,ql=new WeakMap,Pt=new WeakMap,Sh=new WeakMap,Yl=new WeakMap,Eh=new WeakMap,bh=new WeakMap,jr=new WeakMap,Pi=new WeakMap,Kl=new WeakMap,xh=new WeakMap,Ye=new WeakSet,oy=function(){const e=document.createElement("div"),t=l(this,Pi)._signal;e.addEventListener("contextmenu",ai,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,r]of l(this,Pi).highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",r),a.title=i,a.setAttribute("data-l10n-id",l(bn,xh)[i]);const u=document.createElement("span");a.append(u),u.className="swatch",u.style.backgroundColor=r,a.setAttribute("aria-selected",r===l(this,ql)),a.addEventListener("click",E(this,Ye,ay).bind(this,r),{signal:t}),e.append(a)}return e.addEventListener("keydown",E(this,Ye,ly).bind(this),{signal:t}),e},ay=function(e,t){t.stopPropagation(),l(this,bh).dispatch("switchannotationeditorparams",{source:this,type:l(this,Kl),value:e})},ly=function(e){bn._keyboardManager.exec(this,e)},mo=function(e){if(l(this,Ye,vr)){this.hideDropdown();return}if(A(this,Sh,e.detail===0),l(this,jr)||(A(this,jr,new AbortController),window.addEventListener("pointerdown",E(this,Ye,tS).bind(this),{signal:l(this,Pi).combinedSignal(l(this,jr))})),l(this,Pt)){l(this,Pt).classList.remove("hidden");return}const t=A(this,Pt,E(this,Ye,oy).call(this));l(this,Ti).append(t)},tS=function(e){var t;(t=l(this,Pt))!=null&&t.contains(e.target)||this.hideDropdown()},vr=function(){return l(this,Pt)&&!l(this,Pt).classList.contains("hidden")},x(bn,xh,null);let Ff=bn;var Ql,Ch,Ds,aa,Jl,ti,kh,Th,la,Ri,sn,kn,Zl,Ns,Rt,eu,ni,Ph,Te,uy,_f,nS,iS,sS,cy,yo,ri,nl,rS,Sf,uc,oS,aS,lS,uS,cS;const Ve=class Ve extends qe{constructor(t){super({...t,name:"highlightEditor"});x(this,Te);x(this,Ql,null);x(this,Ch,0);x(this,Ds);x(this,aa,null);x(this,Jl,null);x(this,ti,null);x(this,kh,null);x(this,Th,0);x(this,la,null);x(this,Ri,null);x(this,sn,null);x(this,kn,!1);x(this,Zl,null);x(this,Ns);x(this,Rt,null);x(this,eu,"");x(this,ni);x(this,Ph,"");this.color=t.color||Ve._defaultColor,A(this,ni,t.thickness||Ve._defaultThickness),A(this,Ns,t.opacity||Ve._defaultOpacity),A(this,Ds,t.boxes||null),A(this,Ph,t.methodOfCreation||""),A(this,eu,t.text||""),this._isDraggable=!1,t.highlightId>-1?(A(this,kn,!0),E(this,Te,_f).call(this,t),E(this,Te,yo).call(this)):l(this,Ds)&&(A(this,Ql,t.anchorNode),A(this,Ch,t.anchorOffset),A(this,kh,t.focusNode),A(this,Th,t.focusOffset),E(this,Te,uy).call(this),E(this,Te,yo).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=Ve.prototype;return ze(this,"_keyboardManager",new Ih([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,kn)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:l(this,ni),methodOfCreation:l(this,Ph)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,i){var r;qe.initialize(t,i),Ve._defaultColor||(Ve._defaultColor=((r=i.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,i){switch(t){case xe.HIGHLIGHT_DEFAULT_COLOR:Ve._defaultColor=i;break;case xe.HIGHLIGHT_THICKNESS:Ve._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return l(this,Zl)}updateParams(t,i){switch(t){case xe.HIGHLIGHT_COLOR:E(this,Te,nS).call(this,i);break;case xe.HIGHLIGHT_THICKNESS:E(this,Te,iS).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[xe.HIGHLIGHT_DEFAULT_COLOR,Ve._defaultColor],[xe.HIGHLIGHT_THICKNESS,Ve._defaultThickness]]}get propertiesToUpdate(){return[[xe.HIGHLIGHT_COLOR,this.color||Ve._defaultColor],[xe.HIGHLIGHT_THICKNESS,l(this,ni)||Ve._defaultThickness],[xe.HIGHLIGHT_FREE,l(this,kn)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(A(this,Jl,new Ff({editor:this})),t.addColorPicker(l(this,Jl))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(E(this,Te,uc).call(this))}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,E(this,Te,uc).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){E(this,Te,cy).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,Te,yo).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let i=!1;this.parent&&!t?E(this,Te,cy).call(this):t&&(E(this,Te,yo).call(this,t),i=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),i&&this.select()}rotate(t){var a,u,c;const{drawLayer:i}=this.parent;let r;l(this,kn)?(t=(t-this.rotation+360)%360,r=E(a=Ve,ri,nl).call(a,l(this,Ri).box,t)):r=E(u=Ve,ri,nl).call(u,this,t),i.rotate(l(this,sn),t),i.rotate(l(this,Rt),t),i.updateBox(l(this,sn),r),i.updateBox(l(this,Rt),E(c=Ve,ri,nl).call(c,l(this,ti).box,t))}render(){if(this.div)return this.div;const t=super.render();l(this,eu)&&(t.setAttribute("aria-label",l(this,eu)),t.setAttribute("role","mark")),l(this,kn)?t.classList.add("free"):this.div.addEventListener("keydown",E(this,Te,rS).bind(this),{signal:this._uiManager._signal});const i=A(this,la,document.createElement("div"));t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=l(this,aa);const[r,a]=this.parentDimensions;return this.setDims(this.width*r,this.height*a),Lf(this,l(this,la),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent.drawLayer.addClass(l(this,Rt),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(l(this,Rt),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:E(this,Te,Sf).call(this,!0);break;case 1:case 3:E(this,Te,Sf).call(this,!1);break}}select(){var t,i;super.select(),l(this,Rt)&&((t=this.parent)==null||t.drawLayer.removeClass(l(this,Rt),"hovered"),(i=this.parent)==null||i.drawLayer.addClass(l(this,Rt),"selected"))}unselect(){var t;super.unselect(),l(this,Rt)&&((t=this.parent)==null||t.drawLayer.removeClass(l(this,Rt),"selected"),l(this,kn)||E(this,Te,Sf).call(this,!1))}get _mustFixPosition(){return!l(this,kn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(l(this,sn),t),this.parent.drawLayer.show(l(this,Rt),t))}static startHighlighting(t,i,{target:r,x:a,y:u}){const{x:c,y:d,width:p,height:m}=r.getBoundingClientRect(),v=new AbortController,w=t.combinedSignal(v),_=C=>{C.preventDefault(),C.stopPropagation()},b=C=>{v.abort(),E(this,ri,uS).call(this,t,C)};window.addEventListener("blur",b,{signal:w}),window.addEventListener("pointerup",b,{signal:w}),window.addEventListener("pointerdown",_,{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",ai,{signal:w}),r.addEventListener("pointermove",E(this,ri,lS).bind(this,t),{signal:w}),this._freeHighlight=new ry({x:a,y:u},[c,d,p,m],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(t,i,r){var C,P,k,I;let a=null;if(t instanceof D_){const{data:{quadPoints:D,rect:F,rotation:j,id:H,color:V,opacity:$,popupRef:K},parent:{page:{pageNumber:te}}}=t;a=t={annotationType:Pe.HIGHLIGHT,color:Array.from(V),opacity:$,quadPoints:D,boxes:null,pageIndex:te-1,rect:F.slice(0),rotation:j,id:H,deleted:!1,popupRef:K}}else if(t instanceof Wy){const{data:{inkLists:D,rect:F,rotation:j,id:H,color:V,borderStyle:{rawWidth:$},popupRef:K},parent:{page:{pageNumber:te}}}=t;a=t={annotationType:Pe.HIGHLIGHT,color:Array.from(V),thickness:$,inkLists:D,boxes:null,pageIndex:te-1,rect:F.slice(0),rotation:j,id:H,deleted:!1,popupRef:K}}const{color:u,quadPoints:c,inkLists:d,opacity:p}=t,m=await super.deserialize(t,i,r);m.color=fe.makeHexColor(...u),A(m,Ns,p||1),d&&A(m,ni,t.thickness),m.annotationElementId=t.id||null,m._initialData=a;const[v,w]=m.pageDimensions,[_,b]=m.pageTranslation;if(c){const D=A(m,Ds,[]);for(let F=0;F<c.length;F+=8)D.push({x:(c[F]-_)/v,y:1-(c[F+1]-b)/w,width:(c[F+2]-c[F])/v,height:(c[F+1]-c[F+5])/w});E(C=m,Te,uy).call(C),E(P=m,Te,yo).call(P),m.rotate(m.rotation)}else if(d){A(m,kn,!0);const D=d[0],F={x:D[0]-_,y:w-(D[1]-b)},j=new ry(F,[0,0,v,w],1,l(m,ni)/2,!0,.001);for(let $=0,K=D.length;$<K;$+=2)F.x=D[$]-_,F.y=w-(D[$+1]-b),j.add(F);const{id:H,clipPathId:V}=i.drawLayer.draw(j,m.color,m._defaultOpacity,!0);E(k=m,Te,_f).call(k,{highlightOutlines:j.getOutlines(),highlightId:H,clipPathId:V}),E(I=m,Te,yo).call(I)}return m}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),r=qe._colorManager.convert(this.color),a={annotationType:Pe.HIGHLIGHT,color:r,opacity:l(this,Ns),thickness:l(this,ni),quadPoints:E(this,Te,oS).call(this),outlines:E(this,Te,aS).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:E(this,Te,uc).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!E(this,Te,cS).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Ql=new WeakMap,Ch=new WeakMap,Ds=new WeakMap,aa=new WeakMap,Jl=new WeakMap,ti=new WeakMap,kh=new WeakMap,Th=new WeakMap,la=new WeakMap,Ri=new WeakMap,sn=new WeakMap,kn=new WeakMap,Zl=new WeakMap,Ns=new WeakMap,Rt=new WeakMap,eu=new WeakMap,ni=new WeakMap,Ph=new WeakMap,Te=new WeakSet,uy=function(){const t=new cA(l(this,Ds),.001);A(this,Ri,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=l(this,Ri).box;const i=new cA(l(this,Ds),.0025,.001,this._uiManager.direction==="ltr");A(this,ti,i.getOutlines());const{lastPoint:r}=l(this,ti).box;A(this,Zl,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},_f=function({highlightOutlines:t,highlightId:i,clipPathId:r}){var v,w;if(A(this,Ri,t),A(this,ti,t.getNewOutline(l(this,ni)/2+1.5,.0025)),i>=0)A(this,sn,i),A(this,aa,r),this.parent.drawLayer.finalizeLine(i,t),A(this,Rt,this.parent.drawLayer.drawOutline(l(this,ti)));else if(this.parent){const _=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(l(this,sn),t),this.parent.drawLayer.updateBox(l(this,sn),E(v=Ve,ri,nl).call(v,l(this,Ri).box,(_-this.rotation+360)%360)),this.parent.drawLayer.updateLine(l(this,Rt),l(this,ti)),this.parent.drawLayer.updateBox(l(this,Rt),E(w=Ve,ri,nl).call(w,l(this,ti).box,_))}const{x:u,y:c,width:d,height:p}=t.box;switch(this.rotation){case 0:this.x=u,this.y=c,this.width=d,this.height=p;break;case 90:{const[_,b]=this.parentDimensions;this.x=c,this.y=1-u,this.width=d*b/_,this.height=p*_/b;break}case 180:this.x=1-u,this.y=1-c,this.width=d,this.height=p;break;case 270:{const[_,b]=this.parentDimensions;this.x=1-c,this.y=u,this.width=d*b/_,this.height=p*_/b;break}}const{lastPoint:m}=l(this,ti).box;A(this,Zl,[(m[0]-u)/d,(m[1]-c)/p])},nS=function(t){const i=(u,c)=>{var d,p,m;this.color=u,(d=this.parent)==null||d.drawLayer.changeColor(l(this,sn),u),(p=l(this,Jl))==null||p.updateColor(u),A(this,Ns,c),(m=this.parent)==null||m.drawLayer.changeOpacity(l(this,sn),c)},r=this.color,a=l(this,Ns);this.addCommands({cmd:i.bind(this,t,Ve._defaultOpacity),undo:i.bind(this,r,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xe.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},iS=function(t){const i=l(this,ni),r=a=>{A(this,ni,a),E(this,Te,sS).call(this,a)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},sS=function(t){if(!l(this,kn))return;E(this,Te,_f).call(this,{highlightOutlines:l(this,Ri).getNewOutline(t/2)}),this.fixAndSetPosition();const[i,r]=this.parentDimensions;this.setDims(this.width*i,this.height*r)},cy=function(){l(this,sn)===null||!this.parent||(this.parent.drawLayer.remove(l(this,sn)),A(this,sn,null),this.parent.drawLayer.remove(l(this,Rt)),A(this,Rt,null))},yo=function(t=this.parent){l(this,sn)===null&&({id:cn(this,sn)._,clipPathId:cn(this,aa)._}=t.drawLayer.draw(l(this,Ri),this.color,l(this,Ns)),A(this,Rt,t.drawLayer.drawOutline(l(this,ti))),l(this,la)&&(l(this,la).style.clipPath=l(this,aa)))},ri=new WeakSet,nl=function({x:t,y:i,width:r,height:a},u){switch(u){case 90:return{x:1-i-a,y:t,width:a,height:r};case 180:return{x:1-t-r,y:1-i-a,width:r,height:a};case 270:return{x:i,y:1-t-r,width:a,height:r}}return{x:t,y:i,width:r,height:a}},rS=function(t){Ve._keyboardManager.exec(this,t)},Sf=function(t){if(!l(this,Ql))return;const i=window.getSelection();t?i.setPosition(l(this,Ql),l(this,Ch)):i.setPosition(l(this,kh),l(this,Th))},uc=function(){return l(this,kn)?this.rotation:0},oS=function(){if(l(this,kn))return null;const[t,i]=this.pageDimensions,[r,a]=this.pageTranslation,u=l(this,Ds),c=new Float32Array(u.length*8);let d=0;for(const{x:p,y:m,width:v,height:w}of u){const _=p*t+r,b=(1-m-w)*i+a;c[d]=c[d+4]=_,c[d+1]=c[d+3]=b,c[d+2]=c[d+6]=_+v*t,c[d+5]=c[d+7]=b+w*i,d+=8}return c},aS=function(t){return l(this,Ri).serialize(t,E(this,Te,uc).call(this))},lS=function(t,i){this._freeHighlight.add(i)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},uS=function(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},cS=function(t){const{color:i}=this._initialData;return t.color.some((r,a)=>r!==i[a])},x(Ve,ri),be(Ve,"_defaultColor",null),be(Ve,"_defaultOpacity",1),be(Ve,"_defaultThickness",12),be(Ve,"_type","highlight"),be(Ve,"_editorType",Pe.HIGHLIGHT),be(Ve,"_freeHighlightId",-1),be(Ve,"_freeHighlight",null),be(Ve,"_freeHighlightClipId","");let Df=Ve;var ua,ca,es,Os,ii,ha,da,fa,zs,tu,pa,ga,Br,J,hS,dS,fS,pS,dy,gS,fy,mS,yS,vS,wS,AS,vo,py,gy,my,Ef,bf,il,yy,xf,Ys,_S,vy,SS,ES,wy,Cf,cc;const lt=class lt extends qe{constructor(t){super({...t,name:"inkEditor"});x(this,J);x(this,ua,0);x(this,ca,0);x(this,es,null);x(this,Os,new Path2D);x(this,ii,!1);x(this,ha,null);x(this,da,!1);x(this,fa,!1);x(this,zs,null);x(this,tu,null);x(this,pa,0);x(this,ga,0);x(this,Br,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,i){qe.initialize(t,i)}static updateDefaultParams(t,i){switch(t){case xe.INK_THICKNESS:lt._defaultThickness=i;break;case xe.INK_COLOR:lt._defaultColor=i;break;case xe.INK_OPACITY:lt._defaultOpacity=i/100;break}}updateParams(t,i){switch(t){case xe.INK_THICKNESS:E(this,J,hS).call(this,i);break;case xe.INK_COLOR:E(this,J,dS).call(this,i);break;case xe.INK_OPACITY:E(this,J,fS).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[xe.INK_THICKNESS,lt._defaultThickness],[xe.INK_COLOR,lt._defaultColor||qe._defaultLineColor],[xe.INK_OPACITY,Math.round(lt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[xe.INK_THICKNESS,this.thickness||lt._defaultThickness],[xe.INK_COLOR,this.color||lt._defaultColor||qe._defaultLineColor],[xe.INK_OPACITY,Math.round(100*(this.opacity??lt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(E(this,J,Ef).call(this),E(this,J,bf).call(this)),this.isAttachedToDOM||(this.parent.add(this),E(this,J,il).call(this)),E(this,J,cc).call(this)))}remove(){var t;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,l(this,es)&&(clearTimeout(l(this,es)),A(this,es,null)),(t=l(this,zs))==null||t.disconnect(),A(this,zs,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,i]=this.parentDimensions,r=this.width*t,a=this.height*i;this.setDimensions(r,a)}enableEditMode(){l(this,ii)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,E(this,J,py).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),E(this,J,gy).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){l(this,ii)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),A(this,ii,!0),this.div.classList.add("disabled"),E(this,J,cc).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||l(this,ii)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),E(this,J,gS).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),E(this,J,fy).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),E(this,J,my).call(this,t)}canvasPointerleave(t){E(this,J,my).call(this,t)}get isResizable(){return!this.isEmpty()&&l(this,ii)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[r,a,u,c]=E(this,J,pS).call(this);if(this.setAt(r,a,0,0),this.setDims(u,c),E(this,J,Ef).call(this),this.width){const[d,p]=this.parentDimensions;this.setAspectRatio(this.width*d,this.height*p),this.setAt(t*d,i*p,this.width*d,this.height*p),A(this,fa,!0),E(this,J,il).call(this),this.setDims(this.width*d,this.height*p),E(this,J,vo).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return E(this,J,bf).call(this),this.div}setDimensions(t,i){const r=Math.round(t),a=Math.round(i);if(l(this,pa)===r&&l(this,ga)===a)return;A(this,pa,r),A(this,ga,a),this.canvas.style.visibility="hidden";const[u,c]=this.parentDimensions;this.width=t/u,this.height=i/c,this.fixAndSetPosition(),l(this,ii)&&E(this,J,yy).call(this,t,i),E(this,J,il).call(this),E(this,J,vo).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(t,i,r){var P,k,I;if(t instanceof Wy)return null;const a=await super.deserialize(t,i,r);a.thickness=t.thickness,a.color=fe.makeHexColor(...t.color),a.opacity=t.opacity;const[u,c]=a.pageDimensions,d=a.width*u,p=a.height*c,m=a.parentScale,v=t.thickness/2;A(a,ii,!0),A(a,pa,Math.round(d)),A(a,ga,Math.round(p));const{paths:w,rect:_,rotation:b}=t;for(let{bezier:D}of w){D=E(P=lt,Ys,SS).call(P,D,_,b);const F=[];a.paths.push(F);let j=m*(D[0]-v),H=m*(D[1]-v);for(let $=2,K=D.length;$<K;$+=6){const te=m*(D[$]-v),ee=m*(D[$+1]-v),Se=m*(D[$+2]-v),de=m*(D[$+3]-v),ce=m*(D[$+4]-v),ve=m*(D[$+5]-v);F.push([[j,H],[te,ee],[Se,de],[ce,ve]]),j=ce,H=ve}const V=E(this,Ys,_S).call(this,F);a.bezierPath2D.push(V)}const C=E(k=a,J,wy).call(k);return A(a,ca,Math.max(qe.MIN_SIZE,C[2]-C[0])),A(a,ua,Math.max(qe.MIN_SIZE,C[3]-C[1])),E(I=a,J,yy).call(I,d,p),a}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),i=qe._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Pe.INK,color:i,thickness:this.thickness,opacity:this.opacity,paths:E(this,J,ES).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};ua=new WeakMap,ca=new WeakMap,es=new WeakMap,Os=new WeakMap,ii=new WeakMap,ha=new WeakMap,da=new WeakMap,fa=new WeakMap,zs=new WeakMap,tu=new WeakMap,pa=new WeakMap,ga=new WeakMap,Br=new WeakMap,J=new WeakSet,hS=function(t){const i=a=>{this.thickness=a,E(this,J,cc).call(this)},r=this.thickness;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},dS=function(t){const i=a=>{this.color=a,E(this,J,vo).call(this)},r=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xe.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},fS=function(t){const i=a=>{this.opacity=a,E(this,J,vo).call(this)};t/=100;const r=this.opacity;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xe.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},pS=function(){const{parentRotation:t,parentDimensions:[i,r]}=this;switch(t){case 90:return[0,r,r,i];case 180:return[i,r,i,r];case 270:return[i,0,r,i];default:return[0,0,i,r]}},dy=function(){const{ctx:t,color:i,opacity:r,thickness:a,parentScale:u,scaleFactor:c}=this;t.lineWidth=a*u/c,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${i}${E1(r)}`},gS=function(t,i){this.canvas.addEventListener("contextmenu",ai,{signal:this._uiManager._signal}),E(this,J,gy).call(this),A(this,ha,new AbortController);const r=this._uiManager.combinedSignal(l(this,ha));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:r}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:r}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:r}),this.isEditing=!0,l(this,fa)||(A(this,fa,!0),E(this,J,il).call(this),this.thickness||(this.thickness=lt._defaultThickness),this.color||(this.color=lt._defaultColor||qe._defaultLineColor),this.opacity??(this.opacity=lt._defaultOpacity)),this.currentPath.push([t,i]),A(this,da,!1),E(this,J,dy).call(this),A(this,Br,()=>{E(this,J,vS).call(this),l(this,Br)&&window.requestAnimationFrame(l(this,Br))}),window.requestAnimationFrame(l(this,Br))},fy=function(t,i){const[r,a]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===r&&i===a)return;const u=this.currentPath;let c=l(this,Os);if(u.push([t,i]),A(this,da,!0),u.length<=2){c.moveTo(...u[0]),c.lineTo(t,i);return}u.length===3&&(A(this,Os,c=new Path2D),c.moveTo(...u[0])),E(this,J,wS).call(this,c,...u.at(-3),...u.at(-2),t,i)},mS=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);l(this,Os).lineTo(...t)},yS=function(t,i){A(this,Br,null),t=Math.min(Math.max(t,0),this.canvas.width),i=Math.min(Math.max(i,0),this.canvas.height),E(this,J,fy).call(this,t,i),E(this,J,mS).call(this);let r;if(this.currentPath.length!==1)r=E(this,J,AS).call(this);else{const p=[t,i];r=[[p,p.slice(),p.slice(),p]]}const a=l(this,Os),u=this.currentPath;this.currentPath=[],A(this,Os,new Path2D);const c=()=>{this.allRawPaths.push(u),this.paths.push(r),this.bezierPath2D.push(a),this._uiManager.rebuild(this)},d=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(E(this,J,Ef).call(this),E(this,J,bf).call(this)),E(this,J,cc).call(this))};this.addCommands({cmd:c,undo:d,mustExec:!0})},vS=function(){if(!l(this,da))return;A(this,da,!1);const t=Math.ceil(this.thickness*this.parentScale),i=this.currentPath.slice(-3),r=i.map(c=>c[0]),a=i.map(c=>c[1]);Math.min(...r)-t,Math.max(...r)+t,Math.min(...a)-t,Math.max(...a)+t;const{ctx:u}=this;u.save(),u.clearRect(0,0,this.canvas.width,this.canvas.height);for(const c of this.bezierPath2D)u.stroke(c);u.stroke(l(this,Os)),u.restore()},wS=function(t,i,r,a,u,c,d){const p=(i+a)/2,m=(r+u)/2,v=(a+c)/2,w=(u+d)/2;t.bezierCurveTo(p+2*(a-p)/3,m+2*(u-m)/3,v+2*(a-v)/3,w+2*(u-w)/3,v,w)},AS=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const i=[];let r,[a,u]=t[0];for(r=1;r<t.length-2;r++){const[_,b]=t[r],[C,P]=t[r+1],k=(_+C)/2,I=(b+P)/2,D=[a+2*(_-a)/3,u+2*(b-u)/3],F=[k+2*(_-k)/3,I+2*(b-I)/3];i.push([[a,u],D,F,[k,I]]),[a,u]=[k,I]}const[c,d]=t[r],[p,m]=t[r+1],v=[a+2*(c-a)/3,u+2*(d-u)/3],w=[p+2*(c-p)/3,m+2*(d-m)/3];return i.push([[a,u],v,w,[p,m]]),i},vo=function(){if(this.isEmpty()){E(this,J,xf).call(this);return}E(this,J,dy).call(this);const{canvas:t,ctx:i}=this;i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.width,t.height),E(this,J,xf).call(this);for(const r of this.bezierPath2D)i.stroke(r)},py=function(){if(l(this,tu))return;A(this,tu,new AbortController);const t=this._uiManager.combinedSignal(l(this,tu));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:t})},gy=function(){var t;(t=this.pointerdownAC)==null||t.abort(),this.pointerdownAC=null},my=function(t){var i;(i=l(this,ha))==null||i.abort(),A(this,ha,null),E(this,J,py).call(this),l(this,es)&&clearTimeout(l(this,es)),A(this,es,setTimeout(()=>{A(this,es,null),this.canvas.removeEventListener("contextmenu",ai)},10)),E(this,J,yS).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Ef=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},bf=function(){A(this,zs,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&this.setDimensions(i.width,i.height)})),l(this,zs).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=l(this,zs))==null||t.disconnect(),A(this,zs,null)},{once:!0})},il=function(){if(!l(this,fa))return;const[t,i]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*i),E(this,J,xf).call(this)},yy=function(t,i){const r=E(this,J,Cf).call(this),a=(t-r)/l(this,ca),u=(i-r)/l(this,ua);this.scaleFactor=Math.min(a,u)},xf=function(){const t=E(this,J,Cf).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},Ys=new WeakSet,_S=function(t){const i=new Path2D;for(let r=0,a=t.length;r<a;r++){const[u,c,d,p]=t[r];r===0&&i.moveTo(...u),i.bezierCurveTo(c[0],c[1],d[0],d[1],p[0],p[1])}return i},vy=function(t,i,r){const[a,u,c,d]=i;switch(r){case 0:for(let p=0,m=t.length;p<m;p+=2)t[p]+=a,t[p+1]=d-t[p+1];break;case 90:for(let p=0,m=t.length;p<m;p+=2){const v=t[p];t[p]=t[p+1]+a,t[p+1]=v+u}break;case 180:for(let p=0,m=t.length;p<m;p+=2)t[p]=c-t[p],t[p+1]+=u;break;case 270:for(let p=0,m=t.length;p<m;p+=2){const v=t[p];t[p]=c-t[p+1],t[p+1]=d-v}break;default:throw new Error("Invalid rotation")}return t},SS=function(t,i,r){const[a,u,c,d]=i;switch(r){case 0:for(let p=0,m=t.length;p<m;p+=2)t[p]-=a,t[p+1]=d-t[p+1];break;case 90:for(let p=0,m=t.length;p<m;p+=2){const v=t[p];t[p]=t[p+1]-u,t[p+1]=v-a}break;case 180:for(let p=0,m=t.length;p<m;p+=2)t[p]=c-t[p],t[p+1]-=u;break;case 270:for(let p=0,m=t.length;p<m;p+=2){const v=t[p];t[p]=d-t[p+1],t[p+1]=c-v}break;default:throw new Error("Invalid rotation")}return t},ES=function(t,i,r,a){var m,v;const u=[],c=this.thickness/2,d=t*i+c,p=t*r+c;for(const w of this.paths){const _=[],b=[];for(let C=0,P=w.length;C<P;C++){const[k,I,D,F]=w[C];if(k[0]===F[0]&&k[1]===F[1]&&P===1){const de=t*k[0]+d,ce=t*k[1]+p;_.push(de,ce),b.push(de,ce);break}const j=t*k[0]+d,H=t*k[1]+p,V=t*I[0]+d,$=t*I[1]+p,K=t*D[0]+d,te=t*D[1]+p,ee=t*F[0]+d,Se=t*F[1]+p;C===0&&(_.push(j,H),b.push(j,H)),_.push(V,$,K,te,ee,Se),b.push(V,$),C===P-1&&b.push(ee,Se)}u.push({bezier:E(m=lt,Ys,vy).call(m,_,a,this.rotation),points:E(v=lt,Ys,vy).call(v,b,a,this.rotation)})}return u},wy=function(){let t=1/0,i=-1/0,r=1/0,a=-1/0;for(const u of this.paths)for(const[c,d,p,m]of u){const v=fe.bezierBoundingBox(...c,...d,...p,...m);t=Math.min(t,v[0]),r=Math.min(r,v[1]),i=Math.max(i,v[2]),a=Math.max(a,v[3])}return[t,r,i,a]},Cf=function(){return l(this,ii)?Math.ceil(this.thickness*this.parentScale):0},cc=function(t=!1){if(this.isEmpty())return;if(!l(this,ii)){E(this,J,vo).call(this);return}const i=E(this,J,wy).call(this),r=E(this,J,Cf).call(this);A(this,ca,Math.max(qe.MIN_SIZE,i[2]-i[0])),A(this,ua,Math.max(qe.MIN_SIZE,i[3]-i[1]));const a=Math.ceil(r+l(this,ca)*this.scaleFactor),u=Math.ceil(r+l(this,ua)*this.scaleFactor),[c,d]=this.parentDimensions;this.width=a/c,this.height=u/d,this.setAspectRatio(a,u);const p=this.translationX,m=this.translationY;this.translationX=-i[0],this.translationY=-i[1],E(this,J,il).call(this),E(this,J,vo).call(this),A(this,pa,a),A(this,ga,u),this.setDims(a,u);const v=t?r/this.scaleFactor/2:0;this.translate(p-this.translationX-v,m-this.translationY-v)},x(lt,Ys),be(lt,"_defaultColor",null),be(lt,"_defaultOpacity",1),be(lt,"_defaultThickness",1),be(lt,"_type","ink"),be(lt,"_editorType",Pe.INK);let hy=lt;var ct,Xt,Ur,Hs,Vr,nu,ts,js,ns,Bn,iu,Oe,hc,dc,kf,_y,bS,Tf,Sy,Pf,xS,CS;const gc=class gc extends qe{constructor(t){super({...t,name:"stampEditor"});x(this,Oe);x(this,ct,null);x(this,Xt,null);x(this,Ur,null);x(this,Hs,null);x(this,Vr,null);x(this,nu,"");x(this,ts,null);x(this,js,null);x(this,ns,null);x(this,Bn,!1);x(this,iu,!1);A(this,Hs,t.bitmapUrl),A(this,Vr,t.bitmapFile)}static initialize(t,i){qe.initialize(t,i)}static get supportedTypes(){return ze(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return ze(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,i){i.pasteEditor(Pe.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:u,height:c}=t||this.copyCanvas(null,null,!0).imageData,d=await r.guess({name:"altText",request:{data:a,width:u,height:c,channels:a.length/(u*c)}});if(!d)throw new Error("No response from the AI service.");if(d.error)throw new Error("Error from the AI service.");if(d.cancel)return null;if(!d.output)throw new Error("No valid response from the AI service.");const p=d.output;return await this.setGuessedAltText(p),i&&!this.hasAltTextData()&&(this.altTextData={alt:p,decorative:!1}),p}remove(){var t,i;l(this,Xt)&&(A(this,ct,null),this._uiManager.imageManager.deleteId(l(this,Xt)),(t=l(this,ts))==null||t.remove(),A(this,ts,null),(i=l(this,js))==null||i.disconnect(),A(this,js,null),l(this,ns)&&(clearTimeout(l(this,ns)),A(this,ns,null))),super.remove()}rebuild(){if(!this.parent){l(this,Xt)&&E(this,Oe,kf).call(this);return}super.rebuild(),this.div!==null&&(l(this,Xt)&&l(this,ts)===null&&E(this,Oe,kf).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(l(this,Ur)||l(this,ct)||l(this,Hs)||l(this,Vr)||l(this,Xt))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;if(this.width&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),l(this,ct)?E(this,Oe,_y).call(this):E(this,Oe,kf).call(this),this.width&&!this.annotationElementId){const[r,a]=this.parentDimensions;this.setAt(t*r,i*a,this.width*r,this.height*a)}return this.div}copyCanvas(t,i,r=!1){var _;t||(t=224);const{width:a,height:u}=l(this,ct),c=new mm;let d=l(this,ct),p=a,m=u,v=null;if(i){if(a>i||u>i){const $=Math.min(i/a,i/u);p=Math.floor(a*$),m=Math.floor(u*$)}v=document.createElement("canvas");const b=v.width=Math.ceil(p*c.sx),C=v.height=Math.ceil(m*c.sy);l(this,Bn)||(d=E(this,Oe,Tf).call(this,b,C));const P=v.getContext("2d");P.filter=this._uiManager.hcmFilter;let k="white",I="#cfcfd8";this._uiManager.hcmFilter!=="none"?I="black":(_=window.matchMedia)!=null&&_.call(window,"(prefers-color-scheme: dark)").matches&&(k="#8f8f9d",I="#42414d");const D=15,F=D*c.sx,j=D*c.sy,H=new OffscreenCanvas(F*2,j*2),V=H.getContext("2d");V.fillStyle=k,V.fillRect(0,0,F*2,j*2),V.fillStyle=I,V.fillRect(0,0,F,j),V.fillRect(F,j,F,j),P.fillStyle=P.createPattern(H,"repeat"),P.fillRect(0,0,b,C),P.drawImage(d,0,0,d.width,d.height,0,0,b,C)}let w=null;if(r){let b,C;if(c.symmetric&&d.width<t&&d.height<t)b=d.width,C=d.height;else if(d=l(this,ct),a>t||u>t){const I=Math.min(t/a,t/u);b=Math.floor(a*I),C=Math.floor(u*I),l(this,Bn)||(d=E(this,Oe,Tf).call(this,b,C))}const k=new OffscreenCanvas(b,C).getContext("2d",{willReadFrequently:!0});k.drawImage(d,0,0,d.width,d.height,0,0,b,C),w={width:b,height:C,data:k.getImageData(0,0,b,C).data}}return{canvas:v,width:p,height:m,imageData:w}}getImageForAltText(){return l(this,ts)}static async deserialize(t,i,r){var C;let a=null;if(t instanceof N_){const{data:{rect:P,rotation:k,id:I,structParent:D,popupRef:F},container:j,parent:{page:{pageNumber:H}}}=t,V=j.querySelector("canvas"),$=r.imageManager.getFromCanvas(j.id,V);V.remove();const K=((C=await i._structTree.getAriaAttributes(`${Fy}${I}`))==null?void 0:C.get("aria-label"))||"";a=t={annotationType:Pe.STAMP,bitmapId:$.id,bitmap:$.bitmap,pageIndex:H-1,rect:P.slice(0),rotation:k,id:I,deleted:!1,accessibilityData:{decorative:!1,altText:K},isSvg:!1,structParent:D,popupRef:F}}const u=await super.deserialize(t,i,r),{rect:c,bitmap:d,bitmapUrl:p,bitmapId:m,isSvg:v,accessibilityData:w}=t;m&&r.imageManager.isValidId(m)?(A(u,Xt,m),d&&A(u,ct,d)):A(u,Hs,p),A(u,Bn,v);const[_,b]=u.pageDimensions;return u.width=(c[2]-c[0])/_,u.height=(c[3]-c[1])/b,u.annotationElementId=t.id||null,w&&(u.altTextData=w),u._initialData=a,A(u,iu,!!a),u}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:Pe.STAMP,bitmapId:l(this,Xt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:l(this,Bn),structTreeParentId:this._structTreeParentId};if(t)return r.bitmapUrl=E(this,Oe,Pf).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r;const{decorative:a,altText:u}=this.serializeAltText(!1);if(!a&&u&&(r.accessibilityData={type:"Figure",alt:u}),this.annotationElementId){const d=E(this,Oe,CS).call(this,r);if(d.isSame)return null;d.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,i===null)return r;i.stamps||(i.stamps=new Map);const c=l(this,Bn)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!i.stamps.has(l(this,Xt)))i.stamps.set(l(this,Xt),{area:c,serialized:r}),r.bitmap=E(this,Oe,Pf).call(this,!1);else if(l(this,Bn)){const d=i.stamps.get(l(this,Xt));c>d.area&&(d.area=c,d.serialized.bitmap.close(),d.serialized.bitmap=E(this,Oe,Pf).call(this,!1))}return r}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};ct=new WeakMap,Xt=new WeakMap,Ur=new WeakMap,Hs=new WeakMap,Vr=new WeakMap,nu=new WeakMap,ts=new WeakMap,js=new WeakMap,ns=new WeakMap,Bn=new WeakMap,iu=new WeakMap,Oe=new WeakSet,hc=function(t,i=!1){if(!t){this.remove();return}A(this,ct,t.bitmap),i||(A(this,Xt,t.id),A(this,Bn,t.isSvg)),t.file&&A(this,nu,t.file.name),E(this,Oe,_y).call(this)},dc=function(){if(A(this,Ur,null),this._uiManager.enableWaiting(!1),!!l(this,ts)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,ct)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,ct)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},kf=function(){if(l(this,Xt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,Xt)).then(r=>E(this,Oe,hc).call(this,r,!0)).finally(()=>E(this,Oe,dc).call(this));return}if(l(this,Hs)){const r=l(this,Hs);A(this,Hs,null),this._uiManager.enableWaiting(!0),A(this,Ur,this._uiManager.imageManager.getFromUrl(r).then(a=>E(this,Oe,hc).call(this,a)).finally(()=>E(this,Oe,dc).call(this)));return}if(l(this,Vr)){const r=l(this,Vr);A(this,Vr,null),this._uiManager.enableWaiting(!0),A(this,Ur,this._uiManager.imageManager.getFromFile(r).then(a=>E(this,Oe,hc).call(this,a)).finally(()=>E(this,Oe,dc).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=gc.supportedTypesStr;const i=this._uiManager._signal;A(this,Ur,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),E(this,Oe,hc).call(this,a)}r()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:i})}).finally(()=>E(this,Oe,dc).call(this))),t.click()},_y=function(){const{div:t}=this;let{width:i,height:r}=l(this,ct);const[a,u]=this.pageDimensions,c=.75;if(this.width)i=this.width*a,r=this.height*u;else if(i>c*a||r>c*u){const v=Math.min(c*a/i,c*u/r);i*=v,r*=v}const[d,p]=this.parentDimensions;this.setDims(i*d/a,r*p/u),this._uiManager.enableWaiting(!1);const m=A(this,ts,document.createElement("canvas"));m.setAttribute("role","img"),this.addContainer(m),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),E(this,Oe,Sy).call(this,i,r),E(this,Oe,xS).call(this),l(this,iu)||(this.parent.addUndoableEditor(this),A(this,iu,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,nu)&&m.setAttribute("aria-label",l(this,nu))},bS=function(t,i){var c;const[r,a]=this.parentDimensions;this.width=t/r,this.height=i/a,(c=this._initialOptions)!=null&&c.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,l(this,ns)!==null&&clearTimeout(l(this,ns)),A(this,ns,setTimeout(()=>{A(this,ns,null),E(this,Oe,Sy).call(this,t,i)},200))},Tf=function(t,i){const{width:r,height:a}=l(this,ct);let u=r,c=a,d=l(this,ct);for(;u>2*t||c>2*i;){const p=u,m=c;u>2*t&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2)),c>2*i&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const v=new OffscreenCanvas(u,c);v.getContext("2d").drawImage(d,0,0,p,m,0,0,u,c),d=v.transferToImageBitmap()}return d},Sy=function(t,i){const r=new mm,a=Math.ceil(t*r.sx),u=Math.ceil(i*r.sy),c=l(this,ts);if(!c||c.width===a&&c.height===u)return;c.width=a,c.height=u;const d=l(this,Bn)?l(this,ct):E(this,Oe,Tf).call(this,a,u),p=c.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(d,0,0,d.width,d.height,0,0,a,u)},Pf=function(t){if(t){if(l(this,Bn)){const a=this._uiManager.imageManager.getSvgUrl(l(this,Xt));if(a)return a}const i=document.createElement("canvas");return{width:i.width,height:i.height}=l(this,ct),i.getContext("2d").drawImage(l(this,ct),0,0),i.toDataURL()}if(l(this,Bn)){const[i,r]=this.pageDimensions,a=Math.round(this.width*i*Xr.PDF_TO_CSS_UNITS),u=Math.round(this.height*r*Xr.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(a,u);return c.getContext("2d").drawImage(l(this,ct),0,0,l(this,ct).width,l(this,ct).height,0,0,a,u),c.transferToImageBitmap()}return structuredClone(l(this,ct))},xS=function(){this._uiManager._signal&&(A(this,js,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&E(this,Oe,bS).call(this,i.width,i.height)})),l(this,js).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=l(this,js))==null||t.disconnect(),A(this,js,null)},{once:!0}))},CS=function(t){var p;const{rect:i,pageIndex:r,accessibilityData:{altText:a}}=this._initialData,u=t.rect.every((m,v)=>Math.abs(m-i[v])<1),c=t.pageIndex===r,d=(((p=t.accessibilityData)==null?void 0:p.alt)||"")===a;return{isSame:u&&c&&d,isSameAltText:d}},be(gc,"_type","stamp"),be(gc,"_editorType",Pe.STAMP);let Ay=gc;var ma,su,is,$r,Bs,Un,Wr,ru,ou,rn,Us,ye,Gr,qt,kS,by,xy,Cy,Rf;const mi=class mi{constructor({uiManager:e,pageIndex:t,div:i,structTreeLayer:r,accessibilityManager:a,annotationLayer:u,drawLayer:c,textLayer:d,viewport:p,l10n:m}){x(this,qt);x(this,ma);x(this,su,!1);x(this,is,null);x(this,$r,null);x(this,Bs,null);x(this,Un,new Map);x(this,Wr,!1);x(this,ru,!1);x(this,ou,!1);x(this,rn,null);x(this,Us,null);x(this,ye);const v=[...l(mi,Gr).values()];if(!mi._initialized){mi._initialized=!0;for(const w of v)w.initialize(m,e)}e.registerEditorTypes(v),A(this,ye,e),this.pageIndex=t,this.div=i,A(this,ma,a),A(this,is,u),this.viewport=p,A(this,rn,d),this.drawLayer=c,this._structTree=r,l(this,ye).addLayer(this)}get isEmpty(){return l(this,Un).size===0}get isInvisible(){return this.isEmpty&&l(this,ye).getMode()===Pe.NONE}updateToolbar(e){l(this,ye).updateToolbar(e)}updateMode(e=l(this,ye).getMode()){switch(E(this,qt,Rf).call(this),e){case Pe.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Pe.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Pe.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const i of l(mi,Gr).values())t.toggle(`${i._type}Editing`,e===i._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=l(this,rn))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(l(this,ye).getMode()!==Pe.INK)return;if(!e){for(const i of l(this,Un).values())if(i.isEmpty()){i.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){l(this,ye).setEditingState(e)}addCommands(e){l(this,ye).addCommands(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=l(this,is))==null||t.div.classList.toggle("disabled",!e)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const i of l(this,Un).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(l(this,ye).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!l(this,is))return;const t=l(this,is).getEditableAnnotations();for(const i of t){if(i.hide(),l(this,ye).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const r=await this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}}disable(){var r;A(this,ou,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const a of l(this,Un).values())if(a.disableEditing(),!!a.annotationElementId){if(a.serialize()!==null){e.set(a.annotationElementId,a);continue}else t.set(a.annotationElementId,a);(r=this.getEditableAnnotation(a.annotationElementId))==null||r.show(),a.remove()}if(l(this,is)){const a=l(this,is).getEditableAnnotations();for(const u of a){const{id:c}=u.data;if(l(this,ye).isDeletedAnnotationElement(c))continue;let d=t.get(c);if(d){d.resetAnnotationElement(u),d.show(!1),u.show();continue}d=e.get(c),d&&(l(this,ye).addChangedExistingAnnotation(d),d.renderAnnotationElement(u)&&d.show(!1)),u.show()}}E(this,qt,Rf).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const a of l(mi,Gr).values())i.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),A(this,ou,!1)}getEditableAnnotation(e){var t;return((t=l(this,is))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){l(this,ye).getActive()!==e&&l(this,ye).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=l(this,rn))!=null&&e.div&&!l(this,Us)){A(this,Us,new AbortController);const t=l(this,ye).combinedSignal(l(this,Us));l(this,rn).div.addEventListener("pointerdown",E(this,qt,kS).bind(this),{signal:t}),l(this,rn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=l(this,rn))!=null&&e.div&&l(this,Us)&&(l(this,Us).abort(),A(this,Us,null),l(this,rn).div.classList.remove("highlighting"))}enableClick(){if(l(this,$r))return;A(this,$r,new AbortController);const e=l(this,ye).combinedSignal(l(this,$r));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){var e;(e=l(this,$r))==null||e.abort(),A(this,$r,null)}attach(e){l(this,Un).set(e.id,e);const{annotationElementId:t}=e;t&&l(this,ye).isDeletedAnnotationElement(t)&&l(this,ye).removeDeletedAnnotationElement(e)}detach(e){var t;l(this,Un).delete(e.id),(t=l(this,ma))==null||t.removePointerInTextLayer(e.contentDiv),!l(this,ou)&&e.annotationElementId&&l(this,ye).addDeletedAnnotationElement(e)}remove(e){this.detach(e),l(this,ye).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,l(this,ru)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(l(this,ye).addDeletedAnnotationElement(e.annotationElementId),qe.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),l(this,ye).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),l(this,ye).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var i;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!l(this,Bs)&&(e._focusEventsAllowed=!1,A(this,Bs,setTimeout(()=>{A(this,Bs,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:l(this,ye)._signal}),t.focus())},0))),e._structTreeParentId=(i=l(this,ma))==null?void 0:i.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:t,undo:i,mustExec:!1})}getNextId(){return l(this,ye).getId()}combinedSignal(e){return l(this,ye).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=l(this,qt,by))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){l(this,ye).updateToolbar(e),l(this,ye).updateMode(e);const{offsetX:i,offsetY:r}=E(this,qt,Cy).call(this),a=this.getNextId(),u=E(this,qt,xy).call(this,{parent:this,id:a,x:i,y:r,uiManager:l(this,ye),isCentered:!0,...t});u&&this.add(u)}async deserialize(e){var t;return await((t=l(mi,Gr).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,l(this,ye)))||null}createAndAddNewEditor(e,t,i={}){const r=this.getNextId(),a=E(this,qt,xy).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:l(this,ye),isCentered:t,...i});return a&&this.add(a),a}addNewEditor(){this.createAndAddNewEditor(E(this,qt,Cy).call(this),!0)}setSelected(e){l(this,ye).setSelected(e)}toggleSelected(e){l(this,ye).toggleSelected(e)}unselect(e){l(this,ye).unselect(e)}pointerup(e){const{isMac:t}=pn.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&l(this,Wr)){if(A(this,Wr,!1),!l(this,su)){A(this,su,!0);return}if(l(this,ye).getMode()===Pe.STAMP){l(this,ye).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(l(this,ye).getMode()===Pe.HIGHLIGHT&&this.enableTextSelection(),l(this,Wr)){A(this,Wr,!1);return}const{isMac:t}=pn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;A(this,Wr,!0);const i=l(this,ye).getActive();A(this,su,!i||i.isEmpty())}findNewParent(e,t,i){const r=l(this,ye).findParent(t,i);return r===null||r===this?!1:(r.changeParent(e),!0)}destroy(){var e,t;((e=l(this,ye).getActive())==null?void 0:e.parent)===this&&(l(this,ye).commitOrRemove(),l(this,ye).setActiveEditor(null)),l(this,Bs)&&(clearTimeout(l(this,Bs)),A(this,Bs,null));for(const i of l(this,Un).values())(t=l(this,ma))==null||t.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,l(this,Un).clear(),l(this,ye).removeLayer(this)}render({viewport:e}){this.viewport=e,ya(this.div,e);for(const t of l(this,ye).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){l(this,ye).commitOrRemove(),E(this,qt,Rf).call(this);const t=this.viewport.rotation,i=e.rotation;if(this.viewport=e,ya(this.div,{rotation:i}),t!==i)for(const r of l(this,Un).values())r.rotate(i);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return l(this,ye).viewParameters.realScale}};ma=new WeakMap,su=new WeakMap,is=new WeakMap,$r=new WeakMap,Bs=new WeakMap,Un=new WeakMap,Wr=new WeakMap,ru=new WeakMap,ou=new WeakMap,rn=new WeakMap,Us=new WeakMap,ye=new WeakMap,Gr=new WeakMap,qt=new WeakSet,kS=function(e){l(this,ye).unselectAll();const{target:t}=e;if(t===l(this,rn).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&l(this,rn).div.contains(t)){const{isMac:i}=pn.platform;if(e.button!==0||e.ctrlKey&&i)return;l(this,ye).showAllEditors("highlight",!0,!0),l(this,rn).div.classList.add("free"),this.toggleDrawing(),Df.startHighlighting(this,l(this,ye).direction==="ltr",{target:l(this,rn).div,x:e.x,y:e.y}),l(this,rn).div.addEventListener("pointerup",()=>{l(this,rn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,ye)._signal}),e.preventDefault()}},by=function(){return l(mi,Gr).get(l(this,ye).getMode())},xy=function(e){const t=l(this,qt,by);return t?new t.prototype.constructor(e):null},Cy=function(){const{x:e,y:t,width:i,height:r}=this.div.getBoundingClientRect(),a=Math.max(0,e),u=Math.max(0,t),c=Math.min(window.innerWidth,e+i),d=Math.min(window.innerHeight,t+r),p=(a+c)/2-e,m=(u+d)/2-t,[v,w]=this.viewport.rotation%180===0?[p,m]:[m,p];return{offsetX:v,offsetY:w}},Rf=function(){A(this,ru,!0);for(const e of l(this,Un).values())e.isEmpty()&&e.remove();A(this,ru,!1)},be(mi,"_initialized",!1),x(mi,Gr,new Map([ny,hy,Ay,Df].map(e=>[e._editorType,e])));let Ey=mi;var ss,Rh,St,Vs,Lh,Ty,Sa,Py,TS;const $t=class $t{constructor({pageIndex:e}){x(this,Sa);x(this,ss,null);x(this,Rh,0);x(this,St,new Map);x(this,Vs,new Map);this.pageIndex=e}setParent(e){if(!l(this,ss)){A(this,ss,e);return}if(l(this,ss)!==e){if(l(this,St).size>0)for(const t of l(this,St).values())t.remove(),e.append(t);A(this,ss,e)}}static get _svgFactory(){return ze(this,"_svgFactory",new $y)}draw(e,t,i,r=!1){const a=cn(this,Rh)._++,u=E(this,Sa,Py).call(this,e.box);u.classList.add(...e.classNamesForDrawing);const c=$t._svgFactory.createElement("defs");u.append(c);const d=$t._svgFactory.createElement("path");c.append(d);const p=`path_p${this.pageIndex}_${a}`;d.setAttribute("id",p),d.setAttribute("d",e.toSVGPath()),r&&l(this,Vs).set(a,d);const m=E(this,Sa,TS).call(this,c,p),v=$t._svgFactory.createElement("use");return u.append(v),u.setAttribute("fill",t),u.setAttribute("fill-opacity",i),v.setAttribute("href",`#${p}`),l(this,St).set(a,u),{id:a,clipPathId:`url(#${m})`}}drawOutline(e){const t=cn(this,Rh)._++,i=E(this,Sa,Py).call(this,e.box);i.classList.add(...e.classNamesForOutlining);const r=$t._svgFactory.createElement("defs");i.append(r);const a=$t._svgFactory.createElement("path");r.append(a);const u=`path_p${this.pageIndex}_${t}`;a.setAttribute("id",u),a.setAttribute("d",e.toSVGPath()),a.setAttribute("vector-effect","non-scaling-stroke");let c;if(e.mustRemoveSelfIntersections){const m=$t._svgFactory.createElement("mask");r.append(m),c=`mask_p${this.pageIndex}_${t}`,m.setAttribute("id",c),m.setAttribute("maskUnits","objectBoundingBox");const v=$t._svgFactory.createElement("rect");m.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const w=$t._svgFactory.createElement("use");m.append(w),w.setAttribute("href",`#${u}`),w.setAttribute("stroke","none"),w.setAttribute("fill","black"),w.setAttribute("fill-rule","nonzero"),w.classList.add("mask")}const d=$t._svgFactory.createElement("use");i.append(d),d.setAttribute("href",`#${u}`),c&&d.setAttribute("mask",`url(#${c})`);const p=d.cloneNode();return i.append(p),d.classList.add("mainOutline"),p.classList.add("secondaryOutline"),l(this,St).set(t,i),t}finalizeLine(e,t){const i=l(this,Vs).get(e);l(this,Vs).delete(e),this.updateBox(e,t.box),i.setAttribute("d",t.toSVGPath())}updateLine(e,t){l(this,St).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){l(this,Vs).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var i;E(i=$t,Lh,Ty).call(i,l(this,St).get(e),t)}show(e,t){l(this,St).get(e).classList.toggle("hidden",!t)}rotate(e,t){l(this,St).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){l(this,St).get(e).setAttribute("fill",t)}changeOpacity(e,t){l(this,St).get(e).setAttribute("fill-opacity",t)}addClass(e,t){l(this,St).get(e).classList.add(t)}removeClass(e,t){l(this,St).get(e).classList.remove(t)}getSVGRoot(e){return l(this,St).get(e)}remove(e){l(this,Vs).delete(e),l(this,ss)!==null&&(l(this,St).get(e).remove(),l(this,St).delete(e))}destroy(){A(this,ss,null);for(const e of l(this,St).values())e.remove();l(this,St).clear(),l(this,Vs).clear()}};ss=new WeakMap,Rh=new WeakMap,St=new WeakMap,Vs=new WeakMap,Lh=new WeakSet,Ty=function(e,{x:t=0,y:i=0,width:r=1,height:a=1}={}){const{style:u}=e;u.top=`${100*i}%`,u.left=`${100*t}%`,u.width=`${100*r}%`,u.height=`${100*a}%`},Sa=new WeakSet,Py=function(e){var i;const t=$t._svgFactory.create(1,1,!0);return l(this,ss).append(t),t.setAttribute("aria-hidden",!0),E(i=$t,Lh,Ty).call(i,t,e),t},TS=function(e,t){const i=$t._svgFactory.createElement("clipPath");e.append(i);const r=`clip_${t}`;i.setAttribute("id",r),i.setAttribute("clipPathUnits","objectBoundingBox");const a=$t._svgFactory.createElement("use");return i.append(a),a.setAttribute("href",`#${t}`),a.classList.add("clip"),r},x($t,Lh);let ky=$t;var nC=ke.AbortException,iC=ke.AnnotationEditorLayer,sC=ke.AnnotationEditorParamsType,rC=ke.AnnotationEditorType,oC=ke.AnnotationEditorUIManager,PS=ke.AnnotationLayer,RS=ke.AnnotationMode,aC=ke.ColorPicker,lC=ke.DOMSVGFactory,uC=ke.DrawLayer,cC=ke.FeatureTest,Gy=ke.GlobalWorkerOptions,hC=ke.ImageKind,dC=ke.InvalidPDFException,fC=ke.MissingPDFException,pC=ke.OPS,gC=ke.OutputScale,mC=ke.PDFDataRangeTransport,yC=ke.PDFDateString,vC=ke.PDFWorker,wC=ke.PasswordResponses,AC=ke.PermissionFlag,_C=ke.PixelsPerInch,SC=ke.RenderingCancelledException,LS=ke.TextLayer,EC=ke.UnexpectedResponseException,bC=ke.Util,xC=ke.VerbosityLevel,CC=ke.XfaLayer,kC=ke.build,TC=ke.createValidAbsoluteUrl,PC=ke.fetchData,MS=ke.getDocument,RC=ke.getFilenameFromUrl,LC=ke.getPdfFilenameFromUrl,MC=ke.getXfaPageViewport,IC=ke.isDataScheme,FC=ke.isPdfFile,DC=ke.noContextMenu,NC=ke.normalizeUnicode,OC=ke.setLayerDimensions,zC=ke.shadow,IS=ke.version;const HC=Object.freeze(Object.defineProperty({__proto__:null,AbortException:nC,AnnotationEditorLayer:iC,AnnotationEditorParamsType:sC,AnnotationEditorType:rC,AnnotationEditorUIManager:oC,AnnotationLayer:PS,AnnotationMode:RS,ColorPicker:aC,DOMSVGFactory:lC,DrawLayer:uC,FeatureTest:cC,GlobalWorkerOptions:Gy,ImageKind:hC,InvalidPDFException:dC,MissingPDFException:fC,OPS:pC,OutputScale:gC,PDFDataRangeTransport:mC,PDFDateString:yC,PDFWorker:vC,PasswordResponses:wC,PermissionFlag:AC,PixelsPerInch:_C,RenderingCancelledException:SC,TextLayer:LS,UnexpectedResponseException:EC,Util:bC,VerbosityLevel:xC,XfaLayer:CC,build:kC,createValidAbsoluteUrl:TC,fetchData:PC,getDocument:MS,getFilenameFromUrl:RC,getPdfFilenameFromUrl:LC,getXfaPageViewport:MC,isDataScheme:IC,isPdfFile:FC,noContextMenu:DC,normalizeUnicode:NC,setLayerDimensions:OC,shadow:zC,version:IS},Symbol.toStringTag,{value:"Module"}));var Nt=function(f,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,a;i<r;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return f.concat(a||Array.prototype.slice.call(e))},jC=["onCopy","onCut","onPaste"],BC=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],UC=["onFocus","onBlur"],VC=["onInput","onInvalid","onReset","onSubmit"],$C=["onLoad","onError"],WC=["onKeyDown","onKeyPress","onKeyUp"],GC=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],XC=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],qC=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],YC=["onSelect"],KC=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],QC=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],JC=["onScroll"],ZC=["onWheel"],ek=["onAnimationStart","onAnimationEnd","onAnimationIteration"],tk=["onTransitionEnd"],nk=["onToggle"],ik=["onChange"],sk=Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt([],jC,!0),BC,!0),UC,!0),VC,!0),$C,!0),WC,!0),GC,!0),XC,!0),qC,!0),YC,!0),KC,!0),QC,!0),JC,!0),ZC,!0),ek,!0),tk,!0),ik,!0),nk,!0);function FS(f,e){var t={};return sk.forEach(function(i){var r=f[i];r&&(e?t[i]=function(a){return r(a,e(i))}:t[i]=r)}),t}function Dh(f){var e=!1,t=new Promise(function(i,r){f.then(function(a){return!e&&i(a)}).catch(function(a){return!e&&r(a)})});return{promise:t,cancel:function(){e=!0}}}function DS(f){var e,t,i="";if(typeof f=="string"||typeof f=="number")i+=f;else if(typeof f=="object")if(Array.isArray(f)){var r=f.length;for(e=0;e<r;e++)f[e]&&(t=DS(f[e]))&&(i&&(i+=" "),i+=t)}else for(t in f)f[t]&&(i&&(i+=" "),i+=t);return i}function ap(){for(var f,e,t=0,i="",r=arguments.length;t<r;t++)(f=arguments[t])&&(e=DS(f))&&(i&&(i+=" "),i+=e);return i}var rk="Invariant failed";function Qe(f,e){if(!f)throw new Error(rk)}var hm,hA;function ok(){if(hA)return hm;hA=1;var f=function(){};return hm=f,hm}var ak=ok();const on=$b(ak);var dA=Object.prototype.hasOwnProperty;function fA(f,e,t){for(t of f.keys())if(al(t,e))return t}function al(f,e){var t,i,r;if(f===e)return!0;if(f&&e&&(t=f.constructor)===e.constructor){if(t===Date)return f.getTime()===e.getTime();if(t===RegExp)return f.toString()===e.toString();if(t===Array){if((i=f.length)===e.length)for(;i--&&al(f[i],e[i]););return i===-1}if(t===Set){if(f.size!==e.size)return!1;for(i of f)if(r=i,r&&typeof r=="object"&&(r=fA(e,r),!r)||!e.has(r))return!1;return!0}if(t===Map){if(f.size!==e.size)return!1;for(i of f)if(r=i[0],r&&typeof r=="object"&&(r=fA(e,r),!r)||!al(i[1],e.get(r)))return!1;return!0}if(t===ArrayBuffer)f=new Uint8Array(f),e=new Uint8Array(e);else if(t===DataView){if((i=f.byteLength)===e.byteLength)for(;i--&&f.getInt8(i)===e.getInt8(i););return i===-1}if(ArrayBuffer.isView(f)){if((i=f.byteLength)===e.byteLength)for(;i--&&f[i]===e[i];);return i===-1}if(!t||typeof f=="object"){i=0;for(t in f)if(dA.call(f,t)&&++i&&!dA.call(e,t)||!(t in e)||!al(f[t],e[t]))return!1;return Object.keys(e).length===i}}return f!==f&&e!==e}const NS=oe.createContext(null);function ll({children:f,type:e}){return je.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:f})}const lk="noopener noreferrer nofollow";class uk{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Qe(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){Qe(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{Qe(this.pdfDocument),Qe(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{Qe(Array.isArray(t));const i=t[0];new Promise(r=>{Qe(this.pdfDocument),i instanceof Object?this.pdfDocument.getPageIndex(i).then(a=>{r(a)}).catch(()=>{Qe(!1)}):typeof i=="number"?r(i):Qe(!1)}).then(r=>{const a=r+1;Qe(this.pdfViewer),Qe(a>=1&&a<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:r,pageNumber:a})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;Qe(this.pdfViewer),Qe(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,i){e.href=t,e.rel=this.externalLinkRel||lk,e.target=i?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const pA={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},lp=typeof window<"u",OS=lp&&window.location.protocol==="file:";function ck(f){return typeof f<"u"}function po(f){return ck(f)&&f!==null}function hk(f){return typeof f=="string"}function dk(f){return f instanceof ArrayBuffer}function fk(f){return Qe(lp),f instanceof Blob}function Ry(f){return hk(f)&&/^data:/.test(f)}function gA(f){Qe(Ry(f));const[e="",t=""]=f.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function pk(){return lp&&window.devicePixelRatio||1}const zS="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function mA(){on(!OS,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${zS}`)}function gk(){on(!OS,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${zS}`)}function Aa(f){f!=null&&f.cancel&&f.cancel()}function Ly(f,e){return Object.defineProperty(f,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(f,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(f,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(f,"originalHeight",{get(){return this.view[3]},configurable:!0}),f}function mk(f){return f.name==="RenderingCancelledException"}function yk(f){return new Promise((e,t)=>{const i=new FileReader;i.onload=()=>{if(!i.result)return t(new Error("Error while reading a file."));e(i.result)},i.onerror=r=>{if(!r.target)return t(new Error("Error while reading a file."));const{error:a}=r.target;if(!a)return t(new Error("Error while reading a file."));switch(a.code){case a.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case a.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case a.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},i.readAsArrayBuffer(f)})}function vk(f,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return f}}function au(){return oe.useReducer(vk,{value:void 0,error:void 0})}var wk=function(f,e,t,i){function r(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function c(m){try{p(i.next(m))}catch(v){u(v)}}function d(m){try{p(i.throw(m))}catch(v){u(v)}}function p(m){m.done?a(m.value):r(m.value).then(c,d)}p((i=i.apply(f,e||[])).next())})},yA=function(f,e){var t={};for(var i in f)Object.prototype.hasOwnProperty.call(f,i)&&e.indexOf(i)<0&&(t[i]=f[i]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(f);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(f,i[r])&&(t[i[r]]=f[i[r]]);return t};const{PDFDataRangeTransport:Ak}=HC,_k=(f,e)=>{switch(e){case pA.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");f(t);break}case pA.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");f(t);break}}};function vA(f){return typeof f=="object"&&f!==null&&("data"in f||"range"in f||"url"in f)}const Sk=oe.forwardRef(function(e,t){var{children:i,className:r,error:a="Failed to load PDF file.",externalLinkRel:u,externalLinkTarget:c,file:d,inputRef:p,imageResourcesPath:m,loading:v="Loading PDF…",noData:w="No PDF file specified.",onItemClick:_,onLoadError:b,onLoadProgress:C,onLoadSuccess:P,onPassword:k=_k,onSourceError:I,onSourceSuccess:D,options:F,renderMode:j,rotate:H}=e,V=yA(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[$,K]=au(),{value:te,error:ee}=$,[Se,de]=au(),{value:ce,error:ve}=Se,pe=oe.useRef(new uk),Y=oe.useRef([]),B=oe.useRef(void 0),se=oe.useRef(void 0);d&&d!==B.current&&vA(d)&&(on(!al(d,B.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),B.current=d),F&&F!==se.current&&(on(!al(F,se.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),se.current=F);const Q=oe.useRef({scrollPageIntoView:Ue=>{const{dest:it,pageNumber:bt,pageIndex:gt=bt-1}=Ue;if(_){_({dest:it,pageIndex:gt,pageNumber:bt});return}const Ii=Y.current[gt];if(Ii){Ii.scrollIntoView();return}on(!1,`An internal link leading to page ${bt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});oe.useImperativeHandle(t,()=>({linkService:pe,pages:Y,viewer:Q}),[]);function M(){D&&D()}function U(){ee&&(on(!1,ee.toString()),I&&I(ee))}function ae(){K({type:"RESET"})}oe.useEffect(ae,[d,K]);const we=oe.useCallback(()=>wk(this,void 0,void 0,function*(){if(!d)return null;if(typeof d=="string")return Ry(d)?{data:gA(d)}:(mA(),{url:d});if(d instanceof Ak)return{range:d};if(dk(d))return{data:d};if(lp&&fk(d))return{data:yield yk(d)};if(Qe(typeof d=="object"),Qe(vA(d)),"url"in d&&typeof d.url=="string"){if(Ry(d.url)){const{url:Ue}=d,it=yA(d,["url"]),bt=gA(Ue);return Object.assign({data:bt},it)}mA()}return d}),[d]);oe.useEffect(()=>{const Ue=Dh(we());return Ue.promise.then(it=>{K({type:"RESOLVE",value:it})}).catch(it=>{K({type:"REJECT",error:it})}),()=>{Aa(Ue)}},[we,K]),oe.useEffect(()=>{if(!(typeof te>"u")){if(te===!1){U();return}M()}},[te]);function Ce(){ce&&(P&&P(ce),Y.current=new Array(ce.numPages),pe.current.setDocument(ce))}function me(){ve&&(on(!1,ve.toString()),b&&b(ve))}oe.useEffect(function(){de({type:"RESET"})},[de,te]),oe.useEffect(function(){if(!te)return;const it=F?Object.assign(Object.assign({},te),F):te,bt=MS(it);C&&(bt.onProgress=C),k&&(bt.onPassword=k);const gt=bt,Ii=gt.promise.then(Qs=>{de({type:"RESOLVE",value:Qs})}).catch(Qs=>{gt.destroyed||de({type:"REJECT",error:Qs})});return()=>{Ii.finally(()=>gt.destroy())}},[F,de,te]),oe.useEffect(()=>{if(!(typeof ce>"u")){if(ce===!1){me();return}Ce()}},[ce]),oe.useEffect(function(){pe.current.setViewer(Q.current),pe.current.setExternalLinkRel(u),pe.current.setExternalLinkTarget(c)},[u,c]);const ge=oe.useCallback((Ue,it)=>{Y.current[Ue]=it},[]),Re=oe.useCallback(Ue=>{delete Y.current[Ue]},[]),Ne=oe.useMemo(()=>({imageResourcesPath:m,linkService:pe.current,onItemClick:_,pdf:ce,registerPage:ge,renderMode:j,rotate:H,unregisterPage:Re}),[m,_,ce,ge,j,H,Re]),Ie=oe.useMemo(()=>FS(V,()=>ce),[V,ce]);function Mi(){return je.jsx(NS.Provider,{value:Ne,children:i})}function Ks(){return d?ce==null?je.jsx(ll,{type:"loading",children:typeof v=="function"?v():v}):ce===!1?je.jsx(ll,{type:"error",children:typeof a=="function"?a():a}):Mi():je.jsx(ll,{type:"no-data",children:typeof w=="function"?w():w})}return je.jsx("div",Object.assign({className:ap("react-pdf__Document",r),ref:p,style:{"--scale-factor":"1"}},Ie,{children:Ks()}))});function HS(){return oe.useContext(NS)}function jS(){for(var f=[],e=0;e<arguments.length;e++)f[e]=arguments[e];var t=f.filter(Boolean);if(t.length<=1){var i=t[0];return i||null}return function(a){t.forEach(function(u){typeof u=="function"?u(a):u&&(u.current=a)})}}const BS=oe.createContext(null),US={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},Ek=/^H(\d+)$/;function bk(f){return f in US}function up(f){return"children"in f}function VS(f){return up(f)?f.children.length===1&&0 in f.children&&"id"in f.children[0]:!1}function xk(f){const e={};if(up(f)){const{role:t}=f,i=t.match(Ek);if(i)e.role="heading",e["aria-level"]=Number(i[1]);else if(bk(t)){const r=US[t];r&&(e.role=r)}}return e}function $S(f){const e={};if(up(f)){if(f.alt!==void 0&&(e["aria-label"]=f.alt),f.lang!==void 0&&(e.lang=f.lang),VS(f)){const[t]=f.children;if(t){const i=$S(t);return Object.assign(Object.assign({},e),i)}}}else"id"in f&&(e["aria-owns"]=f.id);return e}function Ck(f){return f?Object.assign(Object.assign({},xk(f)),$S(f)):null}function WS({className:f,node:e}){const t=oe.useMemo(()=>Ck(e),[e]),i=oe.useMemo(()=>!up(e)||VS(e)?null:e.children.map((r,a)=>je.jsx(WS,{node:r},a)),[e]);return je.jsx("span",Object.assign({className:f},t,{children:i}))}function cp(){return oe.useContext(BS)}function kk(){const f=cp();Qe(f);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=f,[i,r]=au(),{value:a,error:u}=i,{customTextRenderer:c,page:d}=f;function p(){a&&t&&t(a)}function m(){u&&(on(!1,u.toString()),e&&e(u))}return oe.useEffect(function(){r({type:"RESET"})},[r,d]),oe.useEffect(function(){if(c||!d)return;const w=Dh(d.getStructTree()),_=w;return w.promise.then(b=>{r({type:"RESOLVE",value:b})}).catch(b=>{r({type:"REJECT",error:b})}),()=>Aa(_)},[c,d,r]),oe.useEffect(()=>{if(a!==void 0){if(a===!1){m();return}p()}},[a]),a?je.jsx(WS,{className:"react-pdf__Page__structTree structTree",node:a}):null}const wA=RS;function Tk(f){const e=cp();Qe(e);const t=Object.assign(Object.assign({},e),f),{_className:i,canvasBackground:r,devicePixelRatio:a=pk(),onRenderError:u,onRenderSuccess:c,page:d,renderForms:p,renderTextLayer:m,rotate:v,scale:w}=t,{canvasRef:_}=f;Qe(d);const b=oe.useRef(null);function C(){d&&c&&c(Ly(d,w))}function P(F){mk(F)||(on(!1,F.toString()),u&&u(F))}const k=oe.useMemo(()=>d.getViewport({scale:w*a,rotation:v}),[a,d,v,w]),I=oe.useMemo(()=>d.getViewport({scale:w,rotation:v}),[d,v,w]);oe.useEffect(function(){if(!d)return;d.cleanup();const{current:j}=b;if(!j)return;j.width=k.width,j.height=k.height,j.style.width=`${Math.floor(I.width)}px`,j.style.height=`${Math.floor(I.height)}px`,j.style.visibility="hidden";const H={annotationMode:p?wA.ENABLE_FORMS:wA.ENABLE,canvasContext:j.getContext("2d",{alpha:!1}),viewport:k};r&&(H.background=r);const V=d.render(H),$=V;return V.promise.then(()=>{j.style.visibility="",C()}).catch(P),()=>Aa($)},[r,d,p,k,I]);const D=oe.useCallback(()=>{const{current:F}=b;F&&(F.width=0,F.height=0)},[]);return oe.useEffect(()=>D,[D]),je.jsx("canvas",{className:`${i}__canvas`,dir:"ltr",ref:jS(_,b),style:{display:"block",userSelect:"none"},children:m?je.jsx(kk,{}):null})}function Pk(f){return"str"in f}function Rk(){const f=cp();Qe(f);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:i,onRenderTextLayerError:r,onRenderTextLayerSuccess:a,page:u,pageIndex:c,pageNumber:d,rotate:p,scale:m}=f;Qe(u);const[v,w]=au(),{value:_,error:b}=v,C=oe.useRef(null);on(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function P(){_&&i&&i(_)}function k(){b&&(on(!1,b.toString()),t&&t(b))}oe.useEffect(function(){w({type:"RESET"})},[u,w]),oe.useEffect(function(){if(!u)return;const $=Dh(u.getTextContent()),K=$;return $.promise.then(te=>{w({type:"RESOLVE",value:te})}).catch(te=>{w({type:"REJECT",error:te})}),()=>Aa(K)},[u,w]),oe.useEffect(()=>{if(_!==void 0){if(_===!1){k();return}P()}},[_]);const I=oe.useCallback(()=>{a&&a()},[a]),D=oe.useCallback(V=>{on(!1,V.toString()),r&&r(V)},[r]);function F(){const V=C.current;V&&V.classList.add("selecting")}function j(){const V=C.current;V&&V.classList.remove("selecting")}const H=oe.useMemo(()=>u.getViewport({scale:m,rotation:p}),[u,p,m]);return oe.useLayoutEffect(function(){if(!u||!_)return;const{current:$}=C;if(!$)return;$.innerHTML="";const K=u.streamTextContent({includeMarkedContent:!0}),te={container:$,textContentSource:K,viewport:H},ee=new LS(te),Se=ee;return ee.render().then(()=>{const de=document.createElement("div");de.className="endOfContent",$.append(de);const ce=$.querySelectorAll('[role="presentation"]');if(e){let ve=0;_.items.forEach((pe,Y)=>{if(!Pk(pe))return;const B=ce[ve];if(!B)return;const se=e(Object.assign({pageIndex:c,pageNumber:d,itemIndex:Y},pe));B.innerHTML=se,ve+=pe.str&&pe.hasEOL?2:1})}I()}).catch(D),()=>Aa(Se)},[e,D,I,u,c,d,_,H]),je.jsx("div",{className:ap("react-pdf__Page__textContent","textLayer"),onMouseUp:j,onMouseDown:F,ref:C})}function Lk(){const f=HS(),e=cp();Qe(e);const t=Object.assign(Object.assign({},f),e),{imageResourcesPath:i,linkService:r,onGetAnnotationsError:a,onGetAnnotationsSuccess:u,onRenderAnnotationLayerError:c,onRenderAnnotationLayerSuccess:d,page:p,pdf:m,renderForms:v,rotate:w,scale:_=1}=t;Qe(m),Qe(p),Qe(r);const[b,C]=au(),{value:P,error:k}=b,I=oe.useRef(null);on(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function D(){P&&u&&u(P)}function F(){k&&(on(!1,k.toString()),a&&a(k))}oe.useEffect(function(){C({type:"RESET"})},[C,p]),oe.useEffect(function(){if(!p)return;const K=Dh(p.getAnnotations()),te=K;return K.promise.then(ee=>{C({type:"RESOLVE",value:ee})}).catch(ee=>{C({type:"REJECT",error:ee})}),()=>{Aa(te)}},[C,p]),oe.useEffect(()=>{if(P!==void 0){if(P===!1){F();return}D()}},[P]);function j(){d&&d()}function H($){on(!1,`${$}`),c&&c($)}const V=oe.useMemo(()=>p.getViewport({scale:_,rotation:w}),[p,w,_]);return oe.useEffect(function(){if(!m||!p||!r||!P)return;const{current:K}=I;if(!K)return;const te=V.clone({dontFlip:!0}),ee={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:K,l10n:null,page:p,structTreeLayer:null,viewport:te},Se={annotations:P,annotationStorage:m.annotationStorage,div:K,imageResourcesPath:i,linkService:r,page:p,renderForms:v,viewport:te};K.innerHTML="";try{new PS(ee).render(Se),j()}catch(de){H(de)}return()=>{}},[P,i,r,p,m,v,V]),je.jsx("div",{className:ap("react-pdf__Page__annotations","annotationLayer"),ref:I})}var Mk=function(f,e){var t={};for(var i in f)Object.prototype.hasOwnProperty.call(f,i)&&e.indexOf(i)<0&&(t[i]=f[i]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(f);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(f,i[r])&&(t[i[r]]=f[i[r]]);return t};const AA=1;function _A(f){const e=HS(),t=Object.assign(Object.assign({},e),f),{_className:i="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:a,canvasRef:u,children:c,className:d,customRenderer:p,customTextRenderer:m,devicePixelRatio:v,error:w="Failed to load the page.",height:_,inputRef:b,loading:C="Loading page…",noData:P="No page specified.",onGetAnnotationsError:k,onGetAnnotationsSuccess:I,onGetStructTreeError:D,onGetStructTreeSuccess:F,onGetTextError:j,onGetTextSuccess:H,onLoadError:V,onLoadSuccess:$,onRenderAnnotationLayerError:K,onRenderAnnotationLayerSuccess:te,onRenderError:ee,onRenderSuccess:Se,onRenderTextLayerError:de,onRenderTextLayerSuccess:ce,pageIndex:ve,pageNumber:pe,pdf:Y,registerPage:B,renderAnnotationLayer:se=!0,renderForms:Q=!1,renderMode:M="canvas",renderTextLayer:U=!0,rotate:ae,scale:we=AA,unregisterPage:Ce,width:me}=t,ge=Mk(t,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Re,Ne]=au(),{value:Ie,error:Mi}=Re,Ks=oe.useRef(null);Qe(Y);const Ue=po(pe)?pe-1:ve??null,it=pe??(po(ve)?ve+1:null),bt=ae??(Ie?Ie.rotate:null),gt=oe.useMemo(()=>{if(!Ie)return null;let Fi=1;const rs=we??AA;if(me||_){const Zr=Ie.getViewport({scale:1,rotation:bt});me?Fi=me/Zr.width:_&&(Fi=_/Zr.height)}return rs*Fi},[_,Ie,bt,we,me]);oe.useEffect(function(){return()=>{po(Ue)&&r&&Ce&&Ce(Ue)}},[r,Y,Ue,Ce]);function Ii(){if($){if(!Ie||!gt)return;$(Ly(Ie,gt))}if(r&&B){if(!po(Ue)||!Ks.current)return;B(Ue,Ks.current)}}function Qs(){Mi&&(on(!1,Mi.toString()),V&&V(Mi))}oe.useEffect(function(){Ne({type:"RESET"})},[Ne,Y,Ue]),oe.useEffect(function(){if(!Y||!it)return;const rs=Dh(Y.getPage(it)),Zr=rs;return rs.promise.then(os=>{Ne({type:"RESOLVE",value:os})}).catch(os=>{Ne({type:"REJECT",error:os})}),()=>Aa(Zr)},[Ne,Y,it]),oe.useEffect(()=>{if(Ie!==void 0){if(Ie===!1){Qs();return}Ii()}},[Ie,gt]);const lu=oe.useMemo(()=>Ie&&po(Ue)&&it&&po(bt)&&po(gt)?{_className:i,canvasBackground:a,customTextRenderer:m,devicePixelRatio:v,onGetAnnotationsError:k,onGetAnnotationsSuccess:I,onGetStructTreeError:D,onGetStructTreeSuccess:F,onGetTextError:j,onGetTextSuccess:H,onRenderAnnotationLayerError:K,onRenderAnnotationLayerSuccess:te,onRenderError:ee,onRenderSuccess:Se,onRenderTextLayerError:de,onRenderTextLayerSuccess:ce,page:Ie,pageIndex:Ue,pageNumber:it,renderForms:Q,renderTextLayer:U,rotate:bt,scale:gt}:null,[i,a,m,v,k,I,D,F,j,H,K,te,ee,Se,de,ce,Ie,Ue,it,Q,U,bt,gt]),Jr=oe.useMemo(()=>FS(ge,()=>Ie&&(gt?Ly(Ie,gt):void 0)),[ge,Ie,gt]),li=`${Ue}@${gt}/${bt}`;function uu(){switch(M){case"custom":return Qe(p),je.jsx(p,{},`${li}_custom`);case"none":return null;case"canvas":default:return je.jsx(Tk,{canvasRef:u},`${li}_canvas`)}}function Nh(){return U?je.jsx(Rk,{},`${li}_text`):null}function Oh(){return se?je.jsx(Lk,{},`${li}_annotations`):null}function zh(){return je.jsxs(BS.Provider,{value:lu,children:[uu(),Nh(),Oh(),c]})}function Hh(){return it?Y===null||Ie===void 0||Ie===null?je.jsx(ll,{type:"loading",children:typeof C=="function"?C():C}):Y===!1||Ie===!1?je.jsx(ll,{type:"error",children:typeof w=="function"?w():w}):zh():je.jsx(ll,{type:"no-data",children:typeof P=="function"?P():P})}return je.jsx("div",Object.assign({className:ap(i,d),"data-page-number":it,ref:jS(b,Ks),style:{"--scale-factor":`${gt}`,backgroundColor:a||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},Jr,{children:Hh()}))}gk();Gy.workerSrc="pdf.worker.mjs";const SA="/assets/catalog-B0CPkQ-Z.pdf",Ik="/assets/lightingnews-BIF1UBPc.pdf";Gy.workerSrc=`//unpkg.com/pdfjs-dist@${IS}/build/pdf.worker.min.mjs`;function Fk(){const[f,e]=oe.useState(1),[t,i]=oe.useState(1),[r]=oe.useState(window.innerWidth),[a,u]=oe.useState(!1),[c,d]=oe.useState(SA),[p,m]=oe.useState(!0);oe.useEffect(()=>{const b=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);u(b)},[]),oe.useEffect(()=>{if(i(1),p){d(SA);return}d(Ik)},[p]);const v=({numPages:b})=>{e(b)},w=()=>{i(b=>Math.max(b-1,1))},_=()=>{i(b=>Math.min(b+1,f||1))};return je.jsxs("div",{children:[je.jsxs("div",{className:"sticky top-0 w-full p-3 bg-gray-800 text-white flex justify-center items-center gap-4 z-10",children:[je.jsx("button",{className:"border-2 px-3 py-1 rounded disabled:opacity-50",onClick:w,children:"이전"}),t,"/",f,je.jsx("button",{className:"border-2 px-3 py-1 rounded disabled:opacity-50",onClick:_,children:"다음"}),je.jsxs("button",{className:"border-2 px-3 py-1 rounded",onClick:()=>m(!p),children:[p?"라이팅 뉴스":"전체 카탈로그"," 보기"]})]}),je.jsx("div",{className:"flex justify-center items-center",children:je.jsx(Sk,{file:c,onLoadSuccess:v,children:a?je.jsx(_A,{pageNumber:t,width:r*.98}):je.jsx(_A,{pageNumber:t})})})]})}Zb.createRoot(document.getElementById("root")).render(je.jsx(oe.StrictMode,{children:je.jsx(Fk,{})}));
